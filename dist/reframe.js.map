{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///reframe.js","webpack:///webpack/bootstrap 87034f38f87787b2dee0","webpack:///./src/main/js/reframe/core.js","webpack:///external {\"amd\":\"immutable\",\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"root\":\"Immutable\"}","webpack:///external {\"amd\":\"rx\",\"commonjs\":\"rx\",\"commonjs2\":\"rx\",\"root\":\"Rx\"}","webpack:///./src/main/js/reframe/subs.js","webpack:///./src/main/js/reframe/db.js","webpack:///./src/main/js/reframe/dispatcher.js","webpack:///./src/main/js/reframe/atom.js","webpack:///./src/main/js/reframe/commands.js","webpack:///./src/main/js/reframe/middleware.js","webpack:///./src/main/js/reframe/react.js","webpack:///./src/main/js/reframe/shouldupdate.js","webpack:///./src/main/js/reframe/subindex.js","webpack:///./~/immutablediff/src/diff.js","webpack:///./~/immutablediff/src/lcs.js","webpack:///./~/immutablediff/src/path.js","webpack:///./~/immutablediff/src/utils.js","webpack:///external {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_16__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_commands","commands","_subs","subs","_db","db","_atom","atom","_react","react","_middleware","middleware","registerHandler","dispatch","dispatchSync","registerSub","subscribe","indexPath","db$","viewP","viewV","viewSP","viewSV","view","deref","swap","reset","render","pause$","compMiddleware","debug","trimv","path","enrich","after","name","handler","subDispatcher","register","cmd","lookup","requestRender$","def","index","sub","defineProperty","value","render$","sync$","animationFrame$","undefined","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","TypeError","_rx","Rx","_dispatcher","_subindex","BehaviorSubject","animationFrame$1","Subject","scheduled","filter","Boolean","doOnNext","v","requestAnimationFrame","onNext","getValue","Observable","merge","scan","_ref","_ref2","_ref4","oldVersion","oldDb","_ref3","newVersion","newDb","map","_ref5","_ref6","distinctUntilChanged","x","y","Dispatcher","Index","_immutable","Immutable","Map","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","aAtom","update","middlewares","compHandler","reverse","a","reduce","acc","eventId","handlerFn","arguments","Error","commandDispatcher","cmd$","version","sync","nextVersion","console","log","groupCollapsed","toJS","diff","immutablediff","forEach","df","groupEnd","slice","dflt","newValue","getIn","setIn","enrichHandler","afterHandler","rx","transform","ttransform","subj","dispose","shouldUpdateByDerefed","derefed","shouldUpdate","needUpdate","data","toUpdate","state","renderOrder","forceUpdate","sort","o1","o2","S4","Math","random","toString","substring","guid","createComponentObj","mixins","args","componentObj","concat","displayName","propsView","mixin","oldRender","component","React","createClass","createFactory","vectorView","apply","argv","StatelessMixin","SubscriptionMixin","_shouldupdate","pausable","shouldComponentUpdate","nextProps","nextState","getDisplayName","constructor","DerefedSubscription","aTransform","renderCycle","replay","ReplaySubject","disposable","CompositeDisposable","skip","subject","lastValue","derefSub","subVec","List","getInitialState","updateByProps","updateByState","aId","get","set","unsubscribe","componentWillUpdate","componentDidUpdate","_this","shouldDispose","item","componentWillUnmount","ignore","entries","keys","k","indexOf","every","nextValue","isPrimitive","isImmutable","maybeImmutable","Iterable","isIterable","type","_typeof","LISTENER_SENTINEL","listeners","self","slices","pathSlice","parentPath","parentRx","lastFragment","updateIn","old","subscription","oldSubscribe","Disposable","create","hasObservers","removeIn","utils","lcs","concatPath","escape","op","isMap","isIndexed","mapDiff","b","ops","is","areLists","lastKey","removeKey","aValue","aKey","has","sequenceDiff","bValue","areDifferentValues","bKey","count","lcsDiff","pathIndex","val","newVal","mapDiffs","primitiveTypeDiff","fromJS","computeLcsMatrix","xs","ys","n","size","makeMatrix","j","max","matrix","backtrackLcs","DiffResult","Record","ReplaceResult","printDiff","slashRe","RegExp","escapedSlashRe","tildeRe","escapedTildeRe","Path","str","replace","unescape","isKeyed","operation"],"mappings":"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","file":"reframe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"reframe\", [\"immutable\", \"rx\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reframe\"] = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse\n\t\troot[\"reframe\"] = factory(root[\"Immutable\"], root[\"Rx\"], root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_16__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"reframe\", [\"immutable\", \"rx\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reframe\"] = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse\n\t\troot[\"reframe\"] = factory(root[\"Immutable\"], root[\"Rx\"], root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_16__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/js/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _commands = __webpack_require__(7);\n\t\n\tvar commands = _interopRequireWildcard(_commands);\n\t\n\tvar _subs = __webpack_require__(3);\n\t\n\tvar subs = _interopRequireWildcard(_subs);\n\t\n\tvar _db = __webpack_require__(4);\n\t\n\tvar db = _interopRequireWildcard(_db);\n\t\n\tvar _atom = __webpack_require__(6);\n\t\n\tvar atom = _interopRequireWildcard(_atom);\n\t\n\tvar _react = __webpack_require__(9);\n\t\n\tvar react = _interopRequireWildcard(_react);\n\t\n\tvar _middleware = __webpack_require__(8);\n\t\n\tvar middleware = _interopRequireWildcard(_middleware);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tmodule.exports.registerHandler = commands.registerHandler;\n\tmodule.exports.dispatch = commands.dispatch;\n\tmodule.exports.dispatchSync = commands.dispatchSync;\n\tmodule.exports.registerSub = subs.registerSub;\n\tmodule.exports.subscribe = subs.subscribe;\n\tmodule.exports.indexPath = subs.indexPath;\n\tmodule.exports.db$ = db.db$;\n\tmodule.exports.viewP = react.viewP;\n\tmodule.exports.viewV = react.viewV;\n\tmodule.exports.viewSP = react.viewSP;\n\tmodule.exports.viewSV = react.viewSV;\n\tmodule.exports.view = react.viewSV;\n\tmodule.exports.deref = react.deref;\n\tmodule.exports.atom = atom.atom;\n\tmodule.exports.swap = atom.swap;\n\tmodule.exports.reset = atom.reset;\n\tmodule.exports.render = react.render;\n\tmodule.exports.pause$ = react.pause$;\n\tmodule.exports.compMiddleware = commands.compMiddleware;\n\t\n\t/*********************\n\t * Middleware\n\t *********************/\n\tmodule.exports.debug = middleware.debug;\n\tmodule.exports.trimv = middleware.trimv;\n\tmodule.exports.path = middleware.path;\n\tmodule.exports.enrich = middleware.enrich;\n\tmodule.exports.after = middleware.after;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.render$ = exports.sync$ = exports.animationFrame$ = undefined;\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.registerSub = registerSub;\n\texports.subscribe = subscribe;\n\texports.indexPath = indexPath;\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tvar _dispatcher = __webpack_require__(5);\n\t\n\tvar _subindex = __webpack_require__(11);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar animationFrame$ = exports.animationFrame$ = new Rx.BehaviorSubject();\n\tvar animationFrame$1 = new Rx.Subject();\n\tvar sync$ = exports.sync$ = new Rx.Subject();\n\tvar requestRender$ = new Rx.BehaviorSubject();\n\tvar render$ = exports.render$ = new Rx.Subject();\n\t\n\tvar scheduled = false;\n\tanimationFrame$.filter(Boolean).doOnNext(function (v) {\n\t    if (!scheduled) {\n\t        requestAnimationFrame(function () {\n\t            animationFrame$1.onNext(animationFrame$.getValue());\n\t            scheduled = false;\n\t        });\n\t        scheduled = true;\n\t    }\n\t}).subscribe();\n\t\n\tRx.Observable.merge(animationFrame$1, sync$).scan(function (_ref, _ref2) {\n\t    var _ref4 = _slicedToArray(_ref, 2);\n\t\n\t    var oldVersion = _ref4[0];\n\t    var oldDb = _ref4[1];\n\t\n\t    var _ref3 = _slicedToArray(_ref2, 2);\n\t\n\t    var newVersion = _ref3[0];\n\t    var newDb = _ref3[1];\n\t\n\t    if (newVersion > oldVersion) {\n\t        return [newVersion, newDb];\n\t    }\n\t    return [oldVersion, oldDb];\n\t}, [-1, null]).map(function (_ref5) {\n\t    var _ref6 = _slicedToArray(_ref5, 2);\n\t\n\t    var version = _ref6[0];\n\t    var db = _ref6[1];\n\t    return db;\n\t}).distinctUntilChanged(function (x) {\n\t    return x;\n\t}, function (x, y) {\n\t    return x === y;\n\t}).doOnNext(function (db) {\n\t    requestRender$.onNext(db);\n\t    render$.onNext(true);\n\t}).subscribe();\n\t\n\tvar subDispatcher = new _dispatcher.Dispatcher();\n\tfunction registerSub(name, handler) {\n\t    subDispatcher.register(name, handler);\n\t}\n\t\n\tfunction subscribe(cmd) {\n\t    var handler = subDispatcher.lookup(cmd[0]);\n\t    return handler(requestRender$, cmd);\n\t}\n\t\n\tvar index = new _subindex.Index(function () {\n\t    return requestRender$;\n\t});\n\tfunction indexPath(path, def) {\n\t    return index.sub(path, def);\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.db$ = undefined;\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tvar _immutable = __webpack_require__(1);\n\t\n\tvar Immutable = _interopRequireWildcard(_immutable);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar db$ = exports.db$ = new Rx.BehaviorSubject(Immutable.Map());\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Dispatcher = exports.Dispatcher = function () {\n\t    function Dispatcher() {\n\t        _classCallCheck(this, Dispatcher);\n\t\n\t        this.map = {};\n\t    }\n\t\n\t    _createClass(Dispatcher, [{\n\t        key: \"register\",\n\t        value: function register(name, handler) {\n\t            this.map[name] = handler;\n\t        }\n\t    }, {\n\t        key: \"lookup\",\n\t        value: function lookup(name) {\n\t            return this.map[name];\n\t        }\n\t    }]);\n\t\n\t    return Dispatcher;\n\t}();\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.atom = atom;\n\texports.swap = swap;\n\texports.reset = reset;\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction atom(value) {\n\t    return new Rx.BehaviorSubject(value);\n\t}\n\t\n\tfunction swap(aAtom, update) {\n\t    aAtom.onNext(update(aAtom.getValue()));\n\t}\n\t\n\tfunction reset(aAtom, value) {\n\t    aAtom.onNext(value);\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.compMiddleware = compMiddleware;\n\texports.registerHandler = registerHandler;\n\texports.dispatch = dispatch;\n\texports.dispatchSync = dispatchSync;\n\t\n\tvar _db = __webpack_require__(4);\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tvar _subs = __webpack_require__(3);\n\t\n\tvar _dispatcher = __webpack_require__(5);\n\t\n\tvar _immutable = __webpack_require__(1);\n\t\n\tvar Immutable = _interopRequireWildcard(_immutable);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar commandDispatcher = new _dispatcher.Dispatcher();\n\tvar cmd$ = new Rx.Subject();\n\t\n\tfunction compMiddleware(middlewares) {\n\t    return function (handler) {\n\t        var compHandler = middlewares.reverse().filter(function (a) {\n\t            return a;\n\t        }).reduce(function (acc, middleware) {\n\t            return middleware(acc);\n\t        }, handler);\n\t\n\t        return compHandler;\n\t    };\n\t}\n\t\n\tfunction registerHandler() {\n\t    var eventId = undefined,\n\t        middleware = undefined,\n\t        handlerFn = undefined;\n\t\n\t    switch (arguments.length) {\n\t        case 2:\n\t            eventId = arguments[0];\n\t            middleware = function middleware(handler) {\n\t                return handler;\n\t            };\n\t            handlerFn = arguments[1];\n\t            break;\n\t        case 3:\n\t            eventId = arguments[0];\n\t            middleware = Array.isArray(arguments[1]) ? compMiddleware(arguments[1]) : arguments[1];\n\t            handlerFn = arguments[2];\n\t            break;\n\t        default:\n\t            throw new Error('Expected 2 or 3 arguments, got ' + arguments.length);\n\t    }\n\t\n\t    commandDispatcher.register(eventId, middleware(handlerFn));\n\t}\n\t\n\tfunction dispatch(cmd) {\n\t    cmd$.onNext([false, cmd]);\n\t}\n\t\n\tfunction dispatchSync(cmd) {\n\t    cmd$.onNext([true, cmd]);\n\t}\n\t\n\tcmd$.scan(function (_ref, _ref2) {\n\t    var _ref4 = _slicedToArray(_ref, 2);\n\t\n\t    var version = _ref4[0];\n\t    var db = _ref4[1];\n\t\n\t    var _ref3 = _slicedToArray(_ref2, 2);\n\t\n\t    var sync = _ref3[0];\n\t    var cmd = _ref3[1];\n\t\n\t    var handler = commandDispatcher.lookup(cmd[0]);\n\t\n\t    var newDb = handler(db, cmd);\n\t\n\t    if (newDb !== db) {\n\t        _db.db$.onNext(newDb);\n\t        var nextVersion = version + 1;\n\t        if (sync) {\n\t            _subs.sync$.onNext([nextVersion, newDb]);\n\t        } else {\n\t            _subs.animationFrame$.onNext([nextVersion, newDb]);\n\t        }\n\t\n\t        return [nextVersion, newDb];\n\t    }\n\t    return [version, db];\n\t}, [0, Immutable.Map()]).subscribe();\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.debug = debug;\n\texports.trimv = trimv;\n\texports.path = path;\n\texports.enrich = enrich;\n\texports.after = after;\n\tvar immutablediff = __webpack_require__(12);\n\t\n\t/* eslint-disable no-console */\n\tfunction debug(handler) {\n\t    return function (db, cmd) {\n\t        console.log('-- New Event ----------------------------------------------------');\n\t        console.groupCollapsed('re-frame event: ', cmd.map(function (p) {\n\t            return p && p.toJS ? p.toJS() : p;\n\t        }));\n\t        var newDb = handler(db, cmd),\n\t            diff = immutablediff(db, newDb);\n\t        diff.forEach(function (df) {\n\t            return console.log(df.toJS());\n\t        });\n\t        console.groupEnd();\n\t        return newDb;\n\t    };\n\t}\n\t/* eslint-enable no-console */\n\t\n\tfunction trimv(handler) {\n\t    return function (db, cmd) {\n\t        return handler(db, cmd.slice(1));\n\t    };\n\t}\n\t\n\tfunction path(p, dflt) {\n\t    return function (handler) {\n\t        return function (db, cmd) {\n\t            var newValue = handler(db.getIn(p, dflt), cmd);\n\t            return db.setIn(p, newValue);\n\t        };\n\t    };\n\t}\n\t\n\tfunction enrich(enrichHandler) {\n\t    return function (handler) {\n\t        return function (db, cmd) {\n\t            var newDb = handler(db, cmd);\n\t            return enrichHandler(newDb, cmd, db);\n\t        };\n\t    };\n\t}\n\t\n\tfunction after(afterHandler) {\n\t    return function (handler) {\n\t        return function (db, cmd) {\n\t            var newDb = handler(db, cmd);\n\t            afterHandler(newDb, cmd, db);\n\t            return newDb;\n\t        };\n\t    };\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.SubscriptionMixin = exports.StatelessMixin = exports.pause$ = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.deref = deref;\n\texports.render = render;\n\texports.viewP = viewP;\n\texports.viewV = viewV;\n\texports.viewSP = viewSP;\n\texports.viewSV = viewSV;\n\t\n\tvar _subs = __webpack_require__(3);\n\t\n\tvar subs = _interopRequireWildcard(_subs);\n\t\n\tvar _react = __webpack_require__(16);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tvar _immutable = __webpack_require__(1);\n\t\n\tvar Immutable = _interopRequireWildcard(_immutable);\n\t\n\tvar _shouldupdate = __webpack_require__(10);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar pause$ = exports.pause$ = new Rx.BehaviorSubject(true);\n\t\n\tfunction deref(rx, transform) {\n\t    var ttransform = transform || function (a) {\n\t        return a;\n\t    };\n\t    var subj = new Rx.BehaviorSubject();\n\t    rx.map(ttransform).subscribe(subj).dispose();\n\t    return subj.getValue();\n\t}\n\t\n\tvar data = {\n\t    renderOrder: 0,\n\t    toUpdate: []\n\t};\n\t\n\tfunction shouldUpdateByDerefed(derefed) {\n\t    return derefed.map(function (derefed) {\n\t        return derefed.shouldUpdate();\n\t    }).reduce(function (acc, v) {\n\t        return acc || v;\n\t    }, false);\n\t}\n\t\n\tfunction needUpdate(obj) {\n\t    //console.log('Need update', obj.getDisplayName());\n\t    data.toUpdate.push([obj.state.renderOrder, function () {\n\t        if (shouldUpdateByDerefed(obj.state.derefed)) {\n\t            // console.log('Force update', obj.getDisplayName());\n\t            obj.forceUpdate();\n\t        }\n\t    }]);\n\t}\n\t\n\tfunction render() {\n\t    data.toUpdate.sort(function (_ref, _ref2) {\n\t        var _ref4 = _slicedToArray(_ref, 1);\n\t\n\t        var o1 = _ref4[0];\n\t\n\t        var _ref3 = _slicedToArray(_ref2, 1);\n\t\n\t        var o2 = _ref3[0];\n\t        return o1 - o2;\n\t    });\n\t\n\t    data.toUpdate.forEach(function (_ref5) {\n\t        var _ref6 = _slicedToArray(_ref5, 2);\n\t\n\t        var _ = _ref6[0];\n\t        var forceUpdate = _ref6[1];\n\t        return forceUpdate();\n\t    });\n\t    data.toUpdate = [];\n\t}\n\tsubs.render$.pausable(pause$).subscribe(render);\n\t\n\tvar StatelessMixin = exports.StatelessMixin = {\n\t    shouldComponentUpdate: function shouldComponentUpdate(nextProps, nextState) {\n\t        return (0, _shouldupdate.shouldUpdate)(this.props, nextProps, ['argv']) || (0, _shouldupdate.shouldUpdate)(this.state, nextState) || (0, _shouldupdate.shouldUpdate)(this.props.argv, nextProps.argv);\n\t    },\n\t    getDisplayName: function getDisplayName() {\n\t        return this.constructor.displayName;\n\t    }\n\t};\n\t\n\tvar DerefedSubscription = function () {\n\t    function DerefedSubscription(view, rx, aTransform, renderCycle) {\n\t        _classCallCheck(this, DerefedSubscription);\n\t\n\t        var transform = aTransform || function (a) {\n\t            return a;\n\t        },\n\t            replay = new Rx.ReplaySubject(1),\n\t            subj = new Rx.BehaviorSubject();\n\t        var disposable = new Rx.CompositeDisposable(rx.distinctUntilChanged(function (x) {\n\t            return x;\n\t        }, function (x, y) {\n\t            return x === y;\n\t        }).map(transform).subscribe(replay), replay.subscribe(subj), replay.skip(1).subscribe(function () {\n\t            needUpdate(view);\n\t        }));\n\t\n\t        this.disposable = disposable;\n\t        this.subject = subj;\n\t        this.renderCycle = null;\n\t    }\n\t\n\t    _createClass(DerefedSubscription, [{\n\t        key: 'getValue',\n\t        value: function getValue(renderCycle) {\n\t            this.renderCycle = renderCycle;\n\t            this.lastValue = this.subject.getValue();\n\t            return this.lastValue;\n\t        }\n\t    }, {\n\t        key: 'dispose',\n\t        value: function dispose() {\n\t            this.disposable.dispose();\n\t        }\n\t    }, {\n\t        key: 'shouldDispose',\n\t        value: function shouldDispose(renderCycle) {\n\t            return renderCycle > this.renderCycle;\n\t        }\n\t    }, {\n\t        key: 'shouldUpdate',\n\t        value: function shouldUpdate() {\n\t            return this.lastValue !== this.subject.getValue();\n\t        }\n\t    }]);\n\t\n\t    return DerefedSubscription;\n\t}();\n\t\n\tfunction S4() {\n\t    return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n\t};\n\t\n\t// Generate a pseudo-GUID by concatenating random hexadecimal.\n\tfunction guid() {\n\t    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n\t};\n\t\n\tvar SubscriptionMixin = exports.SubscriptionMixin = {\n\t    derefSub: function derefSub(subVec, transform) {\n\t        return this.deref(subs.subscribe(subVec), transform, Immutable.List(subVec));\n\t    },\n\t\n\t    getDisplayName: function getDisplayName() {\n\t        return this.constructor.displayName;\n\t    },\n\t    getInitialState: function getInitialState() {\n\t        return {\n\t            derefed: Immutable.Map(),\n\t            renderOrder: data.renderOrder++,\n\t            renderCycle: 0\n\t        };\n\t    },\n\t    shouldComponentUpdate: function shouldComponentUpdate(nextProps, nextState) {\n\t        var updateByProps = (0, _shouldupdate.shouldUpdate)(this.props, nextProps, ['argv']) || (0, _shouldupdate.shouldUpdate)(this.props.argv, nextProps.argv),\n\t            updateByState = (0, _shouldupdate.shouldUpdate)(this.state, nextState, ['derefed', 'renderOrder', 'renderCycle']);\n\t\n\t        return updateByProps || updateByState;\n\t    },\n\t    deref: function deref(rx, aTransform, aId) {\n\t        var id = aId || guid();\n\t        if (this.state.derefed.get(id)) {\n\t            return this.state.derefed.get(id).getValue(this.state.renderCycle);\n\t        }\n\t        var derefed = new DerefedSubscription(this, rx, aTransform);\n\t\n\t        this.state.derefed = this.state.derefed.set(id, derefed);\n\t\n\t        return derefed.getValue(this.state.renderCycle);\n\t    },\n\t    unsubscribe: function unsubscribe() {\n\t        this.state.derefed.forEach(function (derefed) {\n\t            derefed.dispose();\n\t        });\n\t\n\t        this.state.derefed = Immutable.Map();\n\t    },\n\t    componentWillUpdate: function componentWillUpdate() {\n\t        // console.log('Rendering', this.getDisplayName());\n\t        this.state.renderCycle++;\n\t        //this.unsubscribe();\n\t    },\n\t    componentDidUpdate: function componentDidUpdate() {\n\t        var _this = this;\n\t\n\t        this.state.derefed.filter(function (derefed) {\n\t            return derefed.shouldDispose(_this.state.renderCycle);\n\t        }).forEach(function (item) {\n\t            return item.dispose();\n\t        });\n\t\n\t        this.state.derefed = this.state.derefed.filter(function (derefed) {\n\t            return !derefed.shouldDispose(_this.state.renderCycle);\n\t        });\n\t    },\n\t    componentWillUnmount: function componentWillUnmount() {\n\t        this.unsubscribe();\n\t    }\n\t};\n\t\n\tfunction createComponentObj(mixins, args) {\n\t    var componentObj = undefined;\n\t    switch (args.length) {\n\t        case 2:\n\t            if (typeof args[1].prototype === 'undefined') {\n\t                args[1].mixins = mixins;\n\t                componentObj = args[1];\n\t            } else {\n\t                componentObj = {\n\t                    mixins: mixins,\n\t                    render: args[1]\n\t                };\n\t            }\n\t            break;\n\t        case 3:\n\t            if (typeof args[2].prototype === 'undefined') {\n\t                // it's an object\n\t                args[2].mixins = mixins.concat(args[1]);\n\t                componentObj = args[2];\n\t            } else {\n\t                // it's a render function\n\t                componentObj = {\n\t                    mixins: mixins.concat(args[1]),\n\t                    render: args[2]\n\t                };\n\t            }\n\t            break;\n\t        default:\n\t            throw new Error('Expected 2 or 3 arguments, got ' + args.length);\n\t    }\n\t    componentObj.displayName = args[0];\n\t    return componentObj;\n\t}\n\t\n\tfunction propsView(mixin, args) {\n\t    var componentObj = createComponentObj(mixin, args);\n\t    var oldRender = componentObj.render;\n\t    componentObj.render = function () {\n\t        return oldRender.call(this, this.props);\n\t    };\n\t\n\t    var component = React.createClass(componentObj);\n\t\n\t    return React.createFactory(component);\n\t}\n\t\n\tfunction vectorView(mixin, args) {\n\t    var componentObj = createComponentObj(mixin, args);\n\t    var oldRender = componentObj.render;\n\t    componentObj.render = function () {\n\t        return oldRender.apply(this, this.props.argv);\n\t    };\n\t    var component = React.createClass(componentObj);\n\t    var factory = React.createFactory(component);\n\t\n\t    return function () {\n\t        return factory({ argv: Array.prototype.slice.call(arguments) });\n\t    };\n\t}\n\t\n\tfunction viewP() {\n\t    return propsView([StatelessMixin], arguments);\n\t}\n\t\n\tfunction viewV() {\n\t    return vectorView([StatelessMixin], arguments);\n\t}\n\t\n\tfunction viewSP() {\n\t    return propsView([SubscriptionMixin], arguments);\n\t}\n\t\n\tfunction viewSV() {\n\t    return vectorView([SubscriptionMixin], arguments);\n\t}\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.shouldUpdate = shouldUpdate;\n\t\n\tvar _immutable = __webpack_require__(1);\n\t\n\tvar Immutable = _interopRequireWildcard(_immutable);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\t/**\n\t * If props does not exist return false - Pure render mixin. If props exists and it contains mutable entries,\n\t * return false. If props contains only immutable entries compare them by type.\n\t *\n\t * @param {object} props current props\n\t * @param {object} nextProps new props\n\t * @param {array} ignore ignore these keys\n\t * @returns {boolean} true if component should be rerendered\n\t */\n\tfunction shouldUpdate(props, nextProps, ignore) {\n\t    var entries = undefined;\n\t    if (nextProps === props || nextProps.length !== props.length) {\n\t        return false;\n\t    }\n\t    if (ignore && ignore.length > 0) {\n\t        entries = Object.keys(props).filter(function (k) {\n\t            return ignore.indexOf(k) === -1;\n\t        }).map(function (k) {\n\t            return [props[k], nextProps[k]];\n\t        });\n\t    } else {\n\t        entries = Object.keys(props).map(function (k) {\n\t            return [props[k], nextProps[k]];\n\t        });\n\t    }\n\t\n\t    if (entries.length) {\n\t        return !entries.every(function (_ref) {\n\t            var _ref2 = _slicedToArray(_ref, 2);\n\t\n\t            var value = _ref2[0];\n\t            var nextValue = _ref2[1];\n\t\n\t            if (isPrimitive(value) && isPrimitive(nextValue) || isImmutable(value) && isImmutable(nextValue)) {\n\t\n\t                return value === nextValue;\n\t            }\n\t            return false;\n\t        });\n\t    }\n\t    return false;\n\t}\n\tfunction isImmutable(maybeImmutable) {\n\t    return Immutable.Iterable.isIterable(maybeImmutable);\n\t}\n\t\n\tfunction isPrimitive(value) {\n\t    var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t    return type === 'number' || type === 'boolean' || type === 'string' || value === null || value === void 0;\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Index = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _immutable = __webpack_require__(1);\n\t\n\tvar Immutable = _interopRequireWildcard(_immutable);\n\t\n\tvar _rx = __webpack_require__(2);\n\t\n\tvar Rx = _interopRequireWildcard(_rx);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar LISTENER_SENTINEL = {};\n\t\n\tvar Index = exports.Index = function () {\n\t    function Index(rx) {\n\t        _classCallCheck(this, Index);\n\t\n\t        this.listeners = Immutable.Map();\n\t        this.rx = rx;\n\t    }\n\t\n\t    _createClass(Index, [{\n\t        key: 'sub',\n\t        value: function sub(path, def) {\n\t            var _this = this;\n\t\n\t            var self = this;\n\t\n\t            var slices = [];\n\t            for (var i = 0; i < path.length; i++) {\n\t                slices.push(Array.prototype.slice.call(path.slice(0, i + 1)));\n\t            }\n\t            this.listeners = slices.reduce(function (acc, pathSlice) {\n\t                var parentPath = pathSlice.slice(0, pathSlice.length - 1);\n\t                var parentRx = parentPath.length === 0 ? _this.rx() : acc.getIn(parentPath.concat(LISTENER_SENTINEL));\n\t                var lastFragment = pathSlice[pathSlice.length - 1];\n\t                return acc.updateIn(pathSlice.concat(LISTENER_SENTINEL), function (old) {\n\t                    if (old) {\n\t                        return old;\n\t                    }\n\t                    var subject = new Rx.ReplaySubject(1),\n\t                        subscription = parentRx.map(function (a) {\n\t                        if (a && a.get) {\n\t                            return a.get(lastFragment);\n\t                        }\n\t                    }).distinctUntilChanged(function (x) {\n\t                        return x;\n\t                    }, function (x, y) {\n\t                        return x === y;\n\t                    })\n\t                    //.doOnNext(v => console.log('v', v.toJS()))\n\t                    .subscribe(subject);\n\t                    var oldSubscribe = subject.subscribe;\n\t                    subject.subscribe = function () {\n\t                        var sub = oldSubscribe.apply(this, arguments);\n\t\n\t                        return Rx.Disposable.create(function () {\n\t                            sub.dispose();\n\t                            if (!subject.hasObservers()) {\n\t                                subscription.dispose();\n\t                                self.listeners = self.listeners.removeIn(pathSlice);\n\t                            }\n\t                        });\n\t                    };\n\t                    return subject;\n\t                });\n\t            }, this.listeners);\n\t\n\t            return this.listeners.getIn(path.concat([LISTENER_SENTINEL])).map(function (a) {\n\t                return typeof a !== 'undefined' ? a : def;\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Index;\n\t}();\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Immutable = __webpack_require__(1);\n\tvar utils = __webpack_require__(15);\n\tvar lcs = __webpack_require__(13);\n\tvar path = __webpack_require__(14);\n\tvar concatPath = path.concat,\n\t                  escape = path.escape,\n\t                  op = utils.op,\n\t                  isMap = utils.isMap,\n\t                  isIndexed = utils.isIndexed;\n\t\n\tvar mapDiff = function(a, b, p){\n\t  var ops = [];\n\t  var path = p || '';\n\t\n\t  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n\t\n\t  var areLists = isIndexed(a) && isIndexed(b);\n\t  var lastKey = null;\n\t  var removeKey = null\n\t\n\t  if(a.forEach){\n\t    a.forEach(function(aValue, aKey){\n\t      if(b.has(aKey)){\n\t        if(isMap(aValue) && isMap(b.get(aKey))){\n\t          ops = ops.concat(mapDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n\t        }\n\t        else if(isIndexed(b.get(aKey)) && isIndexed(aValue)){\n\t          ops = ops.concat(sequenceDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n\t        }\n\t        else {\n\t          var bValue = b.get ? b.get(aKey) : b;\n\t          var areDifferentValues = (aValue !== bValue);\n\t          if (areDifferentValues) {\n\t            ops.push(op('replace', concatPath(path, escape(aKey)), bValue));\n\t          }\n\t        }\n\t      }\n\t      else {\n\t        if(areLists){\n\t          removeKey = (lastKey != null && (lastKey+1) === aKey) ? removeKey : aKey;\n\t          ops.push( op('remove', concatPath(path, escape(removeKey))) );\n\t          lastKey = aKey;\n\t        }\n\t        else{\n\t          ops.push( op('remove', concatPath(path, escape(aKey))) );\n\t        }\n\t        \n\t      }\n\t    });\n\t  }\n\t\n\t  b.forEach(function(bValue, bKey){\n\t    if(a.has && !a.has(bKey)){\n\t      ops.push( op('add', concatPath(path, escape(bKey)), bValue) );\n\t    }\n\t  });\n\t\n\t  return ops;\n\t};\n\t\n\tvar sequenceDiff = function (a, b, p) {\n\t  var ops = [];\n\t  var path = p || '';\n\t  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n\t  if(b.count() > 100) { return mapDiff(a, b, p); }\n\t\n\t  var lcsDiff = lcs.diff(a, b);\n\t\n\t  var pathIndex = 0;\n\t\n\t  lcsDiff.forEach(function (diff) {\n\t    if(diff.op === '='){ pathIndex++; }\n\t    else if(diff.op === '!='){\n\t      if(isMap(diff.val) && isMap(diff.newVal)){\n\t        var mapDiffs = mapDiff(diff.val, diff.newVal, concatPath(path, pathIndex));\n\t        ops = ops.concat(mapDiffs);\n\t      }\n\t      else{\n\t        ops.push(op('replace', concatPath(path, pathIndex), diff.newVal));\n\t      }\n\t      pathIndex++;\n\t    }\n\t    else if(diff.op === '+'){\n\t      ops.push(op('add', concatPath(path, pathIndex), diff.val));\n\t      pathIndex++;\n\t    }\n\t    else if(diff.op === '-'){ ops.push(op('remove', concatPath(path, pathIndex))); }\n\t  });\n\t\n\t  return ops;\n\t};\n\t\n\tvar primitiveTypeDiff = function (a, b, p) {\n\t  var path = p || '';\n\t  if(a === b){ return []; }\n\t  else{\n\t    return [ op('replace', concatPath(path, ''), b) ];\n\t  }\n\t};\n\t\n\tvar diff = function(a, b, p){\n\t  if(a != b && (a == null || b == null)){ return Immutable.fromJS([op('replace', '/', b)]); }\n\t  if(isIndexed(a) && isIndexed(b)){\n\t    return Immutable.fromJS(sequenceDiff(a, b));\n\t  }\n\t  else if(isMap(a) && isMap(b)){\n\t    return Immutable.fromJS(mapDiff(a, b));\n\t  }\n\t  else{\n\t    return Immutable.fromJS(primitiveTypeDiff(a, b, p));\n\t  }\n\t};\n\t\n\tmodule.exports = diff;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Immutable = __webpack_require__(1);\n\t\n\t/**\n\t * Returns a two-dimensional array (an array of arrays) with dimensions n by m.\n\t * All the elements of this new matrix are initially equal to x\n\t * @param n number of rows\n\t * @param m number of columns\n\t * @param x initial element for every item in matrix\n\t */\n\tvar makeMatrix = function(n, m, x){\n\t  var matrix = [];\n\t  for(var i = 0; i < n; i++) {\n\t    matrix[i] = new Array(m);\n\t\n\t    if(x != null){\n\t      for(var j = 0; j < m; j++){\n\t        matrix[i][j] = x;\n\t      }\n\t    }\n\t  }\n\t\n\t  return matrix;\n\t};\n\t\n\t/**\n\t * Computes Longest Common Subsequence between two Immutable.JS Indexed Iterables\n\t * Based on Dynamic Programming http://rosettacode.org/wiki/Longest_common_subsequence#Java\n\t * @param xs ImmutableJS Indexed Sequence 1\n\t * @param ys ImmutableJS Indexed Sequence 2\n\t */\n\tvar lcs = function(xs, ys){\n\t  var matrix = computeLcsMatrix(xs, ys);\n\t\n\t  return backtrackLcs(xs, ys, matrix);\n\t};\n\t\n\tvar DiffResult = Immutable.Record({op: '=', val: null});\n\tvar ReplaceResult = Immutable.Record({op: '!=', val: null, newVal: null});\n\t\n\t/**\n\t * Returns the resulting diff operations of LCS between two sequences\n\t * @param xs Indexed Sequence 1\n\t * @param ys Indexed Sequence 2\n\t * @returns Array of DiffResult {op:'=' | '+' | '-', val:any}\n\t */\n\tvar diff = function(xs, ys){\n\t  var matrix = computeLcsMatrix(xs, ys);\n\t\n\t  return printDiff(matrix, xs, ys, xs.size||0, ys.size||0);\n\t};\n\t\n\tvar printDiff = function(matrix, xs, ys, i, j) {\n\t  if(i === 0 && j === 0) { return []; }\n\t  if (i > 0 && j > 0 && Immutable.is(xs.get(i-1), ys.get(j-1))) {\n\t    return printDiff(matrix, xs, ys, i - 1, j - 1).concat(new DiffResult({\n\t      op: '=',\n\t      val: xs.get(i - 1)\n\t    }));\n\t  }\n\t  else if (i > 0 && j > 0 && i === j && !Immutable.is(xs.get(i-1), ys.get(j-1))) {\n\t    return printDiff(matrix, xs, ys, i - 1, j - 1).concat(new ReplaceResult({\n\t      val: xs.get(i - 1),\n\t      newVal: ys.get(i - 1)\n\t    }));\n\t  }\n\t  else {\n\t    if (j > 0 && (i === 0 || matrix[i][j - 1] >= matrix[i - 1][j])) {\n\t      return printDiff(matrix, xs, ys, i, j - 1).concat(new DiffResult({\n\t        op: '+',\n\t        val: ys.get(j - 1)\n\t      }));\n\t    }\n\t    else if (i > 0 && (j === 0 || matrix[i][j - 1] < matrix[i - 1][j])) {\n\t      return printDiff(matrix, xs, ys, i - 1, j).concat(new DiffResult({\n\t        op: '-',\n\t        val: xs.get(i - 1)\n\t      }));\n\t    }\n\t  }\n\t};\n\t\n\t/**\n\t * Computes the Longest Common Subsequence table\n\t * @param xs Indexed Sequence 1\n\t * @param ys Indexed Sequence 2\n\t */\n\tfunction computeLcsMatrix(xs, ys) {\n\t  var n = xs.size||0;\n\t  var m = ys.size||0;\n\t  var a = makeMatrix(n + 1, m + 1, 0);\n\t\n\t  for (var i = 0; i < n; i++) {\n\t    for (var j = 0; j < m; j++) {\n\t      if (Immutable.is(xs.get(i), ys.get(j))) {\n\t        a[i + 1][j + 1] = a[i][j] + 1;\n\t      }\n\t      else {\n\t        a[i + 1][j + 1] = Math.max(a[i + 1][j], a[i][j + 1]);\n\t      }\n\t    }\n\t  }\n\t\n\t  return a;\n\t}\n\t\n\t/**\n\t * Extracts a LCS from matrix M\n\t * @param xs Indexed Sequence 1\n\t * @param ys Indexed Sequence 2\n\t * @param matrix LCS Matrix\n\t * @returns {Array.<T>} Longest Common Subsequence\n\t */\n\tvar backtrackLcs = function(xs, ys, matrix){\n\t  var lcs = [];\n\t  for(var i = xs.size, j = ys.size; i !== 0 && j !== 0;){\n\t    if (matrix[i][j] === matrix[i-1][j]){ i--; }\n\t    else if (matrix[i][j] === matrix[i][j-1]){ j--; }\n\t    else{\n\t      if(Immutable.is(xs.get(i-1), ys.get(j-1))){\n\t        lcs.push(xs.get(i-1));\n\t        i--;\n\t        j--;\n\t      }\n\t    }\n\t  }\n\t  return lcs.reverse();\n\t};\n\t\n\tmodule.exports = {\n\t  lcs: lcs,\n\t  computeLcsMatrix: computeLcsMatrix,\n\t  diff: diff\n\t};\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar slashRe = new RegExp('/', 'g');\n\tvar escapedSlashRe = new RegExp('~1', 'g');\n\tvar tildeRe = /~/g;\n\tvar escapedTildeRe = /~0/g;\n\t\n\tvar Path = {\n\t  escape: function (str) {\n\t    if(typeof(str) === 'number'){\n\t      return str.toString();\n\t    }\n\t    if(typeof(str) !== 'string'){\n\t      throw 'param str (' + str + ') is not a string';\n\t    }\n\t\n\t    return str.replace(tildeRe, '~0').replace(slashRe, '~1');\n\t  },\n\t\n\t  unescape: function (str) {\n\t    if(typeof(str) == 'string') {\n\t      return str.replace(escapedSlashRe, '/').replace(escapedTildeRe, '~');\n\t    }\n\t    else {\n\t      return str;\n\t    }\n\t  },\n\t  concat: function(path, key){\n\t    return path + '/' + key;\n\t  }\n\t};\n\t\n\tmodule.exports = Path;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Immutable = __webpack_require__(1);\n\t\n\tvar isMap = function(obj){ return Immutable.Iterable.isKeyed(obj); };\n\tvar isIndexed = function(obj) { return Immutable.Iterable.isIndexed(obj); };\n\t\n\tvar op = function(operation, path, value){\n\t  if(operation === 'remove') { return { op: operation, path: path }; }\n\t\n\t  return { op: operation, path: path, value: value };\n\t};\n\t\n\tmodule.exports = {\n\t  isMap: isMap,\n\t  isIndexed: isIndexed,\n\t  op: op\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** reframe.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 87034f38f87787b2dee0\n **/","'use strict';\nimport * as commands from 'reframe/commands';\nimport * as subs from 'reframe/subs';\nimport * as db from 'reframe/db';\nimport * as atom from 'reframe/atom';\nimport * as react from 'reframe/react';\nimport * as middleware from 'reframe/middleware';\n\nmodule.exports.registerHandler = commands.registerHandler;\nmodule.exports.dispatch = commands.dispatch;\nmodule.exports.dispatchSync = commands.dispatchSync;\nmodule.exports.registerSub = subs.registerSub;\nmodule.exports.subscribe = subs.subscribe;\nmodule.exports.indexPath = subs.indexPath;\nmodule.exports.db$ = db.db$;\nmodule.exports.viewP = react.viewP;\nmodule.exports.viewV = react.viewV;\nmodule.exports.viewSP = react.viewSP;\nmodule.exports.viewSV = react.viewSV;\nmodule.exports.view = react.viewSV;\nmodule.exports.deref = react.deref;\nmodule.exports.atom = atom.atom;\nmodule.exports.swap = atom.swap;\nmodule.exports.reset = atom.reset;\nmodule.exports.render = react.render;\nmodule.exports.pause$ = react.pause$;\nmodule.exports.compMiddleware = commands.compMiddleware;\n\n/*********************\n * Middleware\n *********************/\nmodule.exports.debug = middleware.debug;\nmodule.exports.trimv = middleware.trimv;\nmodule.exports.path = middleware.path;\nmodule.exports.enrich = middleware.enrich;\nmodule.exports.after = middleware.after;\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/core.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"immutable\",\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"root\":\"Immutable\"}\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"rx\",\"commonjs\":\"rx\",\"commonjs2\":\"rx\",\"root\":\"Rx\"}\n ** module id = 2\n ** module chunks = 0\n **/","import * as Rx from 'rx';\nimport {Dispatcher} from 'reframe/dispatcher.js';\nimport {Index} from 'reframe/subindex.js';\n\nexport const animationFrame$ = new Rx.BehaviorSubject();\nconst animationFrame$1 = new Rx.Subject();\nexport const sync$ = new Rx.Subject();\nconst requestRender$ = new Rx.BehaviorSubject();\nexport const render$ = new Rx.Subject();\n\nvar scheduled = false;\nanimationFrame$\n    .filter(Boolean)\n    .doOnNext(v => {\n    if (!scheduled) {\n        requestAnimationFrame(() => {\n            animationFrame$1.onNext(animationFrame$.getValue());\n            scheduled = false;\n        });\n        scheduled = true;\n    }\n}).subscribe();\n\nRx.Observable\n    .merge(animationFrame$1, sync$)\n    .scan(([oldVersion, oldDb], [newVersion, newDb])=> {\n        if (newVersion > oldVersion) {\n            return [newVersion, newDb];\n        }\n        return [oldVersion, oldDb]\n    }, [-1, null])\n    .map(([version, db]) => db)\n    .distinctUntilChanged(x => x, (x, y) => x === y)\n    .doOnNext(db => {\n        requestRender$.onNext(db);\n        render$.onNext(true);\n    })\n    .subscribe();\n\nconst subDispatcher = new Dispatcher();\nexport function registerSub(name, handler) {\n    subDispatcher.register(name, handler);\n}\n\nexport function subscribe(cmd) {\n    const handler = subDispatcher.lookup(cmd[0]);\n    return handler(requestRender$, cmd);\n}\n\nlet index = new Index(()=>requestRender$);\nexport function indexPath(path, def) {\n    return index.sub(path, def);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/subs.js\n **/","import * as Rx from 'rx';\nimport * as Immutable from 'immutable';\nexport const db$ = new Rx.BehaviorSubject(Immutable.Map());\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/db.js\n **/","export class Dispatcher {\n    constructor() {\n        this.map = {};\n    }\n\n    register(name, handler) {\n        this.map[name] = handler;\n    }\n\n    lookup(name) {\n        return this.map[name];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/dispatcher.js\n **/","'use strict';\nimport * as Rx from 'rx';\n\nexport function atom(value) {\n    return new Rx.BehaviorSubject(value);\n}\n\nexport function swap(aAtom, update) {\n    aAtom.onNext(update(aAtom.getValue()));\n}\n\nexport function reset(aAtom, value) {\n    aAtom.onNext(value);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/atom.js\n **/","'use strict';\n\nimport {db$} from 'reframe/db.js';\nimport * as Rx from 'rx';\nimport {animationFrame$, sync$} from 'reframe/subs.js';\nimport {Dispatcher} from 'reframe/dispatcher.js';\nimport * as Immutable from 'immutable';\n\nconst commandDispatcher = new Dispatcher();\nconst cmd$ = new Rx.Subject();\n\nexport function compMiddleware(middlewares) {\n    return handler => {\n        let compHandler = middlewares.reverse().filter(a => a).reduce(\n            (acc, middleware) => middleware(acc),\n            handler\n        );\n\n        return compHandler;\n    };\n}\n\nexport function registerHandler() {\n    let eventId, middleware, handlerFn;\n\n    switch (arguments.length) {\n        case 2:\n            eventId = arguments[0];\n            middleware = handler => handler;\n            handlerFn = arguments[1];\n            break;\n        case 3:\n            eventId = arguments[0];\n            middleware = Array.isArray(arguments[1]) ? compMiddleware(arguments[1]) : arguments[1];\n            handlerFn = arguments[2];\n            break;\n        default:\n            throw new Error('Expected 2 or 3 arguments, got ' + arguments.length);\n    }\n\n    commandDispatcher.register(eventId, middleware(handlerFn));\n}\n\nexport function dispatch(cmd) {\n    cmd$.onNext([false, cmd]);\n}\n\nexport function dispatchSync(cmd) {\n    cmd$.onNext([true, cmd]);\n}\n\ncmd$\n    .scan(\n        ([version, db], [sync, cmd]) => {\n            const handler = commandDispatcher.lookup(cmd[0]);\n\n            const newDb = handler(db, cmd);\n\n            if (newDb !== db) {\n                db$.onNext(newDb);\n                const nextVersion = version + 1;\n                if (sync) {\n                    sync$.onNext([nextVersion, newDb]);\n                } else {\n                    animationFrame$.onNext([nextVersion, newDb]);\n                }\n\n                return [nextVersion, newDb];\n            }\n            return [version, db];\n        },\n        [0, Immutable.Map()]\n    )\n    .subscribe();\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/commands.js\n **/","'use strict';\n\nconst immutablediff = require('immutablediff');\n\n/* eslint-disable no-console */\nexport function debug(handler) {\n    return (db, cmd) => {\n        console.log('-- New Event ----------------------------------------------------');\n        console.groupCollapsed('re-frame event: ', cmd.map(p => p && p.toJS ? p.toJS() : p));\n        let newDb = handler(db, cmd),\n            diff = immutablediff(db, newDb);\n        diff.forEach(df => console.log(df.toJS()));\n        console.groupEnd();\n        return newDb;\n    };\n}\n/* eslint-enable no-console */\n\nexport function trimv(handler) {\n    return (db, cmd) => handler(db, cmd.slice(1));\n}\n\nexport function path(p, dflt) {\n    return handler => (db, cmd) => {\n        let newValue = handler(db.getIn(p, dflt), cmd);\n        return db.setIn(p, newValue);\n    };\n}\n\nexport function enrich(enrichHandler) {\n    return handler => (db, cmd) => {\n        let newDb = handler(db, cmd);\n        return enrichHandler(newDb, cmd, db);\n    };\n}\n\nexport function after(afterHandler) {\n    return handler => (db, cmd) => {\n        let newDb = handler(db, cmd);\n        afterHandler(newDb, cmd, db);\n        return newDb;\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/middleware.js\n **/","'use strict';\n\nimport * as subs from 'reframe/subs.js';\nimport * as React from 'react';\nimport * as Rx from 'rx';\nimport * as Immutable from 'immutable';\nimport {shouldUpdate} from 'reframe/shouldupdate';\n\nexport const pause$ = new Rx.BehaviorSubject(true);\n\nexport function deref(rx, transform) {\n    let ttransform = transform || (a=>a);\n    let subj = new Rx.BehaviorSubject();\n    rx.map(ttransform).subscribe(subj).dispose();\n    return subj.getValue();\n}\n\nlet data = {\n    renderOrder: 0,\n    toUpdate: []\n};\n\nfunction shouldUpdateByDerefed(derefed) {\n    return derefed\n        .map(derefed=> {\n            return derefed.shouldUpdate();\n        })\n        .reduce((acc, v) => acc || v, false);\n}\n\nfunction needUpdate(obj) {\n    //console.log('Need update', obj.getDisplayName());\n    data.toUpdate.push([obj.state.renderOrder, ()=> {\n        if (shouldUpdateByDerefed(obj.state.derefed)) {\n            // console.log('Force update', obj.getDisplayName());\n            obj.forceUpdate();\n        }\n    }]);\n}\n\nexport function render() {\n    data.toUpdate.sort(([o1], [o2]) => o1 - o2);\n\n    data.toUpdate.forEach(([_, forceUpdate]) => forceUpdate());\n    data.toUpdate = [];\n}\nsubs.render$\n    .pausable(pause$)\n    .subscribe(render);\n\nexport let StatelessMixin = {\n    shouldComponentUpdate: function (nextProps, nextState) {\n        return shouldUpdate(this.props, nextProps, ['argv']) || shouldUpdate(this.state, nextState) || shouldUpdate(this.props.argv, nextProps.argv);\n    },\n    getDisplayName: function () {\n        return this.constructor.displayName;\n    }\n};\n\nclass DerefedSubscription {\n    constructor(view, rx, aTransform, renderCycle) {\n        let transform = aTransform || (a=>a),\n            replay = new Rx.ReplaySubject(1),\n            subj = new Rx.BehaviorSubject();\n        let disposable = new Rx.CompositeDisposable(\n            rx\n                .distinctUntilChanged(x=>x, (x, y) => x === y)\n                .map(transform)\n                .subscribe(replay),\n            replay\n                .subscribe(subj),\n            replay\n                .skip(1)\n                .subscribe(() => {\n                    needUpdate(view);\n                }));\n\n        this.disposable = disposable;\n        this.subject = subj;\n        this.renderCycle = null;\n    }\n    getValue(renderCycle) {\n        this.renderCycle = renderCycle;\n        this.lastValue = this.subject.getValue();\n        return this.lastValue;\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n    shouldDispose(renderCycle) {\n        return renderCycle > this.renderCycle;\n    }\n    shouldUpdate() {\n        return this.lastValue  !== this.subject.getValue();\n    }\n}\n\nfunction S4() {\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n};\n\n// Generate a pseudo-GUID by concatenating random hexadecimal.\nfunction guid() {\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n};\n\nexport let SubscriptionMixin = {\n    derefSub(subVec, transform) {\n        return this.deref(subs.subscribe(subVec), transform, Immutable.List(subVec));\n    },\n    getDisplayName: function () {\n        return this.constructor.displayName;\n    },\n    getInitialState: function () {\n        return {\n            derefed: Immutable.Map(),\n            renderOrder: data.renderOrder++,\n            renderCycle: 0\n        };\n    },\n    shouldComponentUpdate: function (nextProps, nextState) {\n        let updateByProps = shouldUpdate(this.props, nextProps, ['argv']) || shouldUpdate(this.props.argv, nextProps.argv),\n            updateByState = shouldUpdate(this.state, nextState, ['derefed', 'renderOrder', 'renderCycle']);\n\n        return updateByProps || updateByState;\n    },\n    deref: function (rx, aTransform, aId) {\n        const id = aId || guid();\n        if (this.state.derefed.get(id)) {\n            return this.state.derefed.get(id).getValue(this.state.renderCycle);\n        }\n        const derefed = new DerefedSubscription(this, rx, aTransform);\n\n        this.state.derefed = this.state.derefed.set(id, derefed);\n\n        return derefed.getValue(this.state.renderCycle);\n    },\n    unsubscribe: function () {\n        this.state.derefed.forEach(derefed => {\n            derefed.dispose();\n        });\n\n        this.state.derefed = Immutable.Map();\n    },\n    componentWillUpdate: function () {\n        // console.log('Rendering', this.getDisplayName());\n        this.state.renderCycle++;\n        //this.unsubscribe();\n    },\n    componentDidUpdate: function() {\n        this.state.derefed.filter(derefed => {\n            return derefed.shouldDispose(this.state.renderCycle);\n        })\n        .forEach(item => item.dispose());\n\n        this.state.derefed = this.state.derefed.filter(derefed => {\n            return !derefed.shouldDispose(this.state.renderCycle);\n        });\n    },\n    componentWillUnmount: function () {\n        this.unsubscribe();\n    }\n};\n\nfunction createComponentObj(mixins, args) {\n    let componentObj;\n    switch (args.length) {\n        case 2:\n            if (typeof args[1].prototype === 'undefined') {\n                args[1].mixins = mixins;\n                componentObj = args[1];\n            } else {\n                componentObj = {\n                    mixins: mixins,\n                    render: args[1]\n                };\n            }\n            break;\n        case 3:\n            if (typeof args[2].prototype === 'undefined') {\n                // it's an object\n                args[2].mixins = mixins.concat(args[1]);\n                componentObj = args[2];\n            } else {\n                // it's a render function\n                componentObj = {\n                    mixins: mixins.concat(args[1]),\n                    render: args[2]\n                };\n            }\n            break;\n        default :\n            throw new Error('Expected 2 or 3 arguments, got ' + args.length);\n    }\n    componentObj.displayName = args[0];\n    return componentObj;\n}\n\nfunction propsView(mixin, args) {\n    let componentObj = createComponentObj(mixin, args);\n    let oldRender = componentObj.render;\n    componentObj.render = function () {\n        return oldRender.call(this, this.props);\n    };\n\n    let component = React.createClass(componentObj);\n\n    return React.createFactory(component);\n}\n\nfunction vectorView(mixin, args) {\n    let componentObj = createComponentObj(mixin, args);\n    let oldRender = componentObj.render;\n    componentObj.render = function () {\n        return oldRender.apply(this, this.props.argv);\n    };\n    let component = React.createClass(componentObj);\n    let factory = React.createFactory(component);\n\n    return function () {\n        return factory({argv: Array.prototype.slice.call(arguments)});\n    };\n}\n\nexport function viewP() {\n    return propsView([StatelessMixin], arguments);\n}\n\nexport function viewV() {\n    return vectorView([StatelessMixin], arguments);\n}\n\nexport function viewSP() {\n    return propsView([SubscriptionMixin], arguments);\n}\n\nexport function viewSV() {\n    return vectorView([SubscriptionMixin], arguments);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/react.js\n **/","'use strict';\nimport * as Immutable from 'immutable';\n\n/**\n * If props does not exist return false - Pure render mixin. If props exists and it contains mutable entries,\n * return false. If props contains only immutable entries compare them by type.\n *\n * @param {object} props current props\n * @param {object} nextProps new props\n * @param {array} ignore ignore these keys\n * @returns {boolean} true if component should be rerendered\n */\nexport function shouldUpdate(props, nextProps, ignore) {\n    let entries;\n    if (nextProps === props || nextProps.length !== props.length) {\n        return false;\n    }\n    if (ignore && ignore.length > 0) {\n        entries = Object.keys(props)\n            .filter(k => ignore.indexOf(k) === -1)\n            .map(k => [props[k], nextProps[k]]);\n    } else {\n        entries = Object.keys(props).map(k => [props[k], nextProps[k]]);\n    }\n\n    if (entries.length) {\n        return !entries.every(function ([value, nextValue]) {\n            if ((isPrimitive(value) && isPrimitive(nextValue))\n                ||\n                (isImmutable(value) && isImmutable(nextValue))) {\n\n                return value === nextValue;\n            }\n            return false;\n        });\n    }\n    return false;\n}\nfunction isImmutable(maybeImmutable) {\n    return Immutable.Iterable.isIterable(maybeImmutable);\n}\n\nfunction isPrimitive(value) {\n    var type = typeof value;\n    return type === 'number' || type === 'boolean' || type === 'string' || value === null || value === void 0;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/shouldupdate.js\n **/","'use strict';\nimport * as Immutable from 'immutable';\nimport * as Rx from 'rx';\nconst LISTENER_SENTINEL = {};\n\nexport class Index {\n    constructor(rx) {\n        this.listeners = Immutable.Map();\n        this.rx = rx;\n    }\n\n    sub(path, def) {\n        const self = this;\n\n        let slices = [];\n        for (let i = 0; i < path.length; i++) {\n            slices.push(Array.prototype.slice.call(path.slice(0, i + 1)));\n        }\n        this.listeners = slices.reduce(\n            (acc, pathSlice) => {\n                let parentPath = pathSlice.slice(0, pathSlice.length - 1);\n                let parentRx = parentPath.length === 0 ? this.rx() : acc.getIn(parentPath.concat(LISTENER_SENTINEL));\n                let lastFragment = pathSlice[pathSlice.length - 1];\n                return acc.updateIn(pathSlice.concat(LISTENER_SENTINEL), old => {\n                    if (old) {\n                        return old;\n                    }\n                    let subject = new Rx.ReplaySubject(1),\n                        subscription = parentRx\n                            .map(a => {\n                                if (a && a.get) {\n                                    return a.get(lastFragment);\n                                }\n                            })\n                            .distinctUntilChanged(x => x, (x, y) => x === y)\n                            //.doOnNext(v => console.log('v', v.toJS()))\n                            .subscribe(subject);\n                    let oldSubscribe = subject.subscribe;\n                    subject.subscribe = function () {\n                        const sub = oldSubscribe.apply(this, arguments);\n\n                        return Rx.Disposable.create(function () {\n                            sub.dispose();\n                            if (!subject.hasObservers()) {\n                                subscription.dispose();\n                                self.listeners = self.listeners.removeIn(pathSlice);\n                            }\n                        });\n                    };\n                    return subject;\n                });\n            },\n            this.listeners\n        );\n\n        return this.listeners.getIn(path.concat([LISTENER_SENTINEL])).map(a => typeof a !== 'undefined' ? a : def);\n    }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js/reframe/subindex.js\n **/","'use strict';\n\nvar Immutable = require('immutable');\nvar utils = require('./utils');\nvar lcs = require('./lcs');\nvar path = require('./path');\nvar concatPath = path.concat,\n                  escape = path.escape,\n                  op = utils.op,\n                  isMap = utils.isMap,\n                  isIndexed = utils.isIndexed;\n\nvar mapDiff = function(a, b, p){\n  var ops = [];\n  var path = p || '';\n\n  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n\n  var areLists = isIndexed(a) && isIndexed(b);\n  var lastKey = null;\n  var removeKey = null\n\n  if(a.forEach){\n    a.forEach(function(aValue, aKey){\n      if(b.has(aKey)){\n        if(isMap(aValue) && isMap(b.get(aKey))){\n          ops = ops.concat(mapDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n        }\n        else if(isIndexed(b.get(aKey)) && isIndexed(aValue)){\n          ops = ops.concat(sequenceDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n        }\n        else {\n          var bValue = b.get ? b.get(aKey) : b;\n          var areDifferentValues = (aValue !== bValue);\n          if (areDifferentValues) {\n            ops.push(op('replace', concatPath(path, escape(aKey)), bValue));\n          }\n        }\n      }\n      else {\n        if(areLists){\n          removeKey = (lastKey != null && (lastKey+1) === aKey) ? removeKey : aKey;\n          ops.push( op('remove', concatPath(path, escape(removeKey))) );\n          lastKey = aKey;\n        }\n        else{\n          ops.push( op('remove', concatPath(path, escape(aKey))) );\n        }\n        \n      }\n    });\n  }\n\n  b.forEach(function(bValue, bKey){\n    if(a.has && !a.has(bKey)){\n      ops.push( op('add', concatPath(path, escape(bKey)), bValue) );\n    }\n  });\n\n  return ops;\n};\n\nvar sequenceDiff = function (a, b, p) {\n  var ops = [];\n  var path = p || '';\n  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n  if(b.count() > 100) { return mapDiff(a, b, p); }\n\n  var lcsDiff = lcs.diff(a, b);\n\n  var pathIndex = 0;\n\n  lcsDiff.forEach(function (diff) {\n    if(diff.op === '='){ pathIndex++; }\n    else if(diff.op === '!='){\n      if(isMap(diff.val) && isMap(diff.newVal)){\n        var mapDiffs = mapDiff(diff.val, diff.newVal, concatPath(path, pathIndex));\n        ops = ops.concat(mapDiffs);\n      }\n      else{\n        ops.push(op('replace', concatPath(path, pathIndex), diff.newVal));\n      }\n      pathIndex++;\n    }\n    else if(diff.op === '+'){\n      ops.push(op('add', concatPath(path, pathIndex), diff.val));\n      pathIndex++;\n    }\n    else if(diff.op === '-'){ ops.push(op('remove', concatPath(path, pathIndex))); }\n  });\n\n  return ops;\n};\n\nvar primitiveTypeDiff = function (a, b, p) {\n  var path = p || '';\n  if(a === b){ return []; }\n  else{\n    return [ op('replace', concatPath(path, ''), b) ];\n  }\n};\n\nvar diff = function(a, b, p){\n  if(a != b && (a == null || b == null)){ return Immutable.fromJS([op('replace', '/', b)]); }\n  if(isIndexed(a) && isIndexed(b)){\n    return Immutable.fromJS(sequenceDiff(a, b));\n  }\n  else if(isMap(a) && isMap(b)){\n    return Immutable.fromJS(mapDiff(a, b));\n  }\n  else{\n    return Immutable.fromJS(primitiveTypeDiff(a, b, p));\n  }\n};\n\nmodule.exports = diff;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/diff.js\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\n\nvar Immutable = require('immutable');\n\n/**\n * Returns a two-dimensional array (an array of arrays) with dimensions n by m.\n * All the elements of this new matrix are initially equal to x\n * @param n number of rows\n * @param m number of columns\n * @param x initial element for every item in matrix\n */\nvar makeMatrix = function(n, m, x){\n  var matrix = [];\n  for(var i = 0; i < n; i++) {\n    matrix[i] = new Array(m);\n\n    if(x != null){\n      for(var j = 0; j < m; j++){\n        matrix[i][j] = x;\n      }\n    }\n  }\n\n  return matrix;\n};\n\n/**\n * Computes Longest Common Subsequence between two Immutable.JS Indexed Iterables\n * Based on Dynamic Programming http://rosettacode.org/wiki/Longest_common_subsequence#Java\n * @param xs ImmutableJS Indexed Sequence 1\n * @param ys ImmutableJS Indexed Sequence 2\n */\nvar lcs = function(xs, ys){\n  var matrix = computeLcsMatrix(xs, ys);\n\n  return backtrackLcs(xs, ys, matrix);\n};\n\nvar DiffResult = Immutable.Record({op: '=', val: null});\nvar ReplaceResult = Immutable.Record({op: '!=', val: null, newVal: null});\n\n/**\n * Returns the resulting diff operations of LCS between two sequences\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n * @returns Array of DiffResult {op:'=' | '+' | '-', val:any}\n */\nvar diff = function(xs, ys){\n  var matrix = computeLcsMatrix(xs, ys);\n\n  return printDiff(matrix, xs, ys, xs.size||0, ys.size||0);\n};\n\nvar printDiff = function(matrix, xs, ys, i, j) {\n  if(i === 0 && j === 0) { return []; }\n  if (i > 0 && j > 0 && Immutable.is(xs.get(i-1), ys.get(j-1))) {\n    return printDiff(matrix, xs, ys, i - 1, j - 1).concat(new DiffResult({\n      op: '=',\n      val: xs.get(i - 1)\n    }));\n  }\n  else if (i > 0 && j > 0 && i === j && !Immutable.is(xs.get(i-1), ys.get(j-1))) {\n    return printDiff(matrix, xs, ys, i - 1, j - 1).concat(new ReplaceResult({\n      val: xs.get(i - 1),\n      newVal: ys.get(i - 1)\n    }));\n  }\n  else {\n    if (j > 0 && (i === 0 || matrix[i][j - 1] >= matrix[i - 1][j])) {\n      return printDiff(matrix, xs, ys, i, j - 1).concat(new DiffResult({\n        op: '+',\n        val: ys.get(j - 1)\n      }));\n    }\n    else if (i > 0 && (j === 0 || matrix[i][j - 1] < matrix[i - 1][j])) {\n      return printDiff(matrix, xs, ys, i - 1, j).concat(new DiffResult({\n        op: '-',\n        val: xs.get(i - 1)\n      }));\n    }\n  }\n};\n\n/**\n * Computes the Longest Common Subsequence table\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n */\nfunction computeLcsMatrix(xs, ys) {\n  var n = xs.size||0;\n  var m = ys.size||0;\n  var a = makeMatrix(n + 1, m + 1, 0);\n\n  for (var i = 0; i < n; i++) {\n    for (var j = 0; j < m; j++) {\n      if (Immutable.is(xs.get(i), ys.get(j))) {\n        a[i + 1][j + 1] = a[i][j] + 1;\n      }\n      else {\n        a[i + 1][j + 1] = Math.max(a[i + 1][j], a[i][j + 1]);\n      }\n    }\n  }\n\n  return a;\n}\n\n/**\n * Extracts a LCS from matrix M\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n * @param matrix LCS Matrix\n * @returns {Array.<T>} Longest Common Subsequence\n */\nvar backtrackLcs = function(xs, ys, matrix){\n  var lcs = [];\n  for(var i = xs.size, j = ys.size; i !== 0 && j !== 0;){\n    if (matrix[i][j] === matrix[i-1][j]){ i--; }\n    else if (matrix[i][j] === matrix[i][j-1]){ j--; }\n    else{\n      if(Immutable.is(xs.get(i-1), ys.get(j-1))){\n        lcs.push(xs.get(i-1));\n        i--;\n        j--;\n      }\n    }\n  }\n  return lcs.reverse();\n};\n\nmodule.exports = {\n  lcs: lcs,\n  computeLcsMatrix: computeLcsMatrix,\n  diff: diff\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/lcs.js\n ** module id = 13\n ** module chunks = 0\n **/","'use strict';\n\nvar slashRe = new RegExp('/', 'g');\nvar escapedSlashRe = new RegExp('~1', 'g');\nvar tildeRe = /~/g;\nvar escapedTildeRe = /~0/g;\n\nvar Path = {\n  escape: function (str) {\n    if(typeof(str) === 'number'){\n      return str.toString();\n    }\n    if(typeof(str) !== 'string'){\n      throw 'param str (' + str + ') is not a string';\n    }\n\n    return str.replace(tildeRe, '~0').replace(slashRe, '~1');\n  },\n\n  unescape: function (str) {\n    if(typeof(str) == 'string') {\n      return str.replace(escapedSlashRe, '/').replace(escapedTildeRe, '~');\n    }\n    else {\n      return str;\n    }\n  },\n  concat: function(path, key){\n    return path + '/' + key;\n  }\n};\n\nmodule.exports = Path;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/path.js\n ** module id = 14\n ** module chunks = 0\n **/","'use strict';\n\nvar Immutable = require('immutable');\n\nvar isMap = function(obj){ return Immutable.Iterable.isKeyed(obj); };\nvar isIndexed = function(obj) { return Immutable.Iterable.isIndexed(obj); };\n\nvar op = function(operation, path, value){\n  if(operation === 'remove') { return { op: operation, path: path }; }\n\n  return { op: operation, path: path, value: value };\n};\n\nmodule.exports = {\n  isMap: isMap,\n  isIndexed: isIndexed,\n  op: op\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/utils.js\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}\n ** module id = 16\n ** module chunks = 0\n **/"],"sourceRoot":""}