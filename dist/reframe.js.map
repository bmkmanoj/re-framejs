{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dfdc10533ae3014b24e9","webpack:///./src/main/js1/reframe/core.js","webpack:///./src/main/js1/reframe/cofx.js","webpack:///./src/main/js1/reframe/registrar.js","webpack:///external {\"amd\":\"immutable\",\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"root\":\"Immutable\"}","webpack:///./src/main/js1/reframe/interceptor.js","webpack:///./src/main/js1/reframe/db.js","webpack:///./src/main/js1/reframe/ratom.js","webpack:///external {\"amd\":\"rx\",\"commonjs\":\"rx\",\"commonjs2\":\"rx\",\"root\":\"Rx\"}","webpack:///./src/main/js1/reframe/events.js","webpack:///./src/main/js1/reframe/fx.js","webpack:///./src/main/js1/reframe/router.js","webpack:///./src/main/js1/reframe/interop.js","webpack:///./src/main/js1/reframe/batching.js","webpack:///./src/main/js1/reframe/react.js","webpack:///./src/main/js1/reframe/subs.js","webpack:///external {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}","webpack:///./src/main/js1/reframe/shouldupdate.js","webpack:///./src/main/js1/reframe/utils.js","webpack:///./src/main/js1/reframe/stdinterceptors.js","webpack:///./~/immutablediff/src/diff.js","webpack:///./~/immutablediff/src/utils.js","webpack:///./~/immutablediff/src/lcs.js","webpack:///./~/immutablediff/src/path.js","webpack:///./src/main/js1/reframe/subindex.js"],"names":["toggleDebug","toggleReactDebug","isDebug","atom","reaction","regSubRaw","clearSub","clearFx","clearCofx","clearEvent","regEventDb","regEventFx","regEventCtx","indexPath","registerSub","registerHandler","compMiddleware","cofx","db","events","fx","interceptor","interop","react","registrar","router","stdinterceptors","subs","value","undefined","toggleLog","f","appDb","db$","subject","dispatch","dispatchSync","toInterceptor","enqueue","getCoeffect","getEffect","assocEffect","assocCoeffect","when","debug","path","enrich","trimv","after","onChanges","queryId","handlerFn","kind","regSub","subscribe","id","clearHandlers","clearSubscriptionCache","regFx","register","regCofx","injectCofx","interceptors","dbHandler","injectDb","doFx","dbHandlerToInterceptor","fxHandler","fxHandlerToInterceptor","ctxHandler","ctxHandlerToInterceptor","viewP","viewV","viewSP","viewSV","view","index","def","sub","name","handler","module","exports","default","before","coeffectsBefore","ctx","update","old","doCoeffectsHandler","coeffects","set","deref","getHandler","Immutable","kindIdHandlerMap","Map","required","getIn","console","error","get","setIn","deleteIn","delete","nextInterceptor","execute","mandatoryInterceptorFields","Set","isInterceptor","m","isMap","is","keysSeq","toSet","key","notFound","effect","coeffect","updateCoeffect","args","updateIn","invokeInterceptorFn","direction","invokeInterceptors","initialCtx","queue","isEmpty","first","stack","List","shift","unshift","concat","context","event","changeDirection","runInCtx","makeReaction","makeAtom","makeRatom","makeRxReaction","Rx","BehaviorSubject","ratomCtx","obj","push","pop","watchInCtx","observer","length","Observable","_observers","_observables","_onDispose","add","observe","unobserve","size","dispose","observable","forEach","notify","unsubscribe","Atom","_value","_id","_changed","_subject","onNext","_notifyObservers","_valueChanged","oldValue","Ratom","Reaction","_f","_dirty","_state","_run","oldState","RxReaction","rx","_subj","_rx","distinctUntilChanged","trace","_subscription","a","b","doOnNext","getValue","transform","map","handle","flattenAndRemoveNulls","fromJS","flatMap","filter","Boolean","toList","handling","eventId","rest","doFxAfter","effectFn","values","ms","setTimeout","isList","isSeq","v","reset","laterFns","doTrigger","fsm","state","trigger","arg","_addEvent","_runNextTick","_runQueue","_pause","_exception","_queue","_resume","Error","Fsm","_postEventCallbacks","callbackFn","warn","newState","actionFn","_callPostEventCallbacks","i","_process1stEventInQueue","ex","laterFn","Object","keys","EventQueue","_fsm","addPostEventCallback","removePostEventCallback","eventQueue","afterRender","reagentId","isTraceReact","batching","ratom","nextTick","log","traceReact","traceSub","isEnabled","swap","container","flush","flushAfterRender","queueRender","doBeforeFlush","doAfterRender","schedule","requestAnimationFrame","runQueue","components","s","sort","o1","o2","renderOrder","component","tryForceUpdate","RenderQueue","_isScheduled","k","fns","runQueues","c","flushQueues","runFuns","window","__reframe_render_queue","renderQueue","addBeforeFlush","addAfterRender","render","React","data","toUpdate","shouldUpdateByDerefed","watching","watch","shouldUpdate","_","forceUpdate","StatelessMixin","shouldComponentUpdate","nextProps","nextState","props","argv","getDisplayName","constructor","displayName","S4","Math","random","toString","substring","guid","MyDeref","renderCycle","_renderCycle","_watch","isChanged","SubscriptionMixin","derefSub","subVec","getInitialState","updateByProps","updateByState","aTransform","aId","componentWillUpdate","componentDidUpdate","shouldDispose","componentWillUnmount","message","order","createComponentObj","mixins","componentObj","prototype","propsView","mixin","oldRender","call","createClass","factory","createFactory","updater","vectorView","apply","Array","slice","arguments","clearAllHandlers","queryReaction","makeCacheKey","query","dynv","cacheAndReturn","r","cacheKey","addOnDispose","cache","cacheLookup","cached","dynVals","derefInputSignals","signals","isArray","Seq","partition","input","spacing","output","makeMultiInputPairsFn","inputArgs","pairs","vecs","p","inpFn","makeInputsFn","checkRx","computationFn","errHeader","inputsFn","subsHandlerFn","queryVec","dynVec","subscriptions","subsRxHandlerFn","ignore","entries","indexOf","every","nextValue","isImmutable","isPrimitive","isFunction","isObject","maybeImmutable","Iterable","isIterable","type","debugBefore","debugAfter","origDb","newDb","diff","groupCollapsed","df","groupEnd","trimvBefore","trimvAfter","dbHandlerBefore","fxHandlerBefore","dbStoreKey","pathBefore","originalDb","pathAfter","dbStore","last","newDbStore","ctx1","enrichAfter","afterAfter","outPath","inPaths","onChangesAfter","oldDb","newIns","oldIns","changedIns","zip","contains","booleanProvider","whenBefore","LISTENER_SENTINEL","Index","listeners","self","slices","reduce","acc","pathSlice","parentPath","parentRx","lastFragment","x","y","shareReplay","oldSubscribe","Disposable","create","_count","removeIn"],"mappings":"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A/B,EAA4C;AAC/C,YAAO,gCAAc;AACjBkC,aAAI,MADa;AAEjB6B,iBAAQ,SAASwV,UAAT,CAAoBtV,GAApB,EAAyB;AAC7B,iBAAIqV,iBAAJ,EAAuB;AACnB,wBAAO,kCAAgBrV,GAAhB,EAAqBjE,WAArB,CAAP;AACH;AACD,oBAAOiE,GAAP;AACH;AAPgB,MAAd,CAAP;AASH,E;;;;;;ACrRD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8CAA6C,YAAY;;AAEzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,8CAA6C,YAAY;AACzD,oDAAmD,yBAAyB;;AAE5E;;AAEA;;AAEA;AACA,yBAAwB,aAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,qDAAqD;AAClF,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,eAAc,WAAW;AACzB;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,yBAAyB;AAClD,0CAAyC,kDAAkD;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpHA;;AAEA;;AAEA,2BAA0B,wCAAwC;AAClE,gCAA+B,0CAA0C;;AAEzE;AACA,+BAA8B,SAAS,6BAA6B;;AAEpE,WAAU;AACV;;AAEA;AACA;AACA;AACA;AACA,G;;;;;;ACjBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB;;AAEA;AACA,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oCAAmC,mBAAmB;AACtD,uCAAsC,kCAAkC;;AAExE;AACA;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,OAAO;AACxB,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,UAAU;AACvB;AACA;AACA;AACA,oCAAmC,oBAAoB;AACvD,0CAAyC,KAAK;AAC9C,+CAA8C,KAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACjJA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA,uB;;;;;;AChCA;;;;;;;;;AACA;;KAAYQ,S;;AACZ;;KAAYgD,E;;;;;;AACZ,KAAM+R,oBAAoB,EAA1B;;KAEaC,K,WAAAA,K;AACT,oBAAYzP,EAAZ,EAAgB;AAAA;;AACZ,cAAK0P,SAAL,GAAiBjV,UAAUE,GAAV,EAAjB;AACA,cAAKqF,EAAL,GAAUA,EAAV;AACH;;;;6BAEGxI,I,EAAMgC,G,EAAK;AAAA;;AACX,iBAAMmW,OAAO,IAAb;;AAEA,iBAAIC,SAAS,EAAb;AACA,kBAAK,IAAIxM,IAAI,CAAb,EAAgBA,IAAI5L,KAAKyG,MAAzB,EAAiCmF,GAAjC,EAAsC;AAClCwM,wBAAO/R,IAAP,CAAYqM,MAAMX,SAAN,CAAgBY,KAAhB,CAAsBR,IAAtB,CAA2BnS,KAAK2S,KAAL,CAAW,CAAX,EAAc/G,IAAI,CAAlB,CAA3B,CAAZ;AACH;AACD,kBAAKsM,SAAL,GAAiBE,OAAOC,MAAP,CACb,UAACC,GAAD,EAAMC,SAAN,EAAoB;AAChB,qBAAIC,aAAaD,UAAU5F,KAAV,CAAgB,CAAhB,EAAmB4F,UAAU9R,MAAV,GAAmB,CAAtC,CAAjB;AACA,qBAAIgS,WAAWD,WAAW/R,MAAX,KAAsB,CAAtB,GAA0B,MAAK+B,EAAL,EAA1B,GAAsC8P,IAAIjV,KAAJ,CAAUmV,WAAWhT,MAAX,CAAkBwS,iBAAlB,CAAV,CAArD;AACA,qBAAIU,eAAeH,UAAUA,UAAU9R,MAAV,GAAmB,CAA7B,CAAnB;AACA,wBAAO6R,IAAI1T,QAAJ,CAAa2T,UAAU/S,MAAV,CAAiBwS,iBAAjB,CAAb,EAAkD,eAAO;AAC5D,yBAAIrV,GAAJ,EAAS;AACL,gCAAOA,GAAP;AACH;AACD,yBAAMtD,UAAUoZ,SACXtP,GADW,CACP,aAAK;AACN,6BAAIL,KAAKA,EAAEtF,GAAX,EAAgB;AACZ,oCAAOsF,EAAEtF,GAAF,CAAMkV,YAAN,CAAP;AACH;AACJ,sBALW,EAMX/P,oBANW,CAMU;AAAA,gCAAKgQ,CAAL;AAAA,sBANV,EAMkB,UAACA,CAAD,EAAIC,CAAJ;AAAA,gCAAUD,MAAMC,CAAhB;AAAA,sBANlB,EAOXC,WAPW,CAOC,CAPD,CAAhB;AAQA,yBAAIC,eAAezZ,QAAQoB,SAA3B;AACApB,6BAAQoB,SAAR,GAAoB,YAAY;AAC5B,6BAAMwB,MAAM6W,aAAarG,KAAb,CAAmB,IAAnB,EAAyBG,SAAzB,CAAZ;AAAA,6BACIhF,IAAI,IADR;;AAGA,gCAAO3H,GAAG8S,UAAH,CAAcC,MAAd,CAAqB,YAAY;AACpC/W,iCAAIiF,OAAJ;AACA,iCAAI0G,EAAEqL,MAAF,KAAa,CAAjB,EAAoB;AAChBd,sCAAKD,SAAL,GAAiBC,KAAKD,SAAL,CAAegB,QAAf,CAAwBX,SAAxB,CAAjB;AACH;AACJ,0BALM,CAAP;AAMH,sBAVD;AAWA,4BAAOlZ,OAAP;AACH,kBAzBM,CAAP;AA0BH,cA/BY,EAgCb,KAAK6Y,SAhCQ,CAAjB;;AAmCA,oBAAO,KAAKA,SAAL,CAAe7U,KAAf,CAAqBrD,KAAKwF,MAAL,CAAY,CAACwS,iBAAD,CAAZ,CAArB,EAAuD7O,GAAvD,CAA2D;AAAA,wBAAK,OAAOL,CAAP,KAAa,WAAb,GAA2BA,CAA3B,GAA+B9G,GAApC;AAAA,cAA3D,CAAP;AACH","file":"reframe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"reframe\", [\"immutable\", \"rx\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reframe\"] = factory(require(\"immutable\"), require(\"rx\"), require(\"react\"));\n\telse\n\t\troot[\"reframe\"] = factory(root[\"Immutable\"], root[\"Rx\"], root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_15__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap dfdc10533ae3014b24e9\n **/","import * as cofx from 'reframe/cofx';\nimport * as db from 'reframe/db';\nimport * as events from 'reframe/events';\nimport * as fx from 'reframe/fx';\nimport * as interceptor from 'reframe/interceptor';\nimport * as interop from 'reframe/interop';\nimport {makeRatom, makeReaction} from 'reframe/ratom';\nimport * as react from 'reframe/react';\nimport * as registrar from 'reframe/registrar';\nimport * as router from 'reframe/router';\nimport * as stdinterceptors from 'reframe/stdinterceptors';\nimport * as subs from 'reframe/subs';\n\nexport function toggleDebug(value = undefined) {\n    interop.toggleLog('debug', value);\n}\n\nexport function toggleReactDebug(value = undefined) {\n    interop.toggleLog('traceReact', value);\n}\n\nexport function isDebug() {\n    return interop.isDebug();\n}\n\nexport function atom(value) {\n    return makeRatom(value);\n}\n\nexport function reaction(f) {\n    return makeReaction(f);\n}\n\nexport const appDb = db.appDb;\nexport const db$ = db.appDb.subject();\nexport const dispatch = router.dispatch;\nexport const dispatchSync = router.dispatchSync;\n\nexport const toInterceptor = interceptor.toInterceptor;\nexport const enqueue = interceptor.enqueue;\nexport const getCoeffect = interceptor.getCoeffect;\nexport const getEffect = interceptor.getEffect;\nexport const assocEffect = interceptor.assocEffect;\nexport const assocCoeffect = interceptor.assocCoeffect;\n\nexport const when = stdinterceptors.when;\nexport const debug = stdinterceptors.debug;\nexport const path = stdinterceptors.path;\nexport const enrich = stdinterceptors.enrich;\nexport const trimv = stdinterceptors.trimv;\nexport const after = stdinterceptors.after;\nexport const onChanges = stdinterceptors.onChanges;\n\n/**\n * Associate a given `query id` with a given subscription handler function `handler-fn`\n * which is expected to take two arguments: app-db and query vector, and return\n * a `reaction`.\n * This is a low level, advanced function.  You should probably be using reg-sub\n * instead.\n */\nexport function regSubRaw(queryId, handlerFn) {\n    return registrar.registerHandler(subs.kind, queryId, queryId, handlerFn)\n}\n\nexport const regSub = subs.regSub;\nexport const subscribe = subs.subscribe;\n\nexport function clearSub(id) {\n    registrar.clearHandlers(subs.kind, id);\n}\nexport const clearSubscriptionCache = subs.clearSubscriptionCache;\n\n// effects\nexport const regFx = fx.register;\nexport function clearFx(id) {\n    registrar.clearHandlers(fx.kind, id);\n}\n\n// coeffects\nexport const regCofx = cofx.register\nexport const injectCofx = cofx.injectCofx\nexport function clearCofx(id) {\n    registrar.clearHandlers(cofx.kind, id);\n}\n\n\n// Events\nexport function clearEvent(id) {\n    registrar.clearHandlers(events.kind, id);\n}\n\n/**\n * Register the given `id`, typically a keyword, with the combination of\n * `db-handler` and an interceptor chain.\n * `db-handler` is a function: (db event) -> db\n * `interceptors` is a collection of interceptors, possibly nested (needs flattening).\n * `db-handler` is wrapped in an interceptor and added to the end of the chain, so in the end\n * there is only a chain.\n * The necessary effects and coeffects handler are added to the front of the\n * interceptor chain.  These interceptors ensure that app-db is available and updated.\n */\nexport function regEventDb(id, interceptors, dbHandler) {\n    if (typeof dbHandler === 'undefined') {\n        dbHandler = interceptors;\n        interceptors = null;\n    }\n    return events.register(id, [cofx.injectDb, fx.doFx, interceptors, stdinterceptors.dbHandlerToInterceptor(dbHandler)]);\n}\n\nexport function regEventFx(id, interceptors, fxHandler) {\n    if (typeof fxHandler === 'undefined') {\n        fxHandler = interceptors;\n        interceptors = null;\n    }\n    return events.register(id, [cofx.injectDb, fx.doFx, interceptors, stdinterceptors.fxHandlerToInterceptor(fxHandler)]);\n}\n\nexport function regEventCtx(id, interceptors, ctxHandler) {\n    if (typeof ctxHandler === 'undefined') {\n        ctxHandler = interceptors;\n        interceptors = null;\n    }\n    return events.register(id, [cofx.injectDb, fx.doFx, interceptors, stdinterceptors.ctxHandlerToInterceptor(ctxHandler)]);\n}\n\n// react\nexport const viewP = react.viewP;\nexport const viewV = react.viewV;\nexport const viewSP = react.viewSP;\nexport const viewSV = react.viewSV;\nexport const view = react.viewSV;\n\n// deprecated\nimport {Index} from 'reframe/subindex.js';\nlet index = new Index(()=>appDb.subject());\nexport function indexPath(path, def) {\n    return index.sub(path, def);\n}\n\nexport function registerSub(name, handler) {\n    return subs.registerSub(name, handler);\n}\n\nexport function registerHandler(id, interceptors, handler) {\n    return regEventDb(id, interceptors, handler);\n}\n\nexport function compMiddleware(interceptors) {\n    return interceptors;\n}\n\nmodule.exports.default = module.exports;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/core.js\n **/","import {registerHandler, getHandler} from 'reframe/registrar';\nimport {toInterceptor} from 'reframe/interceptor';\nimport {appDb} from 'reframe/db';\nconst kind = 'cofx';\n\nfunction register(id, handlerFn) {\n    return registerHandler(kind, id, handlerFn);\n}\n\nfunction injectCofx(id, value = undefined) {\n    const handler = getHandler(kind, id);\n    if (typeof value !== 'undefined') {\n        return toInterceptor({\n            id: 'coeffects',\n            before: function coeffectsBefore(ctx) {\n                return ctx.update('coeffects', handler)\n            }\n        });\n    } else {\n        return toInterceptor({\n            id: 'coeffects',\n            before: function coeffectsBefore(ctx) {\n                return ctx.update('coeffects', old => handler(old, value))\n            }\n        });\n\n    }\n}\n\nregister('db', function doCoeffectsHandler(coeffects) {\n    return coeffects.set('db', appDb.deref());\n});\n\nexport const injectDb = injectCofx('db');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/cofx.js\n **/","import * as Immutable from 'immutable';\n\nlet kindIdHandlerMap = Immutable.Map();\n\nexport function getHandler(kind, id=undefined, required=false) {\n    if (typeof id !== 'undefined') {\n        const handler = kindIdHandlerMap.getIn([kind, id]);\n        if (required && !handler) {\n            console.error('re-frame: no',  kind, 'handler registered for:', id);\n        }\n        return handler;\n    }\n    return kindIdHandlerMap.get(kind, Immutable.Map());\n}\n\nexport function registerHandler(kind, id, handlerFn) {\n    kindIdHandlerMap = kindIdHandlerMap.setIn([kind, id], handlerFn);\n    return handlerFn;\n}\n\nexport function clearHandlers(kind=undefined, id=undefined) {\n    if (typeof kind !== 'undefined' && typeof id !== 'undefined') {\n        kindIdHandlerMap = kindIdHandlerMap.deleteIn([kind, id]);\n    } else if (kind !== 'undefined') {\n        kindIdHandlerMap = kindIdHandlerMap.delete(kind);\n    } else {\n        kindIdHandlerMap = Immutable.Map();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/registrar.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"immutable\",\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"root\":\"Immutable\"}\n ** module id = 3\n ** module chunks = 0\n **/","import * as Immutable from 'immutable';\n\nconst mandatoryInterceptorFields = Immutable.Set([\"id\", \"before\", \"after\"]);\n\nfunction isInterceptor(m) {\n    return Immutable.isMap(m) && Immutable.is(m.keysSeq().toSet(), mandatoryInterceptorFields);\n}\n\nexport function toInterceptor({id, before, after}) {\n    return Immutable.Map({\n        id: id || 'unnamed',\n        before: before,\n        after: after\n    });\n}\n\n// effect helpers\nexport function getEffect(ctx, key = null, notFound = null) {\n    if (key) {\n        return ctx.getIn(['effects', key], notFound);\n    }\n    return ctx.get('effects');\n}\n\nexport function assocEffect(ctx, key, effect) {\n    return ctx.setIn(['effects', key], effect);\n}\n\n// coeffect helpers\nexport function getCoeffect(ctx, key = null, notFound = null) {\n    if (key) {\n        return ctx.getIn(['coeffects', key], notFound);\n    }\n    return ctx.get('coeffects');\n}\n\nexport function assocCoeffect(ctx, key, coeffect) {\n    return ctx.setIn(['coeffects', key], coeffect);\n}\n\nfunction updateCoeffect(ctx, key, f, ...args) {\n    return ctx.updateIn(['coeffects', key], (old) => f(old, ...args));\n}\n\n// Execute Interceptor Chain\n\nfunction invokeInterceptorFn(ctx, interceptor, direction) {\n    const f = interceptor.get(direction);\n    if (f) {\n        return f(ctx);\n    }\n    return ctx;\n}\n\nfunction invokeInterceptors(initialCtx, direction) {\n    let ctx = initialCtx;\n    do {\n        const queue = ctx.get('queue');\n\n        if (queue.isEmpty()) {\n            return ctx;\n        } else {\n            const\n                interceptor = queue.first(),\n                stack = ctx.get('stack', Immutable.List());\n\n            ctx = invokeInterceptorFn(\n                ctx\n                    .set('queue', queue.shift())\n                    .set('stack', stack.unshift(interceptor)),\n                interceptor, direction\n            );\n        }\n    } while (ctx && !ctx.get('queue').isEmpty());\n    return ctx;\n}\n\nexport function enqueue(ctx, interceptors) {\n    return ctx.update('queue', Immutable.List(), old => old.concat(Immutable.List(interceptors)))\n}\n\nexport function nextInterceptor(ctx, interceptor) {\n    return ctx.update('queue', Immutable.List(), queue => queue.unshift(interceptor));\n}\n\nfunction context(event, interceptors, db = undefined) {\n    let ctx = Immutable.Map();\n    ctx = assocCoeffect(ctx, 'event', event);\n    if (typeof db !== 'undefined') {\n        ctx = assocCoeffect(ctx, 'db', db);\n    }\n    ctx = enqueue(ctx, interceptors);\n\n    return ctx;\n}\n\nfunction changeDirection(ctx) {\n    return enqueue(ctx.delete('queue'), ctx.get('stack'))\n}\n\nexport function execute(event, interceptors) {\n    let ctx = context(event, interceptors);\n    ctx = invokeInterceptors(ctx, \"before\");\n    ctx = changeDirection(ctx);\n    ctx = invokeInterceptors(ctx, \"after\");\n    return ctx;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/interceptor.js\n **/","import * as Immutable from 'immutable';\nimport {makeRatom} from 'reframe/ratom';\n\nexport const appDb = makeRatom(Immutable.Map());\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/db.js\n **/","import * as Immutable from 'immutable';\nimport * as Rx from 'rx';\n\nexport const db$ = new Rx.BehaviorSubject(Immutable.Map());\n\n\nconst ratomCtx = [];\nlet id = 1;\nexport function runInCtx(obj, f) {\n    try {\n        ratomCtx.push(obj);\n        return f();\n    } finally {\n        ratomCtx.pop();\n    }\n}\n\nfunction watchInCtx(obj) {\n    const observer = ratomCtx[ratomCtx.length - 1];\n    if (typeof observer !== 'undefined') {\n        obj.subscribe(observer);\n    }\n}\n\nclass Observable {\n    constructor() {\n        this._observers = new Set();\n        this._observables = new Set();\n        this._onDispose = new Set();\n    }\n\n    subscribe(observer) {\n        this._observers.add(observer);\n        if (observer.observe) {\n            observer.observe(this);\n        }\n    }\n\n    unsubscribe(observer) {\n        this._observers.delete(observer);\n        if (observer.unobserve) {\n            observer.unobserve(this);\n        }\n        if (this._observers.size === 0) {\n            this.dispose();\n        }\n    }\n\n    observe(observable) {\n        this._observables.add(observable);\n    }\n\n    unobserve(observable) {\n        this._observables.delete(observable);\n    }\n\n    _notifyObservers() {\n        this._observers.forEach(observer => {\n            observer.notify();\n        });\n    }\n\n    addOnDispose(f) {\n        this._onDispose.add(f);\n    }\n\n    dispose() {\n        if (this._observers.size === 0) {\n            this._observables.forEach(observable => observable.unsubscribe(this));\n            this._onDispose.forEach(f => f());\n        }\n    }\n}\n\nclass Atom extends Observable {\n    constructor(value) {\n        super();\n        this._value = value;\n        this._id = id++;\n        this._changed = true;\n        this._subject = new Rx.BehaviorSubject(value);\n    }\n\n    subject() {\n        return this._subject;\n    }\n\n    _valueChanged() {\n        if (this._changed) {\n            this._subject.onNext(this._value);\n            this._notifyObservers();\n        }\n    }\n\n    reset(value) {\n        this._changed = this._value !== value;\n        this._value = value;\n        this._valueChanged();\n        return this._value;\n    }\n\n    swap(f, ...args) {\n        const oldValue = this._value;\n        this._value = f(this._value, args);\n        this._changed = this._value !== oldValue;\n        this._valueChanged();\n        return this._value;\n    }\n\n    deref() {\n        this._changed = false;\n        return this._value;\n    }\n\n    map(f) {\n        return makeReaction(() => f(this.deref()));\n    }\n\n    isChanged() {\n        return this._changed;\n    }\n\n    id() {\n        return 'a-' + this._id;\n    }\n}\n\nclass Ratom extends Atom {\n    constructor(value) {\n        super(value);\n    }\n\n    deref() {\n        watchInCtx(this);\n        return super.deref();\n    }\n}\n\nclass Reaction extends Observable {\n    constructor(f) {\n        super();\n        this._f = f;\n        this._dirty = true;\n        this._id = id++;\n        this._changed = true;\n    }\n\n    id() {\n        return 'rx-' + this._id;\n    }\n\n    _run() {\n        this._state = runInCtx(this, this._f);\n        this._dirty = false;\n    }\n\n    deref() {\n        watchInCtx(this);\n        if (this._dirty) {\n            this._run();\n        }\n        this._changed = false;\n        return this._state;\n    }\n\n    notify() {\n        this._dirty = true;\n        const oldState = this._state;\n        this._run();\n        this._changed = oldState !== this._state;\n        if (oldState !== this._state) {\n            this._notifyObservers();\n        }\n    }\n\n    map(f) {\n        return makeReaction(() => f(this.deref()));\n    }\n\n    isChanged() {\n        return this._changed;\n    }\n\n    dispose() {\n        super.dispose();\n        this._dirty = true;\n    }\n}\n\nexport function makeReaction(f) {\n    return new Reaction(f);\n}\n\nexport function makeAtom(value) {\n    return new Atom(value);\n}\n\nexport function makeRatom(value) {\n    return new Ratom(value);\n}\n\nclass RxReaction extends Observable {\n    constructor(rx) {\n        super();\n        this._subj = new Rx.BehaviorSubject();\n        this._rx = rx;\n        if (!this._rx.distinctUntilChanged) {\n            console.trace('no distinct', rx);\n        }\n    }\n\n    id() {\n        return 'rxjs-' + this._id;\n    }\n\n    deref() {\n        if (!this._subscription) {\n            this._subscription = this._rx\n                .distinctUntilChanged(a => a, (a, b) => a === b)\n                .doOnNext(() => {\n                    this._notifyObservers();\n                })\n                .subscribe(this._subj);\n        }\n        const value = this._subj.getValue();\n        return value;\n    }\n\n    map(f) {\n        return makeReaction(() => f(this.deref()));\n    }\n\n    dispose() {\n        super.dispose();\n        this._subscription.dispose();\n        delete this._subscription;\n    }\n\n}\n\nexport function makeRxReaction(rx) {\n    return new RxReaction(rx);\n}\n\nexport function deref(observable, transform) {\n    if (observable instanceof Rx.Observable) {\n        if (transform) {\n            return makeRxReaction(observable).map(transform).deref();\n        }\n        return makeRxReaction(observable).deref();\n    }\n    if (transform) {\n        return observable.map(transform).deref();\n    }\n    return observable.deref();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/ratom.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"rx\",\"commonjs\":\"rx\",\"commonjs2\":\"rx\",\"root\":\"Rx\"}\n ** module id = 7\n ** module chunks = 0\n **/","import * as Immutable from 'immutable';\nimport {registerHandler, getHandler} from 'reframe/registrar';\nimport * as interceptor from 'reframe/interceptor';\n\nconst kind = 'event';\n\nfunction flattenAndRemoveNulls(id, interceptors) {\n    return Immutable.fromJS(interceptors).flatMap(interceptor => {\n        if (Immutable.Map.isMap(interceptor)) {\n            return Immutable.List([interceptor]);\n        } else if (interceptor) {\n            return flattenAndRemoveNulls(id, interceptor);\n        }\n        return Immutable.List();\n    }).filter(Boolean).toList();\n}\n\n\nexport function register(id, interceptors) {\n    return registerHandler(kind, id, flattenAndRemoveNulls(id, interceptors));\n}\n\nlet handling = null;\nexport function handle(event) {\n    const\n        [eventId, ...rest] = event,\n        interceptors = getHandler(kind, eventId, true);\n\n    if (handling) {\n        console.error(\"re-frame: while handling \\\"\", handling, \"\\\", dispatch-sync was called for \\\"\", event, \"\\\". You can't call dispatch-sync within an event handler.\")\n    } else {\n        try {\n            handling = event;\n            return interceptor.execute(event, interceptors);\n        } finally {\n            handling = null;\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/events.js\n **/","import * as Immutable from 'immutable';\nimport {registerHandler, getHandler, clearHandlers} from 'reframe/registrar';\nimport {toInterceptor} from 'reframe/interceptor';\nimport * as router from 'reframe/router';\nimport {appDb} from 'reframe/db';\n\n\nconst kind = 'fx';\n\nfunction register(id, handlerFn) {\n    return registerHandler(kind, id, handlerFn);\n}\n\nexport const doFx = toInterceptor({\n    id: 'do-fx',\n    after: function doFxAfter(ctx) {\n        ctx.get('effects').forEach((value, effect) => {\n            const effectFn = getHandler(kind, effect, true);\n\n            if (effectFn) {\n                effectFn(value);\n            }\n        });\n    }\n});\n\n// Builtin Effect Handlers\n\n/**\n *\n * :dispatch-later\n *\n * `dispatch` one or more events after given delays. Expects a collection\n * of maps with two keys:  :`ms` and `:dispatch`\n *\n * usage:\n *\n *    {:dispatch-later [{:ms 200 :dispatch [:event-id \"param\"]}\n *  in 200ms do this: (dispatch [:event-id \"param\"])\n *                      {:ms 100 :dispatch [:also :this :in :100ms]}]}\n *\n */\nregister('dispatch-later', values => {\n    values.forEach(value => {\n        const\n            ms = value.get(0),\n            dispatch = value.get(1);\n\n        if (!dispatch || !ms >= 0) {\n            console.error('re-frame: ignoring bad \"dispatch-later\" value:', value);\n        } else {\n            setTimeout(() => router.dispatch(dispatch), ms);\n        }\n    });\n});\n\n/**\n * :dispatch\n *\n * `dispatch` one event. Excepts a single vector.\n *\n * usage:\n *   {:dispatch [:event-id \"param\"] }\n */\nregister('dispatch', value => {\n    if (!Immutable.isList(value)) {\n        console.error('re-frame: ignoring bad :dispatch value. Expected a vector, but got:', value);\n    } else {\n        router.dispatch(value);\n    }\n});\n\n/**\n * :dispatch-n\n *\n * `dispatch` more than one event. Expects a list or vector of events. Something for which\n * sequential? returns true.\n *\n * usage:\n *   {:dispatch-n (list [:do :all] [:three :of] [:these])}\n *\n */\nregister('dispatch-n', values => {\n    if (!Immutable.isSeq(values)) {\n        console.error('re-frame: ignoring bad :dispatch-n value. Expected a collection, got got:', values);\n    } else {\n        values.forEach(value => router.dispatch(value));\n    }\n});\n\n/**\n * :deregister-event-handler\n *\n * removes a previously registered event handler. Expects either a single id (\n * typically a keyword), or a seq of ids.\n *\n * usage:\n *   {:deregister-event-handler :my-id)}\n * or:\n *   {:deregister-event-handler [:one-id :another-id]}\n *\n */\nregister('deregister-event-handler', value => {\n    if (Immutable.isSeq(value)) {\n        value.forEach(v => clearHandlers(kind, v));\n    } else {\n        clearHandlers(kind, value);\n    }\n});\n\n/**\n * :db\n *\n * reset! app-db with a new value. Expects a map.\n *\n * usage:\n *   {:db  {:key1 value1 key2 value2}}\n *\n */\nregister('db', value => {\n    appDb.reset(value);\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/fx.js\n **/","import * as Immutable from 'immutable';\nimport {handle} from 'reframe/events';\nimport {nextTick, afterRender} from 'reframe/interop';\n\nconst laterFns = {\n    'flush-dom': (f) => afterRender(() => nextTick(f)),\n    'yield': nextTick\n};\n\nfunction doTrigger(fsm, state, trigger, arg) {\n    /**\n     * if you are in state \":idle\" and a trigger \":add-event\"\n     * happens, then move the FSM to state \":scheduled\" and execute\n     * that two-part \"do\" function.\n     */\n    if (state === 'idle' && trigger === 'add-event') {\n        return ['scheduled', (fsm) => {\n            fsm._addEvent(arg);\n            fsm._runNextTick();\n        }];\n    }\n    /**\n     * State: :scheduled  (the queue is scheduled to run, soon)\n     */\n    else if (state === 'scheduled' && trigger === 'add-event') {\n        return ['scheduled', (fsm) => {\n            fsm._addEvent(arg);\n        }];\n\n    }\n    else if (state === 'scheduled' && trigger === 'run-queue') {\n        return ['running', (fsm) => {\n            fsm._runQueue();\n        }];\n    }\n\n    /**\n     * State: :running (the queue is being processed one event after another)\n     */\n    else if (state === 'running' && trigger === 'add-event') {\n        return ['scheduled', (fsm) => {\n            fsm._addEvent(arg);\n        }];\n    }\n    else if (state === 'running' && trigger === 'pause') {\n        return ['paused', (fsm) => {\n            fsm._pause();\n        }];\n    }\n    else if (state === 'running' && trigger === 'exception') {\n        return ['idle', (fsm) => {\n            fsm._exception(arg);\n        }];\n    }\n    else if (state === 'running' && trigger === 'finish-run') {\n        return fsm._queue.length === 0 ? ['idle'] : ['scheduled', (fsm) => fsm._runNextTick()];\n    }\n    /**\n     * State: :paused (:flush-dom metadata on an event has caused a temporary pause in processing)\n     */\n    else if (state === 'paused' && trigger === 'add-event') {\n        return ['paused', (fsm) => {\n            fsm._addEvent(arg);\n        }];\n    }\n    else if (state === 'paused' && trigger === 'resume') {\n        return ['paused', (fsm) => {\n            fsm._resume(arg);\n        }];\n    } else {\n        throw new Error(\"re-frame: router state transition not found. \" + state + \" \" + trigger)\n    }\n}\n\n\nclass Fsm {\n    constructor() {\n        this._postEventCallbacks = {};\n        this._state = 'idle';\n        this._queue = [];\n    }\n\n    addPostEventCallback(id, callbackFn) {\n        if (this._postEventCallbacks[id]) {\n            console.warn('re-frame: overwriting existing post event call back with id:', id);\n        }\n        this._postEventCallbacks[id] = callbackFn;\n    }\n\n    removePostEventCallback(id) {\n        if (!this._postEventCallbacks[id]) {\n            console.warn('re-frame: could not remove post event call back with id:', id);\n        }\n        delete this._postEventCallbacks[id];\n    }\n\n    trigger(trigger, arg) {\n        const [newState, actionFn] = doTrigger(this, this._state, trigger, arg);\n\n        this._state = newState;\n        if (actionFn) {\n            actionFn(this);\n        }\n    }\n\n    _addEvent(arg) {\n        this._queue.push(arg);\n    }\n\n    _process1stEventInQueue() {\n        const event = this._queue[0];\n        try {\n\n            handle(event);\n            this._queue.shift();\n            this._callPostEventCallbacks(event);\n        } catch (error) {\n            this.trigger(\"exception\", error);\n        }\n    }\n\n    _runNextTick() {\n        nextTick(() => this.trigger(\"run-queue\", null));\n    }\n\n    _runQueue() {\n        for (let i = this._queue.length; i > 0; i--) {\n            // TODO add later-fns\n            this._process1stEventInQueue();\n        }\n        this.trigger('finish-run', null);\n    }\n\n    _exception(ex) {\n        this._queue = [];\n        throw ex;\n    }\n\n    _pause(laterFn) {\n        laterFn(() => this.trigger('resume', null));\n    }\n\n    _callPostEventCallbacks(event) {\n        Object.keys(this._postEventCallbacks).forEach(key => {\n            this._postEventCallbacks[key](event, [...this._queue]);\n        });\n    }\n\n    _resume() {\n        this._process1stEventInQueue();\n        this._runQueue();\n    }\n}\nclass EventQueue {\n    constructor() {\n        this._fsm = new Fsm();\n    }\n\n    push(event) {\n        this._fsm.trigger('add-event', event);\n    }\n\n    addPostEventCallback(id, callbackFn) {\n        this._fsm.addPostEventCallback(id, callbackFn);\n    }\n\n    removePostEventCallback(id) {\n        this._fsm.removePostEventCallback(id);\n    }\n}\n\nconst eventQueue = new EventQueue();\n\n/**\n * Queue the given event for processing by the registered event handler.\n * Just to be clear: the event handler is not run immediately - it is not run\n * synchronously. It will likely be run 'very soon', although it may be\n * added to the end of a FIFO queue which already contain events.\n * Usage:\n *  (dispatch [:delete-item 42])\n */\nexport function dispatch(event) {\n    if (!event) {\n        throw new Error(\"re-frame: you called \\\"dispatch\\\" without an event vector.\")\n    } else {\n        eventQueue.push(event);\n    }\n}\n\n/**\n * Sychronously (immediately!) process the given event using the registered handler.\n * Generally, you shouldn't use this - you should use `dispatch` instead.  It\n * is an error to use `dispatch-sync` within an event handler.\n * Usage:\n *  (dispatch-sync [:delete-item 42])\n */\nexport function dispatchSync(event) {\n    handle(event);\n    eventQueue._fsm._callPostEventCallbacks(event);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/router.js\n **/","import * as batching from 'reframe/batching';\nimport * as ratom from 'reframe/ratom';\nimport * as Immutable from 'immutable';\n\nexport const nextTick = batching.nextTick;\n\nexport function afterRender() {\n    throw new Error('not implemented yet');\n}\n\nexport function reagentId(value) {\n    return value.id();\n}\n\nexport const log = ratom.makeAtom(Immutable.Map({\n    debug: false,\n    traceReact: false,\n    traceSub: false,\n}));\n\nfunction isEnabled(value) {\n    return log.deref().get(value);\n}\nexport function isDebug() {\n    return isEnabled('debug');\n}\n\nexport function isTraceReact() {\n    return isEnabled('traceReact');\n}\n\nexport function toggleLog(name, value) {\n    log.swap(container => container.update(name, old => typeof value !== 'undefined' ? value : !old));\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/interop.js\n **/","\nexport function nextTick(f) {\n    if (requestAnimationFrame) {\n        requestAnimationFrame(f);\n    } else {\n        setTimeout(f, 16);\n    }\n}\n\nfunction runQueue(components) {\n    const s = [...new Set(components)];\n    s.sort((o1, o2) => o1.state.renderOrder - o2.state.renderOrder);\n\n    s.forEach((component) => component.tryForceUpdate());\n}\nclass RenderQueue {\n    constructor() {\n        this._isScheduled = false;\n    }\n\n    enqueue(k, f) {\n        if (!this[k]) {\n            this[k] = [];\n        }\n        this[k].push(f);\n        this.schedule();\n    }\n\n    runFuns(k) {\n        const fns = this[k];\n\n        delete this[k];\n        if (fns) {\n            fns.forEach(f => f());\n        }\n    }\n\n    schedule() {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            nextTick(() => this.runQueues());\n        }\n    }\n\n    queueRender(c) {\n        this.enqueue('componentQueue', c);\n    }\n\n    addBeforeFlush(f) {\n        this.enqueue('beforeFlush', f);\n    }\n\n    addAfterRender(f) {\n        this.enqueue('afterRender', f);\n    }\n\n    runQueues() {\n        this._isScheduled = false;\n        this.flushQueues();\n    }\n\n    flushAfterRender() {\n        this.runFuns('afterRender');\n    }\n\n    flushQueues() {\n        this.runFuns('beforeFlush');\n        // TODO ratom-flush\n        if (this['componentQueue']) {\n            runQueue(this['componentQueue']);\n        }\n        this.flushAfterRender();\n    }\n}\n\nif (!window.__reframe_render_queue) {\n    window.__reframe_render_queue = new RenderQueue();\n}\nconst renderQueue = window.__reframe_render_queue;\n\nexport function flush() {\n    renderQueue.flushQueues();\n}\n\nexport function flushAfterRender() {\n    renderQueue.flushAfterRender();\n}\n\nexport function queueRender(component) {\n    renderQueue.queueRender(component);\n}\n\nexport function doBeforeFlush(f) {\n    renderQueue.addBeforeFlush(f);\n}\n\nexport function doAfterRender(f) {\n    renderQueue.addAfterRender(f);\n}\n\nexport function schedule() {\n    renderQueue.schedule();\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/batching.js\n **/","'use strict';\n\nimport * as subs from 'reframe/subs.js';\nimport * as React from 'react';\nimport {shouldUpdate} from 'reframe/shouldupdate';\nimport * as ratom from 'reframe/ratom';\nimport * as batching from 'reframe/batching';\nimport {isDebug, isTraceReact} from 'reframe/interop';\n\n// export const pause$ = new Rx.BehaviorSubject(true);\n\n// export function deref(rx, transform) {\n//     let ttransform = transform || (a => a);\n//     let subj = new Rx.BehaviorSubject();\n//     rx.map(ttransform).subscribe(subj).dispose();\n//     return subj.getValue();\n// }\n\nlet data = {\n    renderOrder: 0,\n    toUpdate: []\n};\n\nfunction shouldUpdateByDerefed(watching) {\n    for (let watch of watching) {\n        if (watch.shouldUpdate()) {\n            return true;\n        }\n    }\n    return false;\n}\n\n\nexport function render() {\n    data.toUpdate.sort(([o1], [o2]) => o1 - o2);\n\n    data.toUpdate.forEach(([_, forceUpdate]) => forceUpdate());\n    data.toUpdate = [];\n}\n// subs.render$\n//     .pausable(pause$)\n//     .subscribe(render);\n\nexport let StatelessMixin = {\n    shouldComponentUpdate: function (nextProps, nextState) {\n        return shouldUpdate(this.props, nextProps, ['argv', 'ctx']) || shouldUpdate(this.state, nextState) || shouldUpdate(this.props.argv, nextProps.argv);\n    },\n    getDisplayName: function () {\n        return this.constructor.displayName;\n    }\n};\n\nfunction S4() {\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\n// Generate a pseudo-GUID by concatenating random hexadecimal.\nfunction guid() {\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n}\n\nclass MyDeref {\n    constructor(renderCycle, watch) {\n        this._renderCycle = renderCycle;\n        this._watch = watch;\n    }\n\n    shouldDispose(renderCycle) {\n        return renderCycle > this._renderCycle;\n    }\n\n    dispose() {\n        this._watch.dispose();\n    }\n\n    shouldUpdate() {\n        return this._watch.isChanged();\n    }\n}\n\n\nexport let SubscriptionMixin = {\n    derefSub(subVec, transform) {\n        return ratom.deref(subs.subscribe(subVec), transform);\n    },\n    getDisplayName: function () {\n        return this.constructor.displayName;\n    },\n    getInitialState: function () {\n        return {\n            watching: new Set(),\n            renderOrder: data.renderOrder++,\n            renderCycle: 0\n        };\n    },\n    observe: function (watch) {\n        this.state.watching.add(new MyDeref(this.state.renderCycle, watch));\n    },\n    // unobserve: function(observable) {\n    //     this.state.watching.delete(observable);\n    // },\n    notify: function (dispose) {\n        this.traceReact('Notify');\n        batching.queueRender(this);\n    },\n    tryForceUpdate: function () {\n        if (shouldUpdateByDerefed(this.state.watching)) {\n            this.traceReact('Force update');\n            // console.log('Force update', obj.getDisplayName());\n            this.forceUpdate();\n        }\n    },\n    shouldComponentUpdate: function (nextProps, nextState) {\n        let updateByProps = shouldUpdate(this.props, nextProps, ['argv', 'ctx']) || shouldUpdate(this.props.argv, nextProps.argv),\n            updateByState = shouldUpdate(this.state, nextState, ['watching', 'renderOrder', 'renderCycle']);\n\n        return updateByProps || updateByState;\n    },\n    deref: function (rx, aTransform, aId) {\n        return ratom.deref(rx, aTransform);\n    },\n    unsubscribe: function () {\n        this.state.watching.forEach(watch => watch.dispose());\n    },\n    componentWillUpdate: function () {\n        // console.log('Rendering', this.getDisplayName());\n        this.state.renderCycle++;\n        //this.unsubscribe();\n    },\n    componentDidUpdate: function () {\n        for (let watch of this.state.watching) {\n            if (watch.shouldDispose(this.state.renderCycle)) {\n                // watch.dispose();\n                this.state.watching.delete(watch);\n            }\n        }\n    },\n    componentWillUnmount: function () {\n        this.unsubscribe();\n    },\n    traceReact(message) {\n        if (isTraceReact()) {\n            console.debug(message, this.getDisplayName(), {\n                order: this.state.renderOrder,\n                render: this.state.renderCycle,\n                props: this.props, state: this.state\n            });\n        }\n    }\n};\n\nfunction createComponentObj(mixins, args) {\n    let componentObj;\n    switch (args.length) {\n        case 2:\n            if (typeof args[1].prototype === 'undefined') {\n                args[1].mixins = mixins;\n                componentObj = args[1];\n            } else {\n                componentObj = {\n                    mixins: mixins,\n                    render: args[1]\n                };\n            }\n            break;\n        case 3:\n            if (typeof args[2].prototype === 'undefined') {\n                // it's an object\n                args[2].mixins = mixins.concat(args[1]);\n                componentObj = args[2];\n            } else {\n                // it's a render function\n                componentObj = {\n                    mixins: mixins.concat(args[1]),\n                    render: args[2]\n                };\n            }\n            break;\n        default :\n            throw new Error('Expected 2 or 3 arguments, got ' + args.length);\n    }\n    componentObj.displayName = args[0];\n    return componentObj;\n}\n\nfunction propsView(mixin, args) {\n    let componentObj = createComponentObj(mixin, args);\n    let oldRender = componentObj.render;\n    componentObj.render = function () {\n        this.traceReact('Render');\n        return ratom.runInCtx(this, () => oldRender.call(this, this.props));\n    };\n\n    let component = React.createClass(componentObj);\n    let factory = React.createFactory(component);\n    return function (props, context, updater) {\n        return factory(props, context);\n    };\n}\n\nfunction vectorView(mixin, args) {\n    let componentObj = createComponentObj(mixin, args);\n    let oldRender = componentObj.render;\n    componentObj.render = function () {\n        this.traceReact('Render');\n        return ratom.runInCtx(this, () => oldRender.apply(this, this.props.argv));\n    };\n    let component = React.createClass(componentObj);\n    let factory = React.createFactory(component);\n\n    return function () {\n        return factory({argv: Array.prototype.slice.call(arguments)});\n    };\n}\n\nexport function viewP() {\n    return propsView([StatelessMixin], arguments);\n}\n\nexport function viewV() {\n    return vectorView([StatelessMixin], arguments);\n}\n\nexport function viewSP() {\n    return propsView([SubscriptionMixin], arguments);\n}\n\nexport function viewSV() {\n    return vectorView([SubscriptionMixin], arguments);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/react.js\n **/","import * as  Immutable from 'immutable';\nimport * as Rx from 'rx';\nimport {makeAtom, makeReaction, makeRxReaction} from 'reframe/ratom';\nimport {registerHandler, getHandler, clearHandlers} from 'reframe/registrar';\nimport {appDb} from 'reframe/db';\nimport {reagentId} from 'reframe/interop';\n\nexport const kind = 'sub';\n\nlet queryReaction = makeAtom(Immutable.Map());\n\n/**\n * Runs on-dispose for all subscriptions we have in the subscription cache.\n Used to force recreation of new subscriptions. Should only be necessary\n in development.\n The on-dispose functions for the subscriptions will remove themselves from the\n cache.\n Useful when reloading Figwheel code after a React exception, as React components\n aren't cleaned up properly. This means a subscription's on-dispose function isn't\n run when the components are destroyed. If a bad subscription caused your exception,\n then you can't fix it without reloading your browser.\n */\nexport function clearSubscriptionCache() {\n    queryReaction.deref().forEach((reaction) => reaction.dispose());\n\n    if (!queryReaction.deref().isEmpty()) {\n        console.warn(\"Subscription cache should be empty after clearing it.\");\n    }\n}\n\nfunction makeCacheKey(query, dynv) {\n    return Immutable.List([Immutable.List(query), Immutable.List(dynv)]);\n}\n\nexport function clearAllHandlers() {\n    clearHandlers(kind);\n    clearSubscriptionCache();\n}\n\nfunction cacheAndReturn(query, dynv, r) {\n    const cacheKey = makeCacheKey(query, dynv);\n    r.addOnDispose(() => {\n        queryReaction.swap((cache) => cache.delete(cacheKey));\n    });\n\n    queryReaction.swap((cache) => cache.set(cacheKey, r));\n    return r;\n}\n\nfunction cacheLookup(query, dynv = Immutable.List()) {\n    queryReaction.deref().get(makeCacheKey(query, dynv));\n}\n\nexport function subscribe(query, dynv = undefined) {\n    if (typeof dynv === 'undefined') {\n\n        const cached = cacheLookup(query);\n        if (cached) {\n            return cached;\n        }\n\n        const\n            [queryId] = query,\n            handlerFn = getHandler(kind, queryId);\n\n        if (!handlerFn) {\n            console.error(\"re-frame: no subscription handler registered for: \\\"\", queryId, \"\\\". Returning a nil subscription.\");\n        } else {\n            return cacheAndReturn(query, [], handlerFn(appDb, query))\n        }\n    } else {\n        const cached = cacheLookup(query, dynv);\n        if (cached) {\n            return cached;\n        }\n\n        const\n            [queryId] = query,\n            handlerFn = getHandler(kind, queryId);\n\n        if (!handlerFn) {\n            console.error(\"re-frame: no subscription handler registered for: \\\"\", queryId, \"\\\". Returning a nil subscription.\");\n        } else {\n            const\n                dynVals = makeReaction(() => dynv.map(v => v.deref())),\n                sub = makeReaction(() => handlerFn(appDb, dynVals.deref()));\n\n            return cacheAndReturn(query, [], makeReaction(() => sub.deref().deref()));\n        }\n    }\n}\n\nfunction derefInputSignals(signals, queryId) {\n    if (Array.isArray(signals)) {\n        return signals.map(v => v.deref());\n    }\n    else if (Immutable.Map.isMap(signals)) {\n        return signals.map(v => v.deref());\n    }\n    else if (Immutable.Seq.isSeq(signals)) {\n        return signals.map(v => v.deref());\n    }\n    else if (signals && signals.deref) {\n        return signals.deref();\n    } else {\n        console.error(\"re-frame: in the reg-sub for \", query - id, \", the input-signals function returns: \", signals);\n    }\n}\n\nfunction partition(input, spacing) {\n    var output = [];\n\n    for (var i = 0; i < input.length; i += spacing) {\n        output[output.length] = input.slice(i, i + spacing);\n    }\n\n    return output;\n}\n\nfunction makeMultiInputPairsFn(inputArgs) {\n    const\n        pairs = partition(inputArgs, 2),\n        vecs = pairs.map(p => p[1]);\n\n    return function inpFn() {\n        return vecs.map(subscribe);\n    };\n}\n\nfunction makeInputsFn(inputArgs) {\n    switch (inputArgs.length) {\n        // no `inputs` function provided - give the default\n        case 0:\n            return () => appDb;\n\n        // a single `inputs` fn\n        case 1:\n            return inputArgs[0];\n\n        // one sugar pair\n        case 2:\n            return function inpFn() {\n                return subscribe(inputArgs[1]);\n            };\n\n        // multiple sugar pairs\n        default:\n            return makeMultiInputPairsFn(inputArgs);\n\n    }\n}\n\nfunction checkRx(reaction) {\n    if (reaction instanceof Rx.Observable) {\n        return makeRxReaction(reaction);\n    }\n    return reaction;\n}\n\nexport function regSub(queryId, ...args) {\n    const\n        computationFn = args[args.length - 1],\n        inputArgs = args.slice(0, args.length - 1),\n        errHeader = \"re-frame: reg-sub for \" + queryId + \", \",\n        inputsFn = makeInputsFn(inputArgs);\n\n    return registerHandler(kind, queryId, function subsHandlerFn(db, queryVec, dynVec = undefined) {\n        if (typeof  dynVec === 'undefined') {\n            const\n                subscriptions = inputsFn(queryVec),\n                reaction = makeReaction(() => computationFn(derefInputSignals(subscriptions, queryId), queryVec));\n\n            return reaction;\n        } else {\n            const\n                subscriptions = inputsFn(queryVec, dynVec),\n                reaction = makeReaction(() => computationFn(derefInputSignals(subscriptions, queryId), queryVec, dynVec));\n\n            return reaction;\n        }\n    });\n}\n\nexport function registerSub(queryId, computationFn) {\n    return registerHandler(kind, queryId, function subsRxHandlerFn(db, queryVec, dynVec = undefined) {\n        return makeRxReaction(computationFn(db.subject(), queryVec));\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/subs.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}\n ** module id = 15\n ** module chunks = 0\n **/","'use strict';\nimport {isImmutable, isPrimitive} from 'reframe/utils';\n\n/**\n * If props does not exist return false - Pure render mixin. If props exists and it contains mutable entries,\n * return false. If props contains only immutable entries compare them by type.\n *\n * @param {object} props current props\n * @param {object} nextProps new props\n * @param {array} ignore ignore these keys\n * @returns {boolean} true if component should be rerendered\n */\nexport function shouldUpdate(props, nextProps, ignore) {\n    let entries;\n    if (nextProps === props || nextProps.length !== props.length) {\n        return false;\n    }\n    if (ignore && ignore.length > 0) {\n        entries = Object.keys(props)\n            .filter(k => ignore.indexOf(k) === -1)\n            .map(k => [props[k], nextProps[k]]);\n    } else {\n        entries = Object.keys(props).map(k => [props[k], nextProps[k]]);\n    }\n\n    if (entries.length) {\n        return !entries.every(function ([value, nextValue]) {\n            if ((isPrimitive(value) && isPrimitive(nextValue))\n                ||\n                (isImmutable(value) && isImmutable(nextValue))) {\n\n                return value === nextValue;\n            }\n            return false;\n        });\n    }\n    return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/shouldupdate.js\n **/","import * as Immutable from 'immutable';\n\nexport function isImmutable(maybeImmutable) {\n    return Immutable.Iterable.isIterable(maybeImmutable);\n}\n\nexport function isPrimitive(value) {\n    var type = typeof value;\n    return type === 'number' || type === 'boolean' || type === 'string' || value === null || value === void 0;\n}\n\nexport function isFunction(obj) {\n    return typeof obj === 'function';\n}\n\nexport function isObject(obj) {\n    return typeof obj === 'object';\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/utils.js\n **/","import {toInterceptor, getEffect, getCoeffect, assocEffect, assocCoeffect, nextInterceptor} from 'reframe/interceptor';\nimport immutablediff from 'immutablediff';\nimport * as Immutable from 'immutable';\n\nexport const debug = toInterceptor({\n    id: 'debug',\n    before: function debugBefore(ctx) {\n        console.log('Handling re-frame event:', getCoeffect(ctx, 'event'));\n        return ctx;\n    },\n    after: function debugAfter(ctx) {\n        const\n            event = getCoeffect(ctx, 'event'),\n            origDb = getCoeffect(ctx, 'db'),\n            newDb = getEffect(ctx, 'db', 'not-found');\n\n        if (newDb === 'not-found') {\n            console.log('No :db changes caused by:', event);\n        } else {\n            const diff = immutablediff(origDb, newDb);\n            if (diff.length === 0) {\n                console.log('No :db changes caused by:', event);\n            } else {\n                console.groupCollapsed('db diff for: ', event);\n                try {\n                    diff.forEach(df => {\n                        console.log(df.get('op'), df.get('path'), df.get('value'));\n                    });\n                } finally {\n                    console.groupEnd();\n                }\n            }\n        }\n\n        return ctx;\n    }\n});\n\nexport const trimv = toInterceptor({\n    id: 'trim-v',\n    before: function trimvBefore(ctx) {\n        return ctx\n            .updateIn(['coeffects', 'event'], event => event.slice(1))\n            .setIn(['coeffects', 'untrimmed-event'], getCoeffect(ctx, 'event'));\n    },\n    after: function trimvAfter(ctx) {\n        return ctx\n            .deleteIn(['coeffects', 'untrimmed-event'])\n            .setIn(['coeffects', 'event'], getCoeffect(ctx, 'untrimmed-event'));\n    }\n});\n\n// Interceptor Factories - PART 1\n\n/**\n * Returns an interceptor which wraps the kind of event handler given to `reg-event-db`.\n * These handlers take two arguments;  `db` and `event`, and they return `db`.\n * (fn [db event]\n * ....)\n * So, the interceptor wraps the given handler:\n * 1. extracts two `:coeffects` keys: db and event\n * 2. calls handler-fn\n * 3. stores the db result back into context's `:effects`\n * @param db\n * @param event\n */\nexport function dbHandlerToInterceptor(handlerFn) {\n    return toInterceptor({\n        id: 'db-handler',\n        before: function dbHandlerBefore(ctx) {\n            const\n                db = getCoeffect(ctx, 'db'),\n                event = getCoeffect(ctx, 'event');\n\n            return assocEffect(ctx, 'db', handlerFn(db, event));\n        }\n    });\n}\n\n/**\n * Returns an interceptor which wraps the kind of event handler given to `reg-event-fx`.\n * These handlers take two arguments;  `coeffects` and `event`, and they return `effects`.\n * (fn [coeffects event]\n * {:db ...\n *  :dispatch ...})\n * Wrap handler in an interceptor so it can be added to (the RHS) of a chain:\n * 1. extracts `:coeffects`\n * 2. call handler-fn giving coeffects\n * 3. stores the result back into the `:effects`\n */\nexport function fxHandlerToInterceptor(handlerFn) {\n    return toInterceptor({\n        id: 'fx-handler',\n        before: function fxHandlerBefore(ctx) {\n            const event = getCoeffect(ctx, 'event');\n            return ctx.set('effects', handlerFn(ctx.get('coeffects'), event));\n        }\n    });\n}\n\n/**\n * Returns an interceptor which wraps the kind of event handler given to `reg-event-ctx`.\n * These advanced handlers take one argument: `context` and they return a modified `context`.\n * Example:\n * (fn [context]\n * (enqueue context [more interceptors]))\n */\nexport function ctxHandlerToInterceptor(handlerFn) {\n    return toInterceptor({\n        id: 'ctx-handler',\n        before: handlerFn\n    });\n}\n\n// Interceptors Factories -  PART 2\n\n/**\n * An interceptor factory which supplies a sub-path of `:db` to the handler.\n * It's action is somewhat analogous to `update-in`. It grafts the return\n * value from the handler back into db.\n * Usage:\n * (path :some :path)\n * (path [:some :path])\n * (path [:some :path] :to :here)\n * (path [:some :path] [:to] :here)\n * Notes:\n * 1. cater for `path` appearing more than once in an interceptor chain.\n * 2. `:effects` may not contain `:db` effect. Which means no change to\n * `:db` should be made.\n */\nexport function path(path) {\n    const dbStoreKey = 'reframe-path/db-store';\n    return toInterceptor({\n        id: 'path',\n        before: function pathBefore(ctx) {\n            const originalDb = getCoeffect(ctx, 'db');\n\n            ctx = ctx.update(dbStoreKey, Immutable.List(), old => old.push(originalDb));\n            ctx = assocCoeffect(ctx, 'db', originalDb.getIn(path, Immutable.Map()));\n            return ctx;\n        },\n        after: function pathAfter(ctx) {\n            const\n                dbStore = ctx.get(dbStoreKey),\n                originalDb = dbStore.last(),\n                newDbStore = dbStore.pop(),\n                ctx1 = assocCoeffect(ctx.set(dbStoreKey, newDbStore), 'db', originalDb),\n                db = getEffect(ctx, 'db', 'not-found');\n\n            if (db === 'not-found') {\n                return ctx1;\n            } else {\n                return assocEffect(ctx1, 'db', originalDb.setIn(path, db));\n            }\n        }\n    });\n}\n\n/**\n * Interceptor factory which runs the given function `f` in the `after handler`\n * position.  `f` is called with two arguments: `db` and `v`, and is expected to\n * return a modified `db`.\n * Unlike the `after` inteceptor which is only about side effects, `enrich`\n * expects `f` to process and alter the given `db` coeffect in some useful way,\n * contributing to the derived data, flowing vibe.\n * Example Use:\n * ------------\n * Imagine that todomvc needed to do duplicate detection - if any two todos had\n * the same text, then highlight their background, and report them in a warning\n * down the bottom of the panel.\n * Almost any user action (edit text, add new todo, remove a todo) requires a\n * complete reassesment of duplication errors and warnings. Eg: that edit\n * just made might have introduced a new duplicate, or removed one. Same with\n * any todo removal. So we need to re-calculate warnings after any CRUD events\n * associated with the todos list.\n * Unless we are careful, we might end up coding subtly different checks\n * for each kind of CRUD operation.  The duplicates check made after\n * 'delete todo' event might be subtly different to that done after an\n * eddting operation. Nice and efficient, but fiddly. A bug generator\n * approach.\n * So, instead, we create an `f` which recalcualtes warnings from scratch\n * every time there is ANY change. It will inspect all the todos, and\n * reset ALL FLAGS every time (overwriting what was there previously)\n * and fully recalculate the list of duplicates (displayed at the bottom?).\n * By applying `f` in an `:enrich` interceptor, after every CRUD event,\n * we keep the handlers simple and yet we ensure this important step\n * (of getting warnings right) is not missed on any change.\n * We can test `f` easily - it is a pure fucntions - independently of\n * any CRUD operation.\n * This brings huge simplicity at the expense of some re-computation\n * each time. This may be a very satisfactory tradeoff in many cases.\n */\nexport function enrich(f) {\n    return toInterceptor({\n        id: 'enrich',\n        after: function enrichAfter(ctx) {\n            const\n                event = getCoeffect(ctx, 'event'),\n                db = getEffect(ctx, 'db') || getCoeffect(ctx, 'db');\n\n            return assocEffect(ctx, 'db', f(db, event, getCoeffect(ctx, 'db')));\n        }\n    });\n}\n\n/**\n * Interceptor factory which runs a given function `f` in the \\\"after\\\"\n * position, presumably for side effects.\n * `f` is called with two arguments: the `effects` value of `:db`\n * (or the `coeffect` value of db if no db effect is returned) and the event.\n * Its return value is ignored so `f` can only side-effect.\n * Example use:\n * - `f` runs schema validation (reporting any errors found)\n * - `f` writes some aspect of db to localstorage.\n *\n */\nexport function after(f) {\n    return toInterceptor({\n        id: 'after',\n        after: function afterAfter(ctx) {\n            const\n                event = getCoeffect(ctx, 'event'),\n                db = getEffect(ctx, 'db') || getCoeffect(ctx, 'db');\n            f(db, event, getCoeffect(ctx, 'db'));\n            return ctx;\n        }\n    });\n}\n\n/**\n * Interceptor factory which acts a bit like `reaction`  (but it flows into `db`, rather than out)\n * It observes N paths in `db` and if any of them test not indentical? to their previous value\n * (as a result of a handler being run) then it runs `f` to compute a new value, which is\n * then assoced into the given `out-path` within `db`.\n * Usage:\n * (defn my-f\n * [a-val b-val]\n * ... some computation on a and b in here)\n * (on-changes my-f [:c]  [:a] [:b])\n * Put this Interceptor on the right handlers (ones which might change :a or :b).\n * It will:\n * - call `f` each time the value at path [:a] or [:b] changes\n * - call `f` with the values extracted from [:a] [:b]\n * - assoc the return value from `f` into the path  [:c]\n */\nexport function onChanges(f, outPath, ...inPaths) {\n    return toInterceptor({\n        id: 'on-changes',\n        after: function onChangesAfter(ctx) {\n            const\n                oldDb = getCoeffect(ctx, 'db'),\n                newDb = getEffect(ctx, 'db'),\n                newIns = inPaths.map(path => newDb.getIn(path)),\n                oldIns = inPaths.map(path => oldDb.getIn(path)),\n                changedIns = newIns.zip(oldIns).map(([a, b]) => a === b).contains(false);\n\n            if (changedIns) {\n                return assocEffect(ctx, 'db', newDb.setIn(outPath, f(newIns)));\n            }\n            return ctx;\n\n\n            return ctx;\n        }\n    });\n}\n\nexport function when(booleanProvider, interceptor) {\n    return toInterceptor({\n        id: 'when',\n        before: function whenBefore(ctx) {\n            if (booleanProvider()) {\n                return nextInterceptor(ctx, interceptor);\n            }\n            return ctx;\n        }\n    })\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/stdinterceptors.js\n **/","'use strict';\n\nvar Immutable = require('immutable');\nvar utils = require('./utils');\nvar lcs = require('./lcs');\nvar path = require('./path');\nvar concatPath = path.concat,\n                  escape = path.escape,\n                  op = utils.op,\n                  isMap = utils.isMap,\n                  isIndexed = utils.isIndexed;\n\nvar mapDiff = function(a, b, p){\n  var ops = [];\n  var path = p || '';\n\n  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n\n  var areLists = isIndexed(a) && isIndexed(b);\n  var lastKey = null;\n  var removeKey = null\n\n  if(a.forEach){\n    a.forEach(function(aValue, aKey){\n      if(b.has(aKey)){\n        if(isMap(aValue) && isMap(b.get(aKey))){\n          ops = ops.concat(mapDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n        }\n        else if(isIndexed(b.get(aKey)) && isIndexed(aValue)){\n          ops = ops.concat(sequenceDiff(aValue, b.get(aKey), concatPath(path, escape(aKey))));\n        }\n        else {\n          var bValue = b.get ? b.get(aKey) : b;\n          var areDifferentValues = (aValue !== bValue);\n          if (areDifferentValues) {\n            ops.push(op('replace', concatPath(path, escape(aKey)), bValue));\n          }\n        }\n      }\n      else {\n        if(areLists){\n          removeKey = (lastKey != null && (lastKey+1) === aKey) ? removeKey : aKey;\n          ops.push( op('remove', concatPath(path, escape(removeKey))) );\n          lastKey = aKey;\n        }\n        else{\n          ops.push( op('remove', concatPath(path, escape(aKey))) );\n        }\n\n      }\n    });\n  }\n\n  b.forEach(function(bValue, bKey){\n    if(a.has && !a.has(bKey)){\n      ops.push( op('add', concatPath(path, escape(bKey)), bValue) );\n    }\n  });\n\n  return ops;\n};\n\nvar sequenceDiff = function (a, b, p) {\n  var ops = [];\n  var path = p || '';\n  if(Immutable.is(a, b) || (a == b == null)){ return ops; }\n  if((a.count() + 1) * (b.count() + 1) >= 10000 ) { return mapDiff(a, b, p); }\n\n  var lcsDiff = lcs.diff(a, b);\n\n  var pathIndex = 0;\n\n  lcsDiff.forEach(function (diff) {\n    if(diff.op === '='){ pathIndex++; }\n    else if(diff.op === '!='){\n      if(isMap(diff.val) && isMap(diff.newVal)){\n        var mapDiffs = mapDiff(diff.val, diff.newVal, concatPath(path, pathIndex));\n        ops = ops.concat(mapDiffs);\n      }\n      else{\n        ops.push(op('replace', concatPath(path, pathIndex), diff.newVal));\n      }\n      pathIndex++;\n    }\n    else if(diff.op === '+'){\n      ops.push(op('add', concatPath(path, pathIndex), diff.val));\n      pathIndex++;\n    }\n    else if(diff.op === '-'){ ops.push(op('remove', concatPath(path, pathIndex))); }\n  });\n\n  return ops;\n};\n\nvar primitiveTypeDiff = function (a, b, p) {\n  var path = p || '';\n  if(a === b){ return []; }\n  else{\n    return [ op('replace', concatPath(path, ''), b) ];\n  }\n};\n\nvar diff = function(a, b, p){\n  if(Immutable.is(a, b)){ return Immutable.List(); }\n  if(a != b && (a == null || b == null)){ return Immutable.fromJS([op('replace', '/', b)]); }\n  if(isIndexed(a) && isIndexed(b)){\n    return Immutable.fromJS(sequenceDiff(a, b));\n  }\n  else if(isMap(a) && isMap(b)){\n    return Immutable.fromJS(mapDiff(a, b));\n  }\n  else{\n    return Immutable.fromJS(primitiveTypeDiff(a, b, p));\n  }\n};\n\nmodule.exports = diff;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/diff.js\n ** module id = 19\n ** module chunks = 0\n **/","'use strict';\n\nvar Immutable = require('immutable');\n\nvar isMap = function(obj){ return Immutable.Iterable.isKeyed(obj); };\nvar isIndexed = function(obj) { return Immutable.Iterable.isIndexed(obj); };\n\nvar op = function(operation, path, value){\n  if(operation === 'remove') { return { op: operation, path: path }; }\n\n  return { op: operation, path: path, value: value };\n};\n\nmodule.exports = {\n  isMap: isMap,\n  isIndexed: isIndexed,\n  op: op\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/utils.js\n ** module id = 20\n ** module chunks = 0\n **/","'use strict';\n\nvar Immutable = require('immutable');\n\n/**\n * Returns a two-dimensional array (an array of arrays) with dimensions n by m.\n * All the elements of this new matrix are initially equal to x\n * @param n number of rows\n * @param m number of columns\n * @param x initial element for every item in matrix\n */\nvar makeMatrix = function(n, m, x){\n  var matrix = [];\n  for(var i = 0; i < n; i++) {\n    matrix[i] = new Array(m);\n\n    if(x != null){\n      for(var j = 0; j < m; j++){\n        matrix[i][j] = x;\n      }\n    }\n  }\n\n  return matrix;\n};\n\n/**\n * Computes Longest Common Subsequence between two Immutable.JS Indexed Iterables\n * Based on Dynamic Programming http://rosettacode.org/wiki/Longest_common_subsequence#Java\n * @param xs ImmutableJS Indexed Sequence 1\n * @param ys ImmutableJS Indexed Sequence 2\n */\nvar lcs = function(xs, ys){\n  var matrix = computeLcsMatrix(xs, ys);\n\n  return backtrackLcs(xs, ys, matrix);\n};\n\nvar DiffResult = Immutable.Record({op: '=', val: null});\nvar ReplaceResult = Immutable.Record({op: '!=', val: null, newVal: null});\n\n/**\n * Returns the resulting diff operations of LCS between two sequences\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n * @returns Array of DiffResult {op:'=' | '+' | '-', val:any}\n */\nvar diff = function(xs, ys){\n  var matrix = computeLcsMatrix(xs, ys);\n\n  return printDiff(matrix, xs, ys, xs.size||0, ys.size||0);\n};\n\nvar printDiff = function(matrix, xs, ys, xSize, ySize) {\n  var diffArray = [];\n  var i = xSize - 1;\n  var j = ySize - 1;\n  while (i >= 0 || j >= 0) {\n    if (i >= 0 && j >= 0 && Immutable.is(xs.get(i), ys.get(j))) {\n      diffArray.push(new DiffResult({\n        op: '=',\n        val: xs.get(i)\n      }));\n      i -= 1;\n      j -= 1;\n    }\n    else if (i >= 0 && j >= 0 && i === j && !Immutable.is(xs.get(i), ys.get(j))) {\n      diffArray.push(new ReplaceResult({\n      val: xs.get(i),\n      newVal: ys.get(i)\n      }));\n      i -= 1;\n      j -= 1;\n    }\n    else {\n      if (j >= 0 && (i === -1 || matrix[i+1][j] >= matrix[i][j+1])) {\n        diffArray.push(new DiffResult({\n          op: '+',\n          val: ys.get(j)\n        }));\n        j -= 1;\n      }\n      else if (i >= 0 && (j === -1 || matrix[i+1][j] < matrix[i][j+1])){\n        diffArray.push(new DiffResult({\n          op: '-',\n          val: xs.get(i)\n        }));\n        i -= 1;\n      }\n    }\n  }\n  return diffArray.reverse();\n};\n\n/**\n * Computes the Longest Common Subsequence table\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n */\nfunction computeLcsMatrix(xs, ys) {\n  var n = xs.size||0;\n  var m = ys.size||0;\n  var a = makeMatrix(n + 1, m + 1, 0);\n\n  for (var i = 0; i < n; i++) {\n    for (var j = 0; j < m; j++) {\n      if (Immutable.is(xs.get(i), ys.get(j))) {\n        a[i + 1][j + 1] = a[i][j] + 1;\n      }\n      else {\n        a[i + 1][j + 1] = Math.max(a[i + 1][j], a[i][j + 1]);\n      }\n    }\n  }\n\n  return a;\n}\n\n/**\n * Extracts a LCS from matrix M\n * @param xs Indexed Sequence 1\n * @param ys Indexed Sequence 2\n * @param matrix LCS Matrix\n * @returns {Array.<T>} Longest Common Subsequence\n */\nvar backtrackLcs = function(xs, ys, matrix){\n  var lcs = [];\n  for(var i = xs.size, j = ys.size; i !== 0 && j !== 0;){\n    if (matrix[i][j] === matrix[i-1][j]){ i--; }\n    else if (matrix[i][j] === matrix[i][j-1]){ j--; }\n    else{\n      if(Immutable.is(xs.get(i-1), ys.get(j-1))){\n        lcs.push(xs.get(i-1));\n        i--;\n        j--;\n      }\n    }\n  }\n  return lcs.reverse();\n};\n\nmodule.exports = {\n  lcs: lcs,\n  computeLcsMatrix: computeLcsMatrix,\n  diff: diff\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/lcs.js\n ** module id = 21\n ** module chunks = 0\n **/","'use strict';\n\nvar slashRe = new RegExp('/', 'g');\nvar escapedSlashRe = new RegExp('~1', 'g');\nvar tildeRe = /~/g;\nvar escapedTildeRe = /~0/g;\n\nvar Path = {\n  escape: function (str) {\n    if(typeof(str) === 'number'){\n      return str.toString();\n    }\n    if(typeof(str) !== 'string'){\n      throw 'param str (' + str + ') is not a string';\n    }\n\n    return str.replace(tildeRe, '~0').replace(slashRe, '~1');\n  },\n\n  unescape: function (str) {\n    if(typeof(str) == 'string') {\n      return str.replace(escapedSlashRe, '/').replace(escapedTildeRe, '~');\n    }\n    else {\n      return str;\n    }\n  },\n  concat: function(path, key){\n    return path + '/' + key;\n  }\n};\n\nmodule.exports = Path;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutablediff/src/path.js\n ** module id = 22\n ** module chunks = 0\n **/","'use strict';\nimport * as Immutable from 'immutable';\nimport * as Rx from 'rx';\nconst LISTENER_SENTINEL = {};\n\nexport class Index {\n    constructor(rx) {\n        this.listeners = Immutable.Map();\n        this.rx = rx;\n    }\n\n    sub(path, def) {\n        const self = this;\n\n        let slices = [];\n        for (let i = 0; i < path.length; i++) {\n            slices.push(Array.prototype.slice.call(path.slice(0, i + 1)));\n        }\n        this.listeners = slices.reduce(\n            (acc, pathSlice) => {\n                let parentPath = pathSlice.slice(0, pathSlice.length - 1);\n                let parentRx = parentPath.length === 0 ? this.rx() : acc.getIn(parentPath.concat(LISTENER_SENTINEL));\n                let lastFragment = pathSlice[pathSlice.length - 1];\n                return acc.updateIn(pathSlice.concat(LISTENER_SENTINEL), old => {\n                    if (old) {\n                        return old;\n                    }\n                    const subject = parentRx\n                        .map(a => {\n                            if (a && a.get) {\n                                return a.get(lastFragment);\n                            }\n                        })\n                        .distinctUntilChanged(x => x, (x, y) => x === y)\n                        .shareReplay(1);\n                    let oldSubscribe = subject.subscribe;\n                    subject.subscribe = function () {\n                        const sub = oldSubscribe.apply(this, arguments),\n                            s = this;\n\n                        return Rx.Disposable.create(function () {\n                            sub.dispose();\n                            if (s._count === 0) {\n                                self.listeners = self.listeners.removeIn(pathSlice);\n                            }\n                        });\n                    };\n                    return subject;\n                });\n            },\n            this.listeners\n        );\n\n        return this.listeners.getIn(path.concat([LISTENER_SENTINEL])).map(a => typeof a !== 'undefined' ? a : def);\n    }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main/js1/reframe/subindex.js\n **/"],"sourceRoot":""}