!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Rx"),require("Immutable"),require("React")):"function"==typeof define&&define.amd?define(["Rx","Immutable","React"],t):"object"==typeof exports?exports.reframe=t(require("Rx"),require("Immutable"),require("React")):e.reframe=t(e.Rx,e.Immutable,e.React)}(this,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/js/",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(7),i=r(o),s=n(2),u=r(s),a=n(3),c=r(a),f=n(6),p=r(f),l=n(8),d=r(l);e.exports.registerHandler=i.registerHandler,e.exports.dispatch=i.dispatch,e.exports.dispatchSync=i.dispatchSync,e.exports.registerSub=u.registerSub,e.exports.subscribe=u.subscribe,e.exports.indexPath=u.indexPath,e.exports.db$=c.db$,e.exports.ReframeMixin=d.ReframeMixin,e.exports.viewP=d.viewP,e.exports.viewV=d.viewV,e.exports.viewSP=d.viewSP,e.exports.viewSV=d.viewSV,e.exports.view=d.viewSV,e.exports.deref=d.deref,e.exports.atom=p.atom,e.exports.swap=p.swap},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){m.register(e,t)}function i(e){var t=m.lookup(e[0]);return t(h,e)}function s(e,t){return b.sub(e,t)}var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(a){o=!0,i=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.render$=t.sync$=t.animationFrame$=void 0,t.registerSub=o,t.subscribe=i,t.indexPath=s;var a=n(11),c=r(a),f=n(4),p=n(10),l=t.animationFrame$=new c.Subject,d=t.sync$=new c.Subject,h=new c.BehaviorSubject,v=t.render$=new c.Subject;c.Observable.merge(l.throttleLatest(1/60,c.Scheduler.requestAnimationFrame),d).scan(function(e,t){var n=u(e,2),r=n[0],o=n[1],i=u(t,2),s=i[0],a=i[1];return s>r?[s,a]:[r,o]},[-1,null]).map(function(e){var t=u(e,2),n=(t[0],t[1]);return n}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).doOnNext(function(e){h.onNext(e),v.onNext(!0)}).subscribe();var m=new f.Dispatcher,b=new p.Index(function(){return h})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.db$=void 0;var o=n(1),i=r(o);t.db$=new i.BehaviorSubject},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.Dispatcher=function(){function e(){n(this,e),this.map={}}return r(e,[{key:"register",value:function(e,t){if(this.map[e])throw new Error(e+"handler is already registered");this.map[e]=t}},{key:"lookup",value:function(e){return this.map[e]}}]),e}()},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return new u.BehaviorSubject(e)}function i(e,t){e.onNext(t(e.getValue()))}Object.defineProperty(t,"__esModule",{value:!0}),t.atom=o,t.swap=i;var s=n(1),u=r(s)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(){var e=void 0,t=void 0,n=void 0;switch(arguments.length){case 2:e=arguments[0],t=function(e){return e},n=arguments[1];break;case 3:e=arguments[0],t=Array.isArray(arguments[1])?u(arguments[1]):arguments[1],n=arguments[2];break;default:throw new Error("Expected 2 or 3 arguments, got "+arguments.length)}m.register(e,t(n))}function i(e){b.onNext([!1,e])}function s(e){b.onNext([!0,e])}function u(e){return function(t){var n=e.reverse().filter(function(e){return e}).reduce(function(e,t){return t(e)},t);return n}}var a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(a){o=!0,i=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.registerHandler=o,t.dispatch=i,t.dispatchSync=s,t.compMiddleware=u;var c=n(3),f=n(1),p=r(f),l=n(2),d=n(4),h=n(5),v=r(h),m=new d.Dispatcher,b=new p.Subject;b.scan(function(e,t){var n=a(e,2),r=n[0],o=n[1],i=a(t,2),s=i[0],u=i[1],f=m.lookup(u[0]),p=f(o,u);return p!==o?(c.db$.onNext(p),s?l.sync$.onNext([r,p]):l.animationFrame$.onNext([r,p]),[r+1,p]):[r,o]},[0,v.Map()]).subscribe()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){var n=t||function(e){return e},r=new g.BehaviorSubject;return e.map(n).subscribe(r).dispose(),r.getValue()}function i(e){return e.map(function(e){var t=v(e,2),n=t[0],r=t[1];return n.getValue()!==r}).reduce(function(e,t){return e||t},!1)}function s(e){E.toUpdate.push([e.state.renderOrder,function(){i(e.state.derefed)&&e.forceUpdate()}])}function u(){E.toUpdate.sort(function(e,t){var n=v(e,1),r=n[0],o=v(t,1),i=o[0];return r-i}),E.toUpdate.forEach(function(e){var t=v(e,2),n=(t[0],t[1]);return n()}),E.toUpdate=[]}function a(e,t){var n=void 0;switch(t.length){case 2:"undefined"==typeof t[1].prototype?(t[1].mixins=e,n=t[1]):n={mixins:e,render:t[1]};break;case 3:"undefined"==typeof t[2].prototype?(t[2].mixins=e.concat(t[1]),n=t[2]):n={mixins:e.concat(t[1]),render:t[2]};break;default:throw new Error("Expected 2 or 3 arguments, got "+t.length)}return n.displayName=t[0],n}function c(e,t){var n=a(e,t),r=n.render;n.render=function(){return r.call(this,this.props)};var o=_.createClass(n);return _.createFactory(o)}function f(e,t){var n=a(e,t),r=n.render;n.render=function(){return r.apply(this,this.props.argv)};var o=_.createClass(n),i=_.createFactory(o);return function(){return i({argv:Array.prototype.slice.call(arguments)})}}function p(){return c([O],arguments)}function l(){return f([O],arguments)}function d(){return c([S],arguments)}function h(){return f([S],arguments)}var v=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(a){o=!0,i=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionMixin=t.StatelessMixin=void 0,t.deref=o,t.render=u,t.viewP=p,t.viewV=l,t.viewSP=d,t.viewSV=h;var m=n(2),b=r(m),y=n(13),_=r(y),w=n(1),g=r(w),x=n(9),E={renderOrder:0,toUpdate:[]};b.render$.subscribe(u),window.render=u;var O=t.StatelessMixin={shouldComponentUpdate:function(e,t){return(0,x.shouldUpdate)(this.props,e,["argv"])||(0,x.shouldUpdate)(this.state,t)||(0,x.shouldUpdate)(this.props.argv,e.argv)},getDisplayName:function(){return this.constructor.displayName}},S=t.SubscriptionMixin={derefSub:function(e){return this.deref(b.subscribe(e))},getDisplayName:function(){return this.constructor.displayName},getInitialState:function(){return{derefed:[],renderOrder:E.renderOrder++}},shouldComponentUpdate:function(e,t){var n=(0,x.shouldUpdate)(this.props,e,["argv"])||(0,x.shouldUpdate)(this.props.argv,e.argv),r=(0,x.shouldUpdate)(this.state,t,["derefed","renderOrder"]);return n||r},deref:function(e,t){var n=this,r=t||function(e){return e},o=new g.ReplaySubject(1),i=new g.BehaviorSubject,u=new g.CompositeDisposable(e.distinctUntilChanged(function(e){return e},function(e,t){return e===t}).map(r).subscribe(o),o.subscribe(i),o.skip(1).subscribe(function(){s(n)}));return this.state.derefed.push([i,i.getValue(),u]),i.getValue()},unsubscribe:function(){this.state.derefed.forEach(function(e){var t=v(e,3),n=(t[0],t[1],t[2]);n.dispose()}),this.state.derefed=[]},componentWillUpdate:function(){this.unsubscribe()},componentWillUnmount:function(){this.unsubscribe()}}},function(e,t){"use strict";function n(e,t,n){var i=void 0;return t===e||t.length!==e.length?!1:(i=n&&n.length>0?Object.keys(e).filter(function(e){return n.indexOf(e)>=0}).map(function(n){return[e[n],t[n]]}):Object.keys(e).map(function(n){return[e[n],t[n]]}),i.length?!i.every(function(e){var t=s(e,2),n=t[0],i=t[1];return o(n)&&o(i)||r(n)&&r(i)?n===i:!1}):!1)}function r(e){return Immutable.Iterable.isIterable(e)}function o(e){var t="undefined"==typeof e?"undefined":i(e);return"number"===t||"boolean"===t||"string"===t||null===e||void 0===e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(a){o=!0,i=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdate=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0;var s=n(5),u=r(s),a=n(1),c=r(a),f={};t.Index=function(){function e(t){o(this,e),this.listeners=u.Map(),this.rx=t}return i(e,[{key:"sub",value:function(e,t){for(var n=this,r=this,o=[],i=0;i<e.length;i++)o.push(Array.prototype.slice.call(e.slice(0,i+1)));return this.listeners=o.reduce(function(e,o){var i=o.slice(0,o.length-1),s=0===i.length?n.rx():e.getIn(i.concat(f)),u=o[o.length-1];return e.updateIn(o.concat(f),function(e){if(e)return e;var n=new c.ReplaySubject(1),i=s.map(function(e){return e&&e.get?e.get(u,t):t}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).subscribe(n),a=n.subscribe;return n.subscribe=function(){var e=a.apply(this,arguments);return c.Disposable.create(function(){e.dispose(),n.hasObservers()||(i.dispose(),r.listeners=r.listeners.removeIn(o))})},n})},this.listeners),this.listeners.getIn(e.concat([f])).map(function(e){return e?e:t})}}]),e}()},function(e,t,n){var r,o;(function(e,i){(function(s){function u(e){return e&&e.Object===Object?e:null}var a={"function":!0,object:!0},c=a[typeof t]&&t&&!t.nodeType?t:null,f=a[typeof e]&&e&&!e.nodeType?e:null,p=u(c&&f&&"object"==typeof i&&i),l=u(a[typeof self]&&self),d=u(a[typeof window]&&window),h=(f&&f.exports===c?c:null,u(a[typeof this]&&this)),v=p||d!==(h&&h.window)&&d||l||h||Function("return this")();r=[n(1)],o=function(e,t){return s(v,t,e)}.apply(t,r),!(void 0!==o&&(e.exports=o))}).call(this,function(e,t,n,r){function o(e){return function(){try{return e.apply(this,arguments)}catch(t){return C.e=t,C}}}function i(e){if(!S(e))throw new TypeError("fn must be a function");return o(e)}function s(e,t,n,r){this._e=e,this._n=t,this._fn=n,this._u=r,this._e.addEventListener(this._n,this._fn,this._u),this.isDisposed=!1}function u(e,t,n,r){if(e.addEventListener)return new s(e,t,n,r);throw new Error("No listener found")}function a(e,t,n,r){var o=new y,i=Object.prototype.toString;if("[object NodeList]"===i.call(e)||"[object HTMLCollection]"===i.call(e))for(var s=0,c=e.length;c>s;s++)o.add(a(e.item(s),t,n,r));else e&&o.add(u(e,t,n,r));return o}function c(){if(e.XMLHttpRequest)return new e.XMLHttpRequest;var t;try{for(var n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;3>r;r++)try{if(t=n[r],new e.ActiveXObject(t))break}catch(o){}return new e.ActiveXObject(t)}catch(o){throw new Error("XMLHttpRequest is not supported by your browser")}}function f(){var t=new e.XMLHttpRequest;if("withCredentials"in t)return t.withCredentials=!0,t;if(e.XDomainRequest)return new XDomainRequest;throw new Error("CORS is not supported by your browser")}function p(e,t,n){var r="response"in t?t.response:t.responseText;return r="json"===n.responseType?JSON.parse(r):r,{response:r,status:t.status,responseType:t.responseType,xhr:t,originalEvent:e}}function l(e,t,n){return{type:n,status:t.status,xhr:t,originalEvent:e}}function d(e,t,n,r){e&&(t&&(t.onNext(),t.onCompleted()),n?e.close(n,r):e.close())}function h(t){var n=e.MutationObserver||e.WebKitMutationObserver;return new n(t)}var v=(n.Observable,n.ObservableBase),m=n.internals.AbstractObserver,b=(n.Observer.create,n.Observable.create,n.Disposable.create,n.Disposable),y=n.CompositeDisposable,_=n.BinaryDisposable,w=n.SingleAssignmentDisposable,g=n.Subject,x=n.Scheduler,E=n.DOM={},O={}.hasOwnProperty,S=(n.helpers.noop,n.helpers.isFunction),k=n.internals.inherits,C={e:{}};s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._e.removeEventListener(this._n,this._fn,this._u))};var D=function(e){function t(t,n,r,o){this._e=t,this._n=n,this._fn=r,this._uc=o,e.call(this)}function n(e,t){return function(){var n=arguments[0];return t&&(n=i(t).apply(null,arguments),n===C)?e.onError(n.e):void e.onNext(n)}}return k(t,e),t.prototype.subscribeCore=function(e){return a(this._e,this._n,n(e,this._fn),this._uc)},t}(v),j=E.fromEvent=function(e,t,n,r){var o=S(n)?n:null;return"boolean"==typeof n&&(r=n),"undefined"==typeof r&&(r=!1),new D(e,t,o,r).publish().refCount()};!function(){var t="blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu input";e.PointerEvent&&(t+=" pointerdown pointerup pointermove pointerover pointerout pointerenter pointerleave"),e.TouchEvent&&(t+=" touchstart touchend touchmove touchcancel"),t=t.split(" ");for(var n=0,r=t.length;r>n;n++)!function(e){E[e]=function(t,n,r){return j(t,e,n,r)}}(t[n])}();var M=function(t){function n(){t.call(this)}function r(e){return function(){e.onNext(),e.onCompleted()}}function o(t,n){this._o=t,this._fn=n,this._addedHandlers=!1,this.isDisposed=!1,"complete"===e.document.readyState?setTimeout(this._fn,0):(this._addedHandlers=!0,e.document.addEventListener("DOMContentLoaded",this._fn,!1))}return k(n,t),n.prototype.subscribeCore=function(e){return new o(e,r(e))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,e.document.removeEventListener("DOMContentLoaded",this._fn,!1))},n}(v);E.ready=function(){return new M};var F=function(t){function n(e){this._settings=e,t.call(this)}function r(e,t){this._state=e,this._xhr=t,this.isDisposed=!1}return k(n,t),n.prototype.subscribeCore=function(t){var n,o={isDone:!1},i=this._settings,s=i.normalizeError,u=i.normalizeSuccess,a=function(e,n){var r=1223===e.status?204:e.status;r>=200&&300>=r||0===r||""===r?(t.onNext(u(n,e,i)),t.onCompleted()):t.onError(i.normalizeError(n,e,"error")),o.isDone=!0};try{n=i.createXHR()}catch(c){return t.onError(c)}try{i.user?n.open(i.method,i.url,i.async,i.user,i.password):n.open(i.method,i.url,i.async);var f=i.headers;for(var p in f)O.call(f,p)&&n.setRequestHeader(p,f[p]);n.timeout=i.timeout,n.ontimeout=function(e){i.progressObserver&&i.progressObserver.onError(e),t.onError(s(e,n,"timeout"))},n.upload||!("withCredentials"in n)&&e.XDomainRequest?(n.onload=function(e){i.progressObserver&&(i.progressObserver.onNext(e),i.progressObserver.onCompleted()),a(n,e)},i.progressObserver&&(n.onprogress=function(e){i.progressObserver.onNext(e)}),n.onerror=function(e){i.progressObserver&&i.progressObserver.onError(e),t.onError(s(e,n,"error")),o.isDone=!0},n.onabort=function(e){i.progressObserver&&i.progressObserver.onError(e),t.onError(s(e,n,"abort")),o.isDone=!0}):n.onreadystatechange=function(e){4===n.readyState&&a(n,e)};var l=i.headers["Content-Type"]||i.headers["Content-type"]||i.headers["content-type"];if(i.hasContent&&"application/x-www-form-urlencoded"===l&&"string"!=typeof i.body){var d=[];for(var h in i.body)O.call(i.body,h)&&d.push(h+"="+i.body[h]);i.body=d.join("&")}n.send(i.hasContent&&i.body||null)}catch(v){t.onError(v)}return new r(o,n)},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._state.isDone||4===this._xhr.readyState||this._xhr.abort())},n}(v),L=E.ajax=function(e){var t={method:"GET",crossDomain:!1,async:!0,headers:{},responseType:"text",timeout:0,createXHR:function(){return this.crossDomain?f():c()},normalizeError:l,normalizeSuccess:p};if("string"==typeof e)t.url=e;else for(var n in e)O.call(e,n)&&(t[n]=e[n]);return t.crossDomain||t.headers["X-Requested-With"]||(t.headers["X-Requested-With"]="XMLHttpRequest"),t.hasContent=t.body!==r,new F(t)};E.post=function(e,t){var n;return"string"==typeof e?n={url:e,body:t,method:"POST"}:"object"==typeof e&&(n=e,n.method="POST"),L(n)},E.get=function(e){var t;return"string"==typeof e?t={url:e}:"object"==typeof e&&(t=e),L(t)},E.getJSON=function(t){if(!e.JSON&&"function"!=typeof e.JSON.parse)throw new TypeError("JSON is not supported in your runtime.");return L({url:t,responseType:"json"}).map(function(e){return e.response})};var T=function(){var t="document"in e&&e.document.createElement("div");return function(e){t.appendChild(e),t.innerHTML=""}}(),N=function(t){function n(e){this._settings=e,t.call(this)}function r(e){this._script=e,this.isDisposed=!1}return k(n,t),n.id=0,n.prototype.subscribeCore=function(t){var o={jsonp:"JSONPCallback",async:!0,jsonpCallback:"rxjsjsonpCallbackscallback_"+(n.id++).toString(36)};if("string"==typeof this._settings)o.url=this._settings;else for(var i in this._settings)O.call(this._settings,i)&&(o[i]=this._settings[i]);var s=e.document.createElement("script");s.type="text/javascript",s.async=o.async,s.src=o.url.replace(o.jsonp,o.jsonpCallback),e[o.jsonpCallback]=function(t){e[o.jsonpCallback].called=!0,e[o.jsonpCallback].data=t};var u=function(n){"load"!==n.type||e[o.jsonpCallback].called||(n={type:"error"});var r="error"===n.type?400:200,i=e[o.jsonpCallback].data;200===r?(t.onNext({status:r,responseType:"jsonp",response:i,originalEvent:n}),t.onCompleted()):t.onError({type:"error",status:r,originalEvent:n})};s.onload=s.onreadystatechanged=s.onerror=u;var a=e.document.getElementsByTagName("head")[0]||e.document.documentElement;return a.insertBefore(s,a.firstChild),new r(s)},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._script.onload=this._script.onreadystatechanged=this._script.onerror=null,T(this._script),this._script=null)},n}(v);E.jsonpRequest=function(e){return new N(e)};var R=function(e){function t(t,n,r,o,i){this._state=t,this._url=n,this._protocol=r,this._open=o,this._close=i,e.call(this)}function n(e,t){return function n(r){e.onNext(r),e.onCompleted(),t.removeEventListener("open",n,!1)}}function r(e){return function(t){e.onNext(t)}}function o(e){return function(t){e.onError(t)}}function i(e){return function(t){return 1e3===t.code&&t.wasClean?void e.onCompleted():e.onError(t)}}function s(e,t,n,r,o){this._socket=e,this._msgFn=t,this._errFn=n,this._closeFn=r,this._close=o,this.isDisposed=!1}return k(t,e),s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,d(this._socket,this._close),this._socket.removeEventListener("message",this._msgFn,!1),this._socket.removeEventListener("error",this._errFn,!1),this._socket.removeEventListener("close",this._closeFn,!1))},t.prototype.subscribeCore=function(e){this._state.socket=this._protocol?new WebSocket(this._url,this._protocol):new WebSocket(this._url);var t=n(this._open,this._state.socket),u=r(e),a=o(e),c=i(e);return this._open&&this._state.socket.addEventListener("open",t,!1),this._state.socket.addEventListener("message",u,!1),this._state.socket.addEventListener("error",a,!1),this._state.socket.addEventListener("close",c,!1),new s(this._state.socket,u,a,c,this._close)},t}(v),A=function(e){function t(t,n){this._state=t,this._close=n,e.call(this)}return k(t,e),t.prototype.next=function(e){this._state.socket&&this._state.socket.readyState===WebSocket.OPEN&&this._state.socket.send(e)},t.prototype.error=function(e){if(!e.code)throw new Error('no code specified. be sure to pass { code: ###, reason: "" } to onError()');d(this._state.socket,this._close,e.code,e.reason||"")},t.prototype.completed=function(){d(this._state.socket,this._close,1e3,"")},t}(m);E.fromWebSocket=function(e,t,n,r){if(!WebSocket)throw new TypeError("WebSocket not implemented in your runtime.");var o={socket:null};return g.create(new A(o,r),new R(o,e,t,n,r))};var P=function(e){function t(t){this._state=t,e.call(this)}return k(t,e),t.prototype.next=function(e){this._state.worker&&this._state.worker.postMessage(e)},t.prototype.error=function(e){throw e},t.prototype.completed=function(){},t}(m),q=function(t){function n(e,n){this._state=e,this._url=n,t.call(this)}function r(e){return function(t){e.onNext(t)}}function o(e){return function(t){e.onError(t)}}function i(e,t,n){this._w=e,this._msgFn=t,this._errFn=n,this.isDisposed=!1}return k(n,t),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._w.terminate(),this._w.removeEventListener("message",this._msgFn,!1),this._w.removeEventListener("error",this._errFn,!1))},n.prototype.subscribeCore=function(t){this._state.worker=new e.Worker(this._url);var n=r(t),s=o(t);return this._state.worker.addEventListener("message",n,!1),this._state.worker.addEventListener("error",s,!1),new i(this._state.worker,n,s)},n}(v);E.fromWorker=function(t){if(!e.Worker)throw new TypeError("Worker not implemented in your runtime.");var n={worker:null};return g.create(new P(n),new q(n,t))};var I=function(e){function t(t,n){this._target=t,this._options=n,e.call(this)}function n(e){this._m=e,this.isDisposed=!1}return k(t,e),n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._m.disconnect())},t.prototype.subscribeCore=function(e){var t=h(function(t){e.onNext(t)});return t.observe(this._target,this._options),new n(t)},t}(v);E.fromMutationObserver=function(t,n){if(!e.MutationObserver&&!e.WebKitMutationObserver)throw new TypeError("MutationObserver not implemented in your runtime.");return new I(t,n)};var U=function(t){function n(e){this._opts=e,t.call(this)}return k(n,t),n.prototype.subscribeCore=function(t){e.navigator.geolocation.getCurrentPosition(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)},this._opts)},n}(v),H=function(t){function n(e){this._opts=e,t.call(this)}function r(e){this._id=e,this.isDisposed=!1}return k(n,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,e.navigator.geolocation.clearWatch(this._id))},n.prototype.subscribeCore=function(t){var n=e.navigator.geolocation.watchPosition(function(e){t.onNext(e)},function(e){t.onError(e)},this._opts);return new r(n)},n}(v);n.DOM.geolocation={getCurrentPosition:function(t){if(!e.navigator&&!e.navigation.geolocation)throw new TypeError("geolocation not available");return new U(t)},watchPosition:function(t){if(!e.navigator&&!e.navigation.geolocation)throw new TypeError("geolocation not available");return new H(t).publish().refCount()}};var W=function(t){function n(e,n,r,o){this._readerFn=e,this._file=n,this._progressObserver=r,this._encoding=o,t.call(this)}function r(e,t){return function(n){t&&t.onCompleted(),e.onNext(n.target.result),e.onCompleted()}}function o(e){return function(t){e.onError(t.target.error)}}function i(e){return function(t){e.onNext(t)}}function s(e,t,n,r,o){this._r=e,this._po=t,this._lFn=n,this._eFn=r,this._pFn=o,this.isDisposed=!1}return k(n,t),s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._r.readyState===e.FileReader.LOADING&&this._r.abort(),this._r.removeEventListener("load",this._lFn,!1),this._r.removeEventListener("error",this._eFn,!1),this._po&&this._r.removeEventListener("progress",this._pFn,!1))},n.prototype.subscribeCore=function(t){var n=new e.FileReader,u=r(t,this._progressObserver),a=o(t),c=i(this._progressObserver);return n.addEventListener("load",u,!1),n.addEventListener("error",a,!1),this._progressObserver&&n.addEventListener("progress",c,!1),n[this._readerFn](this._file,this._encoding),new s(n,this._progressObserver,u,a,c)},n}(v);E.fromReader=function(t,n){if(!e.FileReader)throw new TypeError("FileReader not implemented in your runtime.");return{asArrayBuffer:function(){return new W("readAsArrayBuffer",t,n)},asBinaryString:function(){return new W("readAsBinaryString",t,n)},asDataURL:function(){return new W("readAsDataURL",t,n)},asText:function(e){return new W("readAsText",t,n,e)}}};var X=function(e){function t(t,n){this._url=t,this._open=n,e.call(this)}function n(e,t){return function n(r){e.onNext(r),e.onCompleted(),t.removeEventListener("open",n,!1)}}function r(e){return function(t){t.readyState===EventSource.CLOSED?e.onCompleted():e.onError(t)}}function o(e){return function(t){e.onNext(t.data)}}function i(e,t,n){this._s=e,this._errFn=t,this._msgFn=n,this.isDisposed=!1}return k(t,e),i.prototype.dispose=function(){this.isDisposed||(this._s.removeEventListener("error",this._errFn,!1),this._s.removeEventListener("message",this._msgFn,!1),this._s.close())},t.prototype.subscribeCore=function(e){var t=new EventSource(this._url),s=n(this._open,t),u=r(e),a=o(e);return this._open&&t.addEventListener("open",s,!1),t.addEventListener("error",u,!1),t.addEventListener("message",a,!1),new i(t,u,a)},t}(v);E.fromEventSource=function(t,n){if(!e.EventSource)throw new TypeError("EventSource not implemented in your runtime.");return new X(t,n)};var $,B;return e.requestAnimationFrame?($=e.requestAnimationFrame,B=e.cancelAnimationFrame):e.mozRequestAnimationFrame?($=e.mozRequestAnimationFrame,B=e.mozCancelAnimationFrame):e.webkitRequestAnimationFrame?($=e.webkitRequestAnimationFrame,B=e.webkitCancelAnimationFrame):e.msRequestAnimationFrame?($=e.msRequestAnimationFrame,B=e.msCancelAnimationFrame):e.oRequestAnimationFrame?($=e.oRequestAnimationFrame,B=e.oCancelAnimationFrame):($=function(t){e.setTimeout(t,1e3/60)},B=e.clearTimeout),x.requestAnimationFrame=function(){var t=function(t){function n(){t.call(this)}function r(e,t,n,r){return function(){!e.isDisposed&&e.setDisposable(b._fixup(t(n,r)))}}function o(e,t){this._id=t,this._method=e,this.isDisposed=!1}return k(n,t),o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._method.call(null,this._id))},n.prototype.schedule=function(e,t){var n=new w,i=$(r(n,t,this,e));return new _(n,new o(B,i))},n.prototype._scheduleFuture=function(t,n,i){if(0===n)return this.schedule(t,i);var s=new w,u=e.setTimeout(r(s,i,this,t),n);return new _(s,new o(e.clearTimeout,u))},n}(x);return new t}(),x.microtask=function(){function t(e){delete u[e]}function n(r){if(a)e.setTimeout(function(){n(r)},0);else{var o=u[r];if(o){a=!0;try{o()}catch(i){throw i}finally{t(r),a=!1}}}}function r(){if(!e.postMessage||e.importScripts)return!1;var t=!1,n=e.onmessage;return e.onmessage=function(){t=!0},e.postMessage("","*"),e.onmessage=n,t}function o(e){"string"==typeof e.data&&e.data.substring(0,d.length)===d&&n(e.data.substring(d.length))}var i,s=1,u={},a=!1,c=e.MutationObserver||e.WebKitMutationObserver;if(c){var f="drainqueue_",p=new c(function(e){e.forEach(function(e){n(e.attributeName.substring(f.length))})}),l=e.document.createElement("div");p.observe(l,{attributes:!0}),e.addEventListener("unload",function(){p.disconnect(),p=null},!1),i=function(e){var t=s++;return u[t]=e,l.setAttribute(f+t,"drainQueue"),t}}else if("function"==typeof e.setImmediate)i=function(t){var r=s++;return u[r]=t,e.setImmediate(function(){n(r)}),r};else if(r()){var d="ms.rx.schedule"+Math.random();e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent&&e.attachEvent("onmessage",o),i=function(t){var n=s++;return u[n]=t,e.postMessage(d+n,"*"),n}}else if(e.MessageChannel){var h=new e.MessageChannel;h.port1.onmessage=function(e){n(e.data)},i=function(e){var t=s++;return u[t]=e,h.port2.postMessage(t),t}}else i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(t){var r=e.document.createElement("script"),o=s++;return u[o]=t,r.onreadystatechange=function(){n(o),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r),o}:function(t){var r=s++;return u[r]=t,e.setTimeout(function(){n(r)},0),r};var v=function(n){function r(){n.call(this)}function o(e,t,n,r){return function(){!e.isDisposed&&e.setDisposable(b._fixup(t(n,r)))}}function s(e,t){this._id=t,this._method=e,this.isDisposed=!1}return k(r,n),s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._method.call(null,this._id))},r.prototype.schedule=function(e,n){var r=new w,u=i(o(r,n,this,e));return new _(r,new s(t,u))},r.prototype._scheduleFuture=function(t,n,r){if(0===n)return this.schedule(t,r);var i=new w,u=e.setTimeout(o(i,r,this,t),n);return new _(i,new s(e.clearTimeout,u))},r}(x);return new v}(),n})}).call(t,n(12)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=n}])});
//# sourceMappingURL=reframe.js.map