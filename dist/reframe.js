!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Immutable"),require("Rx"),require("React")):"function"==typeof define&&define.amd?define("reframe",["Immutable","Rx","React"],t):"object"==typeof exports?exports.reframe=t(require("Immutable"),require("Rx"),require("React")):e.reframe=t(e.Immutable,e.Rx,e.React)}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/js/",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}var o=r(7),i=n(o),u=r(3),a=n(u),s=r(4),c=n(s),f=r(6),l=n(f),p=r(9),d=n(p),v=r(8),h=n(v);e.exports.registerHandler=i.registerHandler,e.exports.dispatch=i.dispatch,e.exports.dispatchSync=i.dispatchSync,e.exports.registerSub=a.registerSub,e.exports.subscribe=a.subscribe,e.exports.indexPath=a.indexPath,e.exports.db$=c.db$,e.exports.viewP=d.viewP,e.exports.viewV=d.viewV,e.exports.viewSP=d.viewSP,e.exports.viewSV=d.viewSV,e.exports.view=d.viewSV,e.exports.deref=d.deref,e.exports.atom=l.atom,e.exports.swap=l.swap,e.exports.reset=l.reset,e.exports.render=d.render,e.exports.pause$=d.pause$,e.exports.compMiddleware=i.compMiddleware,e.exports.debug=h.debug,e.exports.trimv=h.trimv,e.exports.path=h.path,e.exports.enrich=h.enrich,e.exports.after=h.after},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){m.register(e,t)}function i(e){var t=m.lookup(e[0]);return t(h,e)}function u(e,t){return g.sub(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.render$=t.sync$=t.animationFrame$=void 0;var a=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.registerSub=o,t.subscribe=i,t.indexPath=u;var s=r(2),c=n(s),f=r(5),l=r(11),p=t.animationFrame$=new c.BehaviorSubject,d=new c.Subject,v=t.sync$=new c.Subject,h=new c.BehaviorSubject,b=t.render$=new c.Subject,y=!1;p.filter(Boolean).doOnNext(function(e){y||(requestAnimationFrame(function(){d.onNext(p.getValue()),y=!1}),y=!0)}).subscribe(),c.Observable.merge(d,v).scan(function(e,t){var r=a(e,2),n=r[0],o=r[1],i=a(t,2),u=i[0],s=i[1];return u>n?[u,s]:[n,o]},[-1,null]).map(function(e){var t=a(e,2),r=(t[0],t[1]);return r}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).doOnNext(function(e){h.onNext(e),b.onNext(!0)}).subscribe();var m=new f.Dispatcher,g=new l.Index(function(){return h})},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.db$=void 0;var o=r(2),i=n(o),u=r(1),a=n(u);t.db$=new i.BehaviorSubject(a.Map())},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Dispatcher=function(){function e(){r(this,e),this.map={}}return n(e,[{key:"register",value:function(e,t){this.map[e]=t}},{key:"lookup",value:function(e){return this.map[e]}}]),e}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return new s.BehaviorSubject(e)}function i(e,t){e.onNext(t(e.getValue()))}function u(e,t){e.onNext(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.atom=o,t.swap=i,t.reset=u;var a=r(2),s=n(a)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return function(t){var r=e.reverse().filter(function(e){return e}).reduce(function(e,t){return t(e)},t);return r}}function i(){var e=void 0,t=void 0,r=void 0;switch(arguments.length){case 2:e=arguments[0],t=function(e){return e},r=arguments[1];break;case 3:e=arguments[0],t=Array.isArray(arguments[1])?o(arguments[1]):arguments[1],r=arguments[2];break;default:throw new Error("Expected 2 or 3 arguments, got "+arguments.length)}b.register(e,t(r))}function u(e){y.onNext([!1,e])}function a(e){y.onNext([!0,e])}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.compMiddleware=o,t.registerHandler=i,t.dispatch=u,t.dispatchSync=a;var c=r(4),f=r(2),l=n(f),p=r(3),d=r(5),v=r(1),h=n(v),b=new d.Dispatcher,y=new l.Subject;y.scan(function(e,t){var r=s(e,2),n=r[0],o=r[1],i=s(t,2),u=i[0],a=i[1],f=b.lookup(a[0]),l=f(o,a);if(l!==o){c.db$.onNext(l);var d=n+1;return u?p.sync$.onNext([d,l]):p.animationFrame$.onNext([d,l]),[d,l]}return[n,o]},[0,h.Map()]).subscribe()},function(e,t,r){"use strict";function n(e){return function(t,r){console.log("-- New Event ----------------------------------------------------"),console.groupCollapsed("re-frame event: ",r.map(function(e){return e&&e.toJS?e.toJS():e}));var n=e(t,r),o=s(t,n);return o.forEach(function(e){return console.log(e.toJS())}),console.groupEnd(),n}}function o(e){return function(t,r){return e(t,r.slice(1))}}function i(e,t){return function(r){return function(n,o){var i=r(n.getIn(e,t),o);return n.setIn(e,i)}}}function u(e){return function(t){return function(r,n){var o=t(r,n);return e(o,n,r)}}}function a(e){return function(t){return function(r,n){var o=t(r,n);return e(o,n,r),o}}}Object.defineProperty(t,"__esModule",{value:!0}),t.debug=n,t.trimv=o,t.path=i,t.enrich=u,t.after=a;var s=r(12)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=t||function(e){return e},n=new M.BehaviorSubject;return e.map(r).subscribe(n).dispose(),n.getValue()}function u(e){return e.map(function(e){return e.shouldUpdate()}).reduce(function(e,t){return e||t},!1)}function a(e){P.toUpdate.push([e.state.renderOrder,function(){u(e.state.derefed)&&e.forceUpdate()}])}function s(){P.toUpdate.sort(function(e,t){var r=g(e,1),n=r[0],o=g(t,1),i=o[0];return n-i}),P.toUpdate.forEach(function(e){var t=g(e,2),r=(t[0],t[1]);return r()}),P.toUpdate=[]}function c(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function f(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}function l(e,t){var r=void 0;switch(t.length){case 2:"undefined"==typeof t[1].prototype?(t[1].mixins=e,r=t[1]):r={mixins:e,render:t[1]};break;case 3:"undefined"==typeof t[2].prototype?(t[2].mixins=e.concat(t[1]),r=t[2]):r={mixins:e.concat(t[1]),render:t[2]};break;default:throw new Error("Expected 2 or 3 arguments, got "+t.length)}return r.displayName=t[0],r}function p(e,t){var r=l(e,t),n=r.render;r.render=function(){return n.call(this,this.props)};var o=j.createClass(r);return j.createFactory(o)}function d(e,t){var r=l(e,t),n=r.render;r.render=function(){return n.apply(this,this.props.argv)};var o=j.createClass(r),i=j.createFactory(o);return function(){return i({argv:Array.prototype.slice.call(arguments)})}}function v(){return p([E],arguments)}function h(){return d([E],arguments)}function b(){return p([V],arguments)}function y(){return d([V],arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionMixin=t.StatelessMixin=t.pause$=void 0;var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.deref=i,t.render=s,t.viewP=v,t.viewV=h,t.viewSP=b,t.viewSV=y;var w=r(3),x=n(w),S=r(16),j=n(S),O=r(2),M=n(O),_=r(10),I=t.pause$=new M.BehaviorSubject(!0),P={renderOrder:0,toUpdate:[]};x.render$.pausable(I).subscribe(s);var E=t.StatelessMixin={shouldComponentUpdate:function(e,t){return(0,_.shouldUpdate)(this.props,e,["argv"])||(0,_.shouldUpdate)(this.state,t)||(0,_.shouldUpdate)(this.props.argv,e.argv)},getDisplayName:function(){return this.constructor.displayName}},U=function(){function e(t,r,n,i){o(this,e);var u=n||function(e){return e},s=new M.ReplaySubject(1),c=new M.BehaviorSubject,f=new M.CompositeDisposable(r.distinctUntilChanged(function(e){return e},function(e,t){return e===t}).map(u).subscribe(s),s.subscribe(c),s.skip(1).subscribe(function(){a(t)}));this.disposable=f,this.subject=c,this.renderCycle=null}return m(e,[{key:"getValue",value:function(e){return this.renderCycle=e,this.lastValue=this.subject.getValue(),this.lastValue}},{key:"dispose",value:function(){this.disposable.dispose()}},{key:"shouldDispose",value:function(e){return e>this.renderCycle}},{key:"shouldUpdate",value:function(){return this.lastValue!==this.subject.getValue()}}]),e}(),V=t.SubscriptionMixin={derefSub:function(e,t){return this.deref(x.subscribe(e),t,Immutable.List(e))},getDisplayName:function(){return this.constructor.displayName},getInitialState:function(){return{derefed:Immutable.Map(),renderOrder:P.renderOrder++,renderCycle:0}},shouldComponentUpdate:function(e,t){var r=(0,_.shouldUpdate)(this.props,e,["argv"])||(0,_.shouldUpdate)(this.props.argv,e.argv),n=(0,_.shouldUpdate)(this.state,t,["derefed","renderOrder","renderCycle"]);return r||n},deref:function(e,t,r){var n=r||f();if(this.state.derefed.get(n))return this.state.derefed.get(n).getValue(this.state.renderCycle);var o=new U(this,e,t);return this.state.derefed=this.state.derefed.set(n,o),o.getValue(this.state.renderCycle)},unsubscribe:function(){this.state.derefed.forEach(function(e){e.dispose()}),this.state.derefed=Immutable.Map()},componentWillUpdate:function(){this.state.renderCycle++},componentDidUpdate:function(){var e=this;this.state.derefed.filter(function(t){return t.shouldDispose(e.state.renderCycle)}).forEach(function(e){return e.dispose()}),this.state.derefed=this.state.derefed.filter(function(t){return!t.shouldDispose(e.state.renderCycle)})},componentWillUnmount:function(){this.unsubscribe()}}},function(e,t){"use strict";function r(e,t,r){var i=void 0;return t===e||t.length!==e.length?!1:(i=r&&r.length>0?Object.keys(e).filter(function(e){return-1===r.indexOf(e)}).map(function(r){return[e[r],t[r]]}):Object.keys(e).map(function(r){return[e[r],t[r]]}),i.length?!i.every(function(e){var t=u(e,2),r=t[0],i=t[1];return o(r)&&o(i)||n(r)&&n(i)?r===i:!1}):!1)}function n(e){return Immutable.Iterable.isIterable(e)}function o(e){var t="undefined"==typeof e?"undefined":i(e);return"number"===t||"boolean"===t||"string"===t||null===e||void 0===e}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.shouldUpdate=r},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),a=n(u),s=r(2),c=n(s),f={};t.Index=function(){function e(t){o(this,e),this.listeners=a.Map(),this.rx=t}return i(e,[{key:"sub",value:function(e,t){for(var r=this,n=this,o=[],i=0;i<e.length;i++)o.push(Array.prototype.slice.call(e.slice(0,i+1)));return this.listeners=o.reduce(function(e,t){var o=t.slice(0,t.length-1),i=0===o.length?r.rx():e.getIn(o.concat(f)),u=t[t.length-1];return e.updateIn(t.concat(f),function(e){if(e)return e;var r=new c.ReplaySubject(1),o=i.map(function(e){return e&&e.get?e.get(u):void 0}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).subscribe(r),a=r.subscribe;return r.subscribe=function(){var e=a.apply(this,arguments);return c.Disposable.create(function(){e.dispose(),r.hasObservers()||(o.dispose(),n.listeners=n.listeners.removeIn(t))})},r})},this.listeners),this.listeners.getIn(e.concat([f])).map(function(e){return"undefined"!=typeof e?e:t})}}]),e}()},function(e,t,r){"use strict";var n=r(1),o=r(15),i=r(13),u=r(14),a=u.concat,s=u.escape,c=o.op,f=o.isMap,l=o.isIndexed,p=function(e,t,r){var o=[],i=r||"";if(n.is(e,t)||e==t==null)return o;var u=l(e)&&l(t),v=null,h=null;return e.forEach&&e.forEach(function(e,r){if(t.has(r))if(f(e)&&f(t.get(r)))o=o.concat(p(e,t.get(r),a(i,s(r))));else if(l(t.get(r))&&l(e))o=o.concat(d(e,t.get(r),a(i,s(r))));else{var n=t.get?t.get(r):t,b=e!==n;b&&o.push(c("replace",a(i,s(r)),n))}else u?(h=null!=v&&v+1===r?h:r,o.push(c("remove",a(i,s(h)))),v=r):o.push(c("remove",a(i,s(r))))}),t.forEach(function(t,r){e.has&&!e.has(r)&&o.push(c("add",a(i,s(r)),t))}),o},d=function(e,t,r){var o=[],u=r||"";if(n.is(e,t)||e==t==null)return o;if(t.count()>100)return p(e,t,r);var s=i.diff(e,t),l=0;return s.forEach(function(e){if("="===e.op)l++;else if("!="===e.op){if(f(e.val)&&f(e.newVal)){var t=p(e.val,e.newVal,a(u,l));o=o.concat(t)}else o.push(c("replace",a(u,l),e.newVal));l++}else"+"===e.op?(o.push(c("add",a(u,l),e.val)),l++):"-"===e.op&&o.push(c("remove",a(u,l)))}),o},v=function(e,t,r){var n=r||"";return e===t?[]:[c("replace",a(n,""),t)]},h=function(e,t,r){return e==t||null!=e&&null!=t?l(e)&&l(t)?n.fromJS(d(e,t)):f(e)&&f(t)?n.fromJS(p(e,t)):n.fromJS(v(e,t,r)):n.fromJS([c("replace","/",t)])};e.exports=h},function(e,t,r){"use strict";function n(e,t){for(var r=e.size||0,n=t.size||0,u=i(r+1,n+1,0),a=0;r>a;a++)for(var s=0;n>s;s++)o.is(e.get(a),t.get(s))?u[a+1][s+1]=u[a][s]+1:u[a+1][s+1]=Math.max(u[a+1][s],u[a][s+1]);return u}var o=r(1),i=function(e,t,r){for(var n=[],o=0;e>o;o++)if(n[o]=new Array(t),null!=r)for(var i=0;t>i;i++)n[o][i]=r;return n},u=function(e,t){var r=n(e,t);return l(e,t,r)},a=o.Record({op:"=",val:null}),s=o.Record({op:"!=",val:null,newVal:null}),c=function(e,t){var r=n(e,t);return f(r,e,t,e.size||0,t.size||0)},f=function(e,t,r,n,i){return 0===n&&0===i?[]:n>0&&i>0&&o.is(t.get(n-1),r.get(i-1))?f(e,t,r,n-1,i-1).concat(new a({op:"=",val:t.get(n-1)})):n>0&&i>0&&n===i&&!o.is(t.get(n-1),r.get(i-1))?f(e,t,r,n-1,i-1).concat(new s({val:t.get(n-1),newVal:r.get(n-1)})):i>0&&(0===n||e[n][i-1]>=e[n-1][i])?f(e,t,r,n,i-1).concat(new a({op:"+",val:r.get(i-1)})):n>0&&(0===i||e[n][i-1]<e[n-1][i])?f(e,t,r,n-1,i).concat(new a({op:"-",val:t.get(n-1)})):void 0},l=function(e,t,r){for(var n=[],i=e.size,u=t.size;0!==i&&0!==u;)r[i][u]===r[i-1][u]?i--:r[i][u]===r[i][u-1]?u--:o.is(e.get(i-1),t.get(u-1))&&(n.push(e.get(i-1)),i--,u--);return n.reverse()};e.exports={lcs:u,computeLcsMatrix:n,diff:c}},function(e,t){"use strict";var r=new RegExp("/","g"),n=new RegExp("~1","g"),o=/~/g,i=/~0/g,u={escape:function(e){if("number"==typeof e)return e.toString();if("string"!=typeof e)throw"param str ("+e+") is not a string";return e.replace(o,"~0").replace(r,"~1")},unescape:function(e){return"string"==typeof e?e.replace(n,"/").replace(i,"~"):e},concat:function(e,t){return e+"/"+t}};e.exports=u},function(e,t,r){"use strict";var n=r(1),o=function(e){return n.Iterable.isKeyed(e)},i=function(e){return n.Iterable.isIndexed(e)},u=function(e,t,r){return"remove"===e?{op:e,path:t}:{op:e,path:t,value:r}};e.exports={isMap:o,isIndexed:i,op:u}},function(e,t){e.exports=r}])});
//# sourceMappingURL=reframe.js.map