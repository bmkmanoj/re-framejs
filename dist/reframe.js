!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable"),require("rx"),require("react")):"function"==typeof define&&define.amd?define("reframe",["immutable","rx","react"],t):"object"==typeof exports?exports.reframe=t(require("immutable"),require("rx"),require("react")):e.reframe=t(e.Immutable,e.Rx,e.React)}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="/js/",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}var u=r(7),i=n(u),o=r(3),a=n(o),s=r(4),c=n(s),f=r(6),l=n(f),p=r(9),d=n(p),v=r(8),h=n(v);e.exports.registerHandler=i.registerHandler,e.exports.dispatch=i.dispatch,e.exports.dispatchSync=i.dispatchSync,e.exports.registerSub=a.registerSub,e.exports.subscribe=a.subscribe,e.exports.indexPath=a.indexPath,e.exports.db$=c.db$,e.exports.viewP=d.viewP,e.exports.viewV=d.viewV,e.exports.viewSP=d.viewSP,e.exports.viewSV=d.viewSV,e.exports.view=d.viewSV,e.exports.deref=d.deref,e.exports.atom=l.atom,e.exports.swap=l.swap,e.exports.reset=l.reset,e.exports.render=d.render,e.exports.pause$=d.pause$,e.exports.compMiddleware=i.compMiddleware,e.exports.debug=h.debug,e.exports.trimv=h.trimv,e.exports.path=h.path,e.exports.enrich=h.enrich,e.exports.after=h.after},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e,t){m.register(e,t)}function i(e){var t=m.lookup(e[0]);return t(h,e)}function o(e,t){return g.sub(e,t)}var a=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.render$=t.sync$=t.animationFrame$=void 0,t.registerSub=u,t.subscribe=i,t.indexPath=o;var s=r(2),c=n(s),f=r(5),l=r(11),p=t.animationFrame$=new c.BehaviorSubject,d=new c.Subject,v=t.sync$=new c.Subject,h=new c.BehaviorSubject,b=t.render$=new c.Subject,y=!1;p.filter(Boolean).doOnNext(function(e){y||(requestAnimationFrame(function(){d.onNext(p.getValue()),y=!1}),y=!0)}).subscribe(),c.Observable.merge(d,v).scan(function(e,t){var r=a(e,2),n=r[0],u=r[1],i=a(t,2),o=i[0],s=i[1];return o>n?[o,s]:[n,u]},[-1,null]).map(function(e){var t=a(e,2),r=(t[0],t[1]);return r}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).doOnNext(function(e){h.onNext(e),b.onNext(!0)}).subscribe();var m=new f.Dispatcher,g=new l.Index(function(){return h})},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.db$=void 0;var u=r(2),i=n(u),o=r(1),a=n(o);t.db$=new i.BehaviorSubject(a.Map())},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.Dispatcher=function(){function e(){r(this,e),this.map={}}return n(e,[{key:"register",value:function(e,t){this.map[e]=t}},{key:"lookup",value:function(e){return this.map[e]}}]),e}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e){return new s.BehaviorSubject(e)}function i(e,t){e.onNext(t(e.getValue()))}function o(e,t){e.onNext(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.atom=u,t.swap=i,t.reset=o;var a=r(2),s=n(a)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e){return function(t){var r=e.reverse().filter(function(e){return e}).reduce(function(e,t){return t(e)},t);return r}}function i(){var e=void 0,t=void 0,r=void 0;switch(arguments.length){case 2:e=arguments[0],t=function(e){return e},r=arguments[1];break;case 3:e=arguments[0],t=Array.isArray(arguments[1])?u(arguments[1]):arguments[1],r=arguments[2];break;default:throw new Error("Expected 2 or 3 arguments, got "+arguments.length)}b.register(e,t(r))}function o(e){y.onNext([!1,e])}function a(e){y.onNext([!0,e])}var s=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.compMiddleware=u,t.registerHandler=i,t.dispatch=o,t.dispatchSync=a;var c=r(4),f=r(2),l=n(f),p=r(3),d=r(5),v=r(1),h=n(v),b=new d.Dispatcher,y=new l.Subject;y.scan(function(e,t){var r=s(e,2),n=r[0],u=r[1],i=s(t,2),o=i[0],a=i[1],f=b.lookup(a[0]),l=f(u,a);if(l!==u){c.db$.onNext(l);var d=n+1;return o?p.sync$.onNext([d,l]):p.animationFrame$.onNext([d,l]),[d,l]}return[n,u]},[0,h.Map()]).subscribe()},function(e,t,r){"use strict";function n(e){return function(t,r){console.log("-- New Event ----------------------------------------------------"),console.groupCollapsed("re-frame event: ",r.map(function(e){return e&&e.toJS?e.toJS():e}));var n=e(t,r),u=s(t,n);return u.forEach(function(e){return console.log(e.toJS())}),console.groupEnd(),n}}function u(e){return function(t,r){return e(t,r.slice(1))}}function i(e,t){return function(r){return function(n,u){var i=r(n.getIn(e,t),u);return n.setIn(e,i)}}}function o(e){return function(t){return function(r,n){var u=t(r,n);return e(u,n,r)}}}function a(e){return function(t){return function(r,n){var u=t(r,n);return e(u,n,r),u}}}Object.defineProperty(t,"__esModule",{value:!0}),t.debug=n,t.trimv=u,t.path=i,t.enrich=o,t.after=a;var s=r(12)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=t||function(e){return e},n=new M.BehaviorSubject;return e.map(r).subscribe(n).dispose(),n.getValue()}function o(e){return e.map(function(e){return e.shouldUpdate()}).reduce(function(e,t){return e||t},!1)}function a(e){I.toUpdate.push([e.state.renderOrder,function(){o(e.state.derefed)&&e.forceUpdate()}])}function s(){I.toUpdate.sort(function(e,t){var r=g(e,1),n=r[0],u=g(t,1),i=u[0];return n-i}),I.toUpdate.forEach(function(e){var t=g(e,2),r=(t[0],t[1]);return r()}),I.toUpdate=[]}function c(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function f(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}function l(e,t){var r=void 0;switch(t.length){case 2:"undefined"==typeof t[1].prototype?(t[1].mixins=e,r=t[1]):r={mixins:e,render:t[1]};break;case 3:"undefined"==typeof t[2].prototype?(t[2].mixins=e.concat(t[1]),r=t[2]):r={mixins:e.concat(t[1]),render:t[2]};break;default:throw new Error("Expected 2 or 3 arguments, got "+t.length)}return r.displayName=t[0],r}function p(e,t){var r=l(e,t),n=r.render;r.render=function(){return n.call(this,this.props)};var u=j.createClass(r);return j.createFactory(u)}function d(e,t){var r=l(e,t),n=r.render;r.render=function(){return n.apply(this,this.props.argv)};var u=j.createClass(r),i=j.createFactory(u);return function(){return i({argv:Array.prototype.slice.call(arguments)})}}function v(){return p([E],arguments)}function h(){return d([E],arguments)}function b(){return p([V],arguments)}function y(){return d([V],arguments)}var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionMixin=t.StatelessMixin=t.pause$=void 0,t.deref=i,t.render=s,t.viewP=v,t.viewV=h,t.viewSP=b,t.viewSV=y;var w=r(3),x=n(w),S=r(16),j=n(S),O=r(2),M=n(O),_=r(10),P=t.pause$=new M.BehaviorSubject(!0),I={renderOrder:0,toUpdate:[]};x.render$.pausable(P).subscribe(s);var E=t.StatelessMixin={shouldComponentUpdate:function(e,t){return(0,_.shouldUpdate)(this.props,e,["argv"])||(0,_.shouldUpdate)(this.state,t)||(0,_.shouldUpdate)(this.props.argv,e.argv)},getDisplayName:function(){return this.constructor.displayName}},U=function(){function e(t,r,n,i){u(this,e);var o=n||function(e){return e},s=new M.ReplaySubject(1),c=new M.BehaviorSubject,f=new M.CompositeDisposable(r.distinctUntilChanged(function(e){return e},function(e,t){return e===t}).map(o).subscribe(s),s.subscribe(c),s.skip(1).subscribe(function(){a(t)}));this.disposable=f,this.subject=c,this.renderCycle=null}return m(e,[{key:"getValue",value:function(e){return this.renderCycle=e,this.lastValue=this.subject.getValue(),this.lastValue}},{key:"dispose",value:function(){this.disposable.dispose()}},{key:"shouldDispose",value:function(e){return e>this.renderCycle}},{key:"shouldUpdate",value:function(){return this.lastValue!==this.subject.getValue()}}]),e}(),V=t.SubscriptionMixin={derefSub:function(e,t){return this.deref(x.subscribe(e),t,Immutable.List(e))},getDisplayName:function(){return this.constructor.displayName},getInitialState:function(){return{derefed:Immutable.Map(),renderOrder:I.renderOrder++,renderCycle:0}},shouldComponentUpdate:function(e,t){var r=(0,_.shouldUpdate)(this.props,e,["argv"])||(0,_.shouldUpdate)(this.props.argv,e.argv),n=(0,_.shouldUpdate)(this.state,t,["derefed","renderOrder","renderCycle"]);return r||n},deref:function(e,t,r){var n=r||f();if(this.state.derefed.get(n))return this.state.derefed.get(n).getValue(this.state.renderCycle);var u=new U(this,e,t);return this.state.derefed=this.state.derefed.set(n,u),u.getValue(this.state.renderCycle)},unsubscribe:function(){this.state.derefed.forEach(function(e){e.dispose()}),this.state.derefed=Immutable.Map()},componentWillUpdate:function(){this.state.renderCycle++},componentDidUpdate:function(){var e=this;this.state.derefed.filter(function(t){return t.shouldDispose(e.state.renderCycle)}).forEach(function(e){return e.dispose()}),this.state.derefed=this.state.derefed.filter(function(t){return!t.shouldDispose(e.state.renderCycle)})},componentWillUnmount:function(){this.unsubscribe()}}},function(e,t){"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e,t,r){var n=void 0;return t===e||t.length!==e.length?!1:(n=r&&r.length>0?Object.keys(e).filter(function(e){return-1===r.indexOf(e)}).map(function(r){return[e[r],t[r]]}):Object.keys(e).map(function(r){return[e[r],t[r]]}),n.length?!n.every(function(e){var t=o(e,2),r=t[0],n=t[1];return i(r)&&i(n)||u(r)&&u(n)?r===n:!1}):!1)}function u(e){return Immutable.Iterable.isIterable(e)}function i(e){var t="undefined"==typeof e?"undefined":r(e);return"number"===t||"boolean"===t||"string"===t||null===e||void 0===e}var o=function(){function e(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(s){u=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(u)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdate=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0;var o=r(1),a=n(o),s=r(2),c=n(s),f={};t.Index=function(){function e(t){u(this,e),this.listeners=a.Map(),this.rx=t}return i(e,[{key:"sub",value:function(e,t){for(var r=this,n=this,u=[],i=0;i<e.length;i++)u.push(Array.prototype.slice.call(e.slice(0,i+1)));return this.listeners=u.reduce(function(e,t){var u=t.slice(0,t.length-1),i=0===u.length?r.rx():e.getIn(u.concat(f)),o=t[t.length-1];return e.updateIn(t.concat(f),function(e){if(e)return e;var r=new c.ReplaySubject(1),u=i.map(function(e){return e&&e.get?e.get(o):void 0}).distinctUntilChanged(function(e){return e},function(e,t){return e===t}).subscribe(r),a=r.subscribe;return r.subscribe=function(){var e=a.apply(this,arguments);return c.Disposable.create(function(){e.dispose(),r.hasObservers()||(u.dispose(),n.listeners=n.listeners.removeIn(t))})},r})},this.listeners),this.listeners.getIn(e.concat([f])).map(function(e){return"undefined"!=typeof e?e:t})}}]),e}()},function(e,t,r){"use strict";var n=r(1),u=r(15),i=r(13),o=r(14),a=o.concat,s=o.escape,c=u.op,f=u.isMap,l=u.isIndexed,p=function(e,t,r){var u=[],i=r||"";if(n.is(e,t)||e==t==null)return u;var o=l(e)&&l(t),v=null,h=null;return e.forEach&&e.forEach(function(e,r){if(t.has(r))if(f(e)&&f(t.get(r)))u=u.concat(p(e,t.get(r),a(i,s(r))));else if(l(t.get(r))&&l(e))u=u.concat(d(e,t.get(r),a(i,s(r))));else{var n=t.get?t.get(r):t,b=e!==n;b&&u.push(c("replace",a(i,s(r)),n))}else o?(h=null!=v&&v+1===r?h:r,u.push(c("remove",a(i,s(h)))),v=r):u.push(c("remove",a(i,s(r))))}),t.forEach(function(t,r){e.has&&!e.has(r)&&u.push(c("add",a(i,s(r)),t))}),u},d=function(e,t,r){var u=[],o=r||"";if(n.is(e,t)||e==t==null)return u;if(t.count()>100)return p(e,t,r);var s=i.diff(e,t),l=0;return s.forEach(function(e){if("="===e.op)l++;else if("!="===e.op){if(f(e.val)&&f(e.newVal)){var t=p(e.val,e.newVal,a(o,l));u=u.concat(t)}else u.push(c("replace",a(o,l),e.newVal));l++}else"+"===e.op?(u.push(c("add",a(o,l),e.val)),l++):"-"===e.op&&u.push(c("remove",a(o,l)))}),u},v=function(e,t,r){var n=r||"";return e===t?[]:[c("replace",a(n,""),t)]},h=function(e,t,r){return e==t||null!=e&&null!=t?l(e)&&l(t)?n.fromJS(d(e,t)):f(e)&&f(t)?n.fromJS(p(e,t)):n.fromJS(v(e,t,r)):n.fromJS([c("replace","/",t)])};e.exports=h},function(e,t,r){"use strict";function n(e,t){for(var r=e.size||0,n=t.size||0,o=i(r+1,n+1,0),a=0;r>a;a++)for(var s=0;n>s;s++)u.is(e.get(a),t.get(s))?o[a+1][s+1]=o[a][s]+1:o[a+1][s+1]=Math.max(o[a+1][s],o[a][s+1]);return o}var u=r(1),i=function(e,t,r){for(var n=[],u=0;e>u;u++)if(n[u]=new Array(t),null!=r)for(var i=0;t>i;i++)n[u][i]=r;return n},o=function(e,t){var r=n(e,t);return l(e,t,r)},a=u.Record({op:"=",val:null}),s=u.Record({op:"!=",val:null,newVal:null}),c=function(e,t){var r=n(e,t);return f(r,e,t,e.size||0,t.size||0)},f=function(e,t,r,n,i){return 0===n&&0===i?[]:n>0&&i>0&&u.is(t.get(n-1),r.get(i-1))?f(e,t,r,n-1,i-1).concat(new a({op:"=",val:t.get(n-1)})):n>0&&i>0&&n===i&&!u.is(t.get(n-1),r.get(i-1))?f(e,t,r,n-1,i-1).concat(new s({val:t.get(n-1),newVal:r.get(n-1)})):i>0&&(0===n||e[n][i-1]>=e[n-1][i])?f(e,t,r,n,i-1).concat(new a({op:"+",val:r.get(i-1)})):n>0&&(0===i||e[n][i-1]<e[n-1][i])?f(e,t,r,n-1,i).concat(new a({op:"-",val:t.get(n-1)})):void 0},l=function(e,t,r){for(var n=[],i=e.size,o=t.size;0!==i&&0!==o;)r[i][o]===r[i-1][o]?i--:r[i][o]===r[i][o-1]?o--:u.is(e.get(i-1),t.get(o-1))&&(n.push(e.get(i-1)),i--,o--);return n.reverse()};e.exports={lcs:o,computeLcsMatrix:n,diff:c}},function(e,t){"use strict";var r=new RegExp("/","g"),n=new RegExp("~1","g"),u=/~/g,i=/~0/g,o={escape:function(e){if("number"==typeof e)return e.toString();if("string"!=typeof e)throw"param str ("+e+") is not a string";return e.replace(u,"~0").replace(r,"~1")},unescape:function(e){return"string"==typeof e?e.replace(n,"/").replace(i,"~"):e},concat:function(e,t){return e+"/"+t}};e.exports=o},function(e,t,r){"use strict";var n=r(1),u=function(e){return n.Iterable.isKeyed(e)},i=function(e){return n.Iterable.isIndexed(e)},o=function(e,t,r){return"remove"===e?{op:e,path:t}:{op:e,path:t,value:r}};e.exports={isMap:u,isIndexed:i,op:o}},function(e,t){e.exports=r}])});
//# sourceMappingURL=reframe.js.map